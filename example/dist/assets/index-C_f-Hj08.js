var CC=Object.defineProperty;var Gw=i=>{throw TypeError(i)};var TC=(i,t,e)=>t in i?CC(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var M=(i,t,e)=>TC(i,typeof t!="symbol"?t+"":t,e),Pm=(i,t,e)=>t.has(i)||Gw("Cannot "+e);var a=(i,t,e)=>(Pm(i,t,"read from private field"),e?e.call(i):t.get(i)),S=(i,t,e)=>t.has(i)?Gw("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),p=(i,t,e,n)=>(Pm(i,t,"write to private field"),n?n.call(i,e):t.set(i,e),e),b=(i,t,e)=>(Pm(i,t,"access private method"),e);var ne=(i,t,e,n)=>({set _(s){p(i,t,s,e)},get _(){return a(i,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();function OS(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function kC(i){if(i.__esModule)return i;var t=i.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(i).forEach(function(n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return i[n]}})}),e}var zS={exports:{}},Zg={},BS={exports:{}},ot={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Af=Symbol.for("react.element"),PC=Symbol.for("react.portal"),RC=Symbol.for("react.fragment"),_C=Symbol.for("react.strict_mode"),MC=Symbol.for("react.profiler"),DC=Symbol.for("react.provider"),NC=Symbol.for("react.context"),LC=Symbol.for("react.forward_ref"),IC=Symbol.for("react.suspense"),FC=Symbol.for("react.memo"),OC=Symbol.for("react.lazy"),Kw=Symbol.iterator;function zC(i){return i===null||typeof i!="object"?null:(i=Kw&&i[Kw]||i["@@iterator"],typeof i=="function"?i:null)}var VS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},US=Object.assign,qS={};function Th(i,t,e){this.props=i,this.context=t,this.refs=qS,this.updater=e||VS}Th.prototype.isReactComponent={};Th.prototype.setState=function(i,t){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,t,"setState")};Th.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function HS(){}HS.prototype=Th.prototype;function _0(i,t,e){this.props=i,this.context=t,this.refs=qS,this.updater=e||VS}var M0=_0.prototype=new HS;M0.constructor=_0;US(M0,Th.prototype);M0.isPureReactComponent=!0;var Xw=Array.isArray,jS=Object.prototype.hasOwnProperty,D0={current:null},WS={key:!0,ref:!0,__self:!0,__source:!0};function GS(i,t,e){var n,s={},r=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(r=""+t.key),t)jS.call(t,n)&&!WS.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=e;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];s.children=c}if(i&&i.defaultProps)for(n in l=i.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Af,type:i,key:r,ref:o,props:s,_owner:D0.current}}function BC(i,t){return{$$typeof:Af,type:i.type,key:t,ref:i.ref,props:i.props,_owner:i._owner}}function N0(i){return typeof i=="object"&&i!==null&&i.$$typeof===Af}function VC(i){var t={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(e){return t[e]})}var Yw=/\/+/g;function Rm(i,t){return typeof i=="object"&&i!==null&&i.key!=null?VC(""+i.key):t.toString(36)}function hp(i,t,e,n,s){var r=typeof i;(r==="undefined"||r==="boolean")&&(i=null);var o=!1;if(i===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(i.$$typeof){case Af:case PC:o=!0}}if(o)return o=i,s=s(o),i=n===""?"."+Rm(o,0):n,Xw(s)?(e="",i!=null&&(e=i.replace(Yw,"$&/")+"/"),hp(s,t,e,"",function(h){return h})):s!=null&&(N0(s)&&(s=BC(s,e+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Yw,"$&/")+"/")+i)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Xw(i))for(var l=0;l<i.length;l++){r=i[l];var c=n+Rm(r,l);o+=hp(r,t,e,c,s)}else if(c=zC(i),typeof c=="function")for(i=c.call(i),l=0;!(r=i.next()).done;)r=r.value,c=n+Rm(r,l++),o+=hp(r,t,e,c,s);else if(r==="object")throw t=String(i),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Nf(i,t,e){if(i==null)return i;var n=[],s=0;return hp(i,n,"","",function(r){return t.call(e,r,s++)}),n}function UC(i){if(i._status===-1){var t=i._result;t=t(),t.then(function(e){(i._status===0||i._status===-1)&&(i._status=1,i._result=e)},function(e){(i._status===0||i._status===-1)&&(i._status=2,i._result=e)}),i._status===-1&&(i._status=0,i._result=t)}if(i._status===1)return i._result.default;throw i._result}var rn={current:null},up={transition:null},qC={ReactCurrentDispatcher:rn,ReactCurrentBatchConfig:up,ReactCurrentOwner:D0};function KS(){throw Error("act(...) is not supported in production builds of React.")}ot.Children={map:Nf,forEach:function(i,t,e){Nf(i,function(){t.apply(this,arguments)},e)},count:function(i){var t=0;return Nf(i,function(){t++}),t},toArray:function(i){return Nf(i,function(t){return t})||[]},only:function(i){if(!N0(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};ot.Component=Th;ot.Fragment=RC;ot.Profiler=MC;ot.PureComponent=_0;ot.StrictMode=_C;ot.Suspense=IC;ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qC;ot.act=KS;ot.cloneElement=function(i,t,e){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=US({},i.props),s=i.key,r=i.ref,o=i._owner;if(t!=null){if(t.ref!==void 0&&(r=t.ref,o=D0.current),t.key!==void 0&&(s=""+t.key),i.type&&i.type.defaultProps)var l=i.type.defaultProps;for(c in t)jS.call(t,c)&&!WS.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=e;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:Af,type:i.type,key:s,ref:r,props:n,_owner:o}};ot.createContext=function(i){return i={$$typeof:NC,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:DC,_context:i},i.Consumer=i};ot.createElement=GS;ot.createFactory=function(i){var t=GS.bind(null,i);return t.type=i,t};ot.createRef=function(){return{current:null}};ot.forwardRef=function(i){return{$$typeof:LC,render:i}};ot.isValidElement=N0;ot.lazy=function(i){return{$$typeof:OC,_payload:{_status:-1,_result:i},_init:UC}};ot.memo=function(i,t){return{$$typeof:FC,type:i,compare:t===void 0?null:t}};ot.startTransition=function(i){var t=up.transition;up.transition={};try{i()}finally{up.transition=t}};ot.unstable_act=KS;ot.useCallback=function(i,t){return rn.current.useCallback(i,t)};ot.useContext=function(i){return rn.current.useContext(i)};ot.useDebugValue=function(){};ot.useDeferredValue=function(i){return rn.current.useDeferredValue(i)};ot.useEffect=function(i,t){return rn.current.useEffect(i,t)};ot.useId=function(){return rn.current.useId()};ot.useImperativeHandle=function(i,t,e){return rn.current.useImperativeHandle(i,t,e)};ot.useInsertionEffect=function(i,t){return rn.current.useInsertionEffect(i,t)};ot.useLayoutEffect=function(i,t){return rn.current.useLayoutEffect(i,t)};ot.useMemo=function(i,t){return rn.current.useMemo(i,t)};ot.useReducer=function(i,t,e){return rn.current.useReducer(i,t,e)};ot.useRef=function(i){return rn.current.useRef(i)};ot.useState=function(i){return rn.current.useState(i)};ot.useSyncExternalStore=function(i,t,e){return rn.current.useSyncExternalStore(i,t,e)};ot.useTransition=function(){return rn.current.useTransition()};ot.version="18.3.1";BS.exports=ot;var nt=BS.exports;const vh=OS(nt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HC=nt,jC=Symbol.for("react.element"),WC=Symbol.for("react.fragment"),GC=Object.prototype.hasOwnProperty,KC=HC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,XC={key:!0,ref:!0,__self:!0,__source:!0};function XS(i,t,e){var n,s={},r=null,o=null;e!==void 0&&(r=""+e),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)GC.call(t,n)&&!XC.hasOwnProperty(n)&&(s[n]=t[n]);if(i&&i.defaultProps)for(n in t=i.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:jC,type:i,key:r,ref:o,props:s,_owner:KC.current}}Zg.Fragment=WC;Zg.jsx=XS;Zg.jsxs=XS;zS.exports=Zg;var I=zS.exports,YS={exports:{}},Kn={},QS={exports:{}},JS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function t(L,V){var G=L.length;L.push(V);t:for(;0<G;){var ct=G-1>>>1,J=L[ct];if(0<s(J,V))L[ct]=V,L[G]=J,G=ct;else break t}}function e(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var V=L[0],G=L.pop();if(G!==V){L[0]=G;t:for(var ct=0,J=L.length,ht=J>>>1;ct<ht;){var Se=2*(ct+1)-1,je=L[Se],ee=Se+1,Et=L[ee];if(0>s(je,G))ee<J&&0>s(Et,je)?(L[ct]=Et,L[ee]=G,ct=ee):(L[ct]=je,L[Se]=G,ct=Se);else if(ee<J&&0>s(Et,G))L[ct]=Et,L[ee]=G,ct=ee;else break t}}return V}function s(L,V){var G=L.sortIndex-V.sortIndex;return G!==0?G:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;i.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();i.unstable_now=function(){return o.now()-l}}var c=[],h=[],u=1,d=null,f=3,g=!1,v=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(L){for(var V=e(h);V!==null;){if(V.callback===null)n(h);else if(V.startTime<=L)n(h),V.sortIndex=V.expirationTime,t(c,V);else break;V=e(h)}}function x(L){if(A=!1,w(L),!v)if(e(c)!==null)v=!0,B(C);else{var V=e(h);V!==null&&z(x,V.startTime-L)}}function C(L,V){v=!1,A&&(A=!1,m(P),P=-1),g=!0;var G=f;try{for(w(V),d=e(c);d!==null&&(!(d.expirationTime>V)||L&&!D());){var ct=d.callback;if(typeof ct=="function"){d.callback=null,f=d.priorityLevel;var J=ct(d.expirationTime<=V);V=i.unstable_now(),typeof J=="function"?d.callback=J:d===e(c)&&n(c),w(V)}else n(c);d=e(c)}if(d!==null)var ht=!0;else{var Se=e(h);Se!==null&&z(x,Se.startTime-V),ht=!1}return ht}finally{d=null,f=G,g=!1}}var T=!1,k=null,P=-1,_=5,R=-1;function D(){return!(i.unstable_now()-R<_)}function F(){if(k!==null){var L=i.unstable_now();R=L;var V=!0;try{V=k(!0,L)}finally{V?X():(T=!1,k=null)}}else T=!1}var X;if(typeof y=="function")X=function(){y(F)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,tt=Q.port2;Q.port1.onmessage=F,X=function(){tt.postMessage(null)}}else X=function(){E(F,0)};function B(L){k=L,T||(T=!0,X())}function z(L,V){P=E(function(){L(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(L){L.callback=null},i.unstable_continueExecution=function(){v||g||(v=!0,B(C))},i.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<L?Math.floor(1e3/L):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return e(c)},i.unstable_next=function(L){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var G=f;f=V;try{return L()}finally{f=G}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var G=f;f=L;try{return V()}finally{f=G}},i.unstable_scheduleCallback=function(L,V,G){var ct=i.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?ct+G:ct):G=ct,L){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=G+J,L={id:u++,callback:V,priorityLevel:L,startTime:G,expirationTime:J,sortIndex:-1},G>ct?(L.sortIndex=G,t(h,L),e(c)===null&&L===e(h)&&(A?(m(P),P=-1):A=!0,z(x,G-ct))):(L.sortIndex=J,t(c,L),v||g||(v=!0,B(C))),L},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(L){var V=f;return function(){var G=f;f=V;try{return L.apply(this,arguments)}finally{f=G}}}})(JS);QS.exports=JS;var YC=QS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QC=nt,Gn=YC;function N(i){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+i,e=1;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+i+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ZS=new Set,xu={};function vl(i,t){wh(i,t),wh(i+"Capture",t)}function wh(i,t){for(xu[i]=t,i=0;i<t.length;i++)ZS.add(t[i])}var pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yy=Object.prototype.hasOwnProperty,JC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qw={},Jw={};function ZC(i){return yy.call(Jw,i)?!0:yy.call(Qw,i)?!1:JC.test(i)?Jw[i]=!0:(Qw[i]=!0,!1)}function $C(i,t,e,n){if(e!==null&&e.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:e!==null?!e.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function tT(i,t,e,n){if(t===null||typeof t>"u"||$C(i,t,e,n))return!0;if(n)return!1;if(e!==null)switch(e.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function on(i,t,e,n,s,r,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=e,this.propertyName=i,this.type=t,this.sanitizeURL=r,this.removeEmptyString=o}var Le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){Le[i]=new on(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var t=i[0];Le[t]=new on(t,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){Le[i]=new on(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){Le[i]=new on(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){Le[i]=new on(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){Le[i]=new on(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){Le[i]=new on(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){Le[i]=new on(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){Le[i]=new on(i,5,!1,i.toLowerCase(),null,!1,!1)});var L0=/[\-:]([a-z])/g;function I0(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var t=i.replace(L0,I0);Le[t]=new on(t,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var t=i.replace(L0,I0);Le[t]=new on(t,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var t=i.replace(L0,I0);Le[t]=new on(t,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){Le[i]=new on(i,1,!1,i.toLowerCase(),null,!1,!1)});Le.xlinkHref=new on("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){Le[i]=new on(i,1,!1,i.toLowerCase(),null,!0,!0)});function F0(i,t,e,n){var s=Le.hasOwnProperty(t)?Le[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tT(t,e,s,n)&&(e=null),n||s===null?ZC(t)&&(e===null?i.removeAttribute(t):i.setAttribute(t,""+e)):s.mustUseProperty?i[s.propertyName]=e===null?s.type===3?!1:"":e:(t=s.attributeName,n=s.attributeNamespace,e===null?i.removeAttribute(t):(s=s.type,e=s===3||s===4&&e===!0?"":""+e,n?i.setAttributeNS(n,t,e):i.setAttribute(t,e))))}var Sr=QC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lf=Symbol.for("react.element"),Ll=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),O0=Symbol.for("react.strict_mode"),vy=Symbol.for("react.profiler"),$S=Symbol.for("react.provider"),tA=Symbol.for("react.context"),z0=Symbol.for("react.forward_ref"),wy=Symbol.for("react.suspense"),Sy=Symbol.for("react.suspense_list"),B0=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),eA=Symbol.for("react.offscreen"),Zw=Symbol.iterator;function Rh(i){return i===null||typeof i!="object"?null:(i=Zw&&i[Zw]||i["@@iterator"],typeof i=="function"?i:null)}var Vt=Object.assign,_m;function Hh(i){if(_m===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);_m=t&&t[1]||""}return`
`+_m+i}var Mm=!1;function Dm(i,t){if(!i||Mm)return"";Mm=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(i,[],t)}else{try{t.call()}catch(h){n=h}i.call(t.prototype)}else{try{throw Error()}catch(h){n=h}i()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var s=h.stack.split(`
`),r=n.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return i.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",i.displayName)),c}while(1<=o&&0<=l);break}}}finally{Mm=!1,Error.prepareStackTrace=e}return(i=i?i.displayName||i.name:"")?Hh(i):""}function eT(i){switch(i.tag){case 5:return Hh(i.type);case 16:return Hh("Lazy");case 13:return Hh("Suspense");case 19:return Hh("SuspenseList");case 0:case 2:case 15:return i=Dm(i.type,!1),i;case 11:return i=Dm(i.type.render,!1),i;case 1:return i=Dm(i.type,!0),i;default:return""}}function Ay(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Il:return"Fragment";case Ll:return"Portal";case vy:return"Profiler";case O0:return"StrictMode";case wy:return"Suspense";case Sy:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case tA:return(i.displayName||"Context")+".Consumer";case $S:return(i._context.displayName||"Context")+".Provider";case z0:var t=i.render;return i=i.displayName,i||(i=t.displayName||t.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B0:return t=i.displayName||null,t!==null?t:Ay(i.type)||"Memo";case Cr:t=i._payload,i=i._init;try{return Ay(i(t))}catch{}}return null}function nT(i){var t=i.type;switch(i.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=t.render,i=i.displayName||i.name||"",t.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ay(t);case 8:return t===O0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Lo(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function nA(i){var t=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function iT(i){var t=nA(i)?"checked":"value",e=Object.getOwnPropertyDescriptor(i.constructor.prototype,t),n=""+i[t];if(!i.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,r=e.set;return Object.defineProperty(i,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(i,t,{enumerable:e.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){i._valueTracker=null,delete i[t]}}}}function If(i){i._valueTracker||(i._valueTracker=iT(i))}function iA(i){if(!i)return!1;var t=i._valueTracker;if(!t)return!0;var e=t.getValue(),n="";return i&&(n=nA(i)?i.checked?"true":"false":i.value),i=n,i!==e?(t.setValue(i),!0):!1}function Zp(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function by(i,t){var e=t.checked;return Vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e??i._wrapperState.initialChecked})}function $w(i,t){var e=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;e=Lo(t.value!=null?t.value:e),i._wrapperState={initialChecked:n,initialValue:e,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sA(i,t){t=t.checked,t!=null&&F0(i,"checked",t,!1)}function xy(i,t){sA(i,t);var e=Lo(t.value),n=t.type;if(e!=null)n==="number"?(e===0&&i.value===""||i.value!=e)&&(i.value=""+e):i.value!==""+e&&(i.value=""+e);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}t.hasOwnProperty("value")?Ey(i,t.type,e):t.hasOwnProperty("defaultValue")&&Ey(i,t.type,Lo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(i.defaultChecked=!!t.defaultChecked)}function t1(i,t,e){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+i._wrapperState.initialValue,e||t===i.value||(i.value=t),i.defaultValue=t}e=i.name,e!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,e!==""&&(i.name=e)}function Ey(i,t,e){(t!=="number"||Zp(i.ownerDocument)!==i)&&(e==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+e&&(i.defaultValue=""+e))}var jh=Array.isArray;function Ql(i,t,e,n){if(i=i.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<i.length;e++)s=t.hasOwnProperty("$"+i[e].value),i[e].selected!==s&&(i[e].selected=s),s&&n&&(i[e].defaultSelected=!0)}else{for(e=""+Lo(e),t=null,s=0;s<i.length;s++){if(i[s].value===e){i[s].selected=!0,n&&(i[s].defaultSelected=!0);return}t!==null||i[s].disabled||(t=i[s])}t!==null&&(t.selected=!0)}}function Cy(i,t){if(t.dangerouslySetInnerHTML!=null)throw Error(N(91));return Vt({},t,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function e1(i,t){var e=t.value;if(e==null){if(e=t.children,t=t.defaultValue,e!=null){if(t!=null)throw Error(N(92));if(jh(e)){if(1<e.length)throw Error(N(93));e=e[0]}t=e}t==null&&(t=""),e=t}i._wrapperState={initialValue:Lo(e)}}function rA(i,t){var e=Lo(t.value),n=Lo(t.defaultValue);e!=null&&(e=""+e,e!==i.value&&(i.value=e),t.defaultValue==null&&i.defaultValue!==e&&(i.defaultValue=e)),n!=null&&(i.defaultValue=""+n)}function n1(i){var t=i.textContent;t===i._wrapperState.initialValue&&t!==""&&t!==null&&(i.value=t)}function oA(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ty(i,t){return i==null||i==="http://www.w3.org/1999/xhtml"?oA(t):i==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ff,aA=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,e,n,s){MSApp.execUnsafeLocalFunction(function(){return i(t,e,n,s)})}:i}(function(i,t){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=t;else{for(Ff=Ff||document.createElement("div"),Ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ff.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;t.firstChild;)i.appendChild(t.firstChild)}});function Eu(i,t){if(t){var e=i.firstChild;if(e&&e===i.lastChild&&e.nodeType===3){e.nodeValue=t;return}}i.textContent=t}var fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sT=["Webkit","ms","Moz","O"];Object.keys(fu).forEach(function(i){sT.forEach(function(t){t=t+i.charAt(0).toUpperCase()+i.substring(1),fu[t]=fu[i]})});function lA(i,t,e){return t==null||typeof t=="boolean"||t===""?"":e||typeof t!="number"||t===0||fu.hasOwnProperty(i)&&fu[i]?(""+t).trim():t+"px"}function cA(i,t){i=i.style;for(var e in t)if(t.hasOwnProperty(e)){var n=e.indexOf("--")===0,s=lA(e,t[e],n);e==="float"&&(e="cssFloat"),n?i.setProperty(e,s):i[e]=s}}var rT=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ky(i,t){if(t){if(rT[i]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(N(137,i));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(N(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(N(61))}if(t.style!=null&&typeof t.style!="object")throw Error(N(62))}}function Py(i,t){if(i.indexOf("-")===-1)return typeof t.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ry=null;function V0(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _y=null,Jl=null,Zl=null;function i1(i){if(i=Ef(i)){if(typeof _y!="function")throw Error(N(280));var t=i.stateNode;t&&(t=im(t),_y(i.stateNode,i.type,t))}}function hA(i){Jl?Zl?Zl.push(i):Zl=[i]:Jl=i}function uA(){if(Jl){var i=Jl,t=Zl;if(Zl=Jl=null,i1(i),t)for(i=0;i<t.length;i++)i1(t[i])}}function dA(i,t){return i(t)}function fA(){}var Nm=!1;function pA(i,t,e){if(Nm)return i(t,e);Nm=!0;try{return dA(i,t,e)}finally{Nm=!1,(Jl!==null||Zl!==null)&&(fA(),uA())}}function Cu(i,t){var e=i.stateNode;if(e===null)return null;var n=im(e);if(n===null)return null;e=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break t;default:i=!1}if(i)return null;if(e&&typeof e!="function")throw Error(N(231,t,typeof e));return e}var My=!1;if(pr)try{var _h={};Object.defineProperty(_h,"passive",{get:function(){My=!0}}),window.addEventListener("test",_h,_h),window.removeEventListener("test",_h,_h)}catch{My=!1}function oT(i,t,e,n,s,r,o,l,c){var h=Array.prototype.slice.call(arguments,3);try{t.apply(e,h)}catch(u){this.onError(u)}}var pu=!1,$p=null,tg=!1,Dy=null,aT={onError:function(i){pu=!0,$p=i}};function lT(i,t,e,n,s,r,o,l,c){pu=!1,$p=null,oT.apply(aT,arguments)}function cT(i,t,e,n,s,r,o,l,c){if(lT.apply(this,arguments),pu){if(pu){var h=$p;pu=!1,$p=null}else throw Error(N(198));tg||(tg=!0,Dy=h)}}function wl(i){var t=i,e=i;if(i.alternate)for(;t.return;)t=t.return;else{i=t;do t=i,t.flags&4098&&(e=t.return),i=t.return;while(i)}return t.tag===3?e:null}function gA(i){if(i.tag===13){var t=i.memoizedState;if(t===null&&(i=i.alternate,i!==null&&(t=i.memoizedState)),t!==null)return t.dehydrated}return null}function s1(i){if(wl(i)!==i)throw Error(N(188))}function hT(i){var t=i.alternate;if(!t){if(t=wl(i),t===null)throw Error(N(188));return t!==i?null:i}for(var e=i,n=t;;){var s=e.return;if(s===null)break;var r=s.alternate;if(r===null){if(n=s.return,n!==null){e=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===e)return s1(s),i;if(r===n)return s1(s),t;r=r.sibling}throw Error(N(188))}if(e.return!==n.return)e=s,n=r;else{for(var o=!1,l=s.child;l;){if(l===e){o=!0,e=s,n=r;break}if(l===n){o=!0,n=s,e=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===e){o=!0,e=r,n=s;break}if(l===n){o=!0,n=r,e=s;break}l=l.sibling}if(!o)throw Error(N(189))}}if(e.alternate!==n)throw Error(N(190))}if(e.tag!==3)throw Error(N(188));return e.stateNode.current===e?i:t}function mA(i){return i=hT(i),i!==null?yA(i):null}function yA(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var t=yA(i);if(t!==null)return t;i=i.sibling}return null}var vA=Gn.unstable_scheduleCallback,r1=Gn.unstable_cancelCallback,uT=Gn.unstable_shouldYield,dT=Gn.unstable_requestPaint,Gt=Gn.unstable_now,fT=Gn.unstable_getCurrentPriorityLevel,U0=Gn.unstable_ImmediatePriority,wA=Gn.unstable_UserBlockingPriority,eg=Gn.unstable_NormalPriority,pT=Gn.unstable_LowPriority,SA=Gn.unstable_IdlePriority,$g=null,us=null;function gT(i){if(us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot($g,i,void 0,(i.current.flags&128)===128)}catch{}}var Di=Math.clz32?Math.clz32:vT,mT=Math.log,yT=Math.LN2;function vT(i){return i>>>=0,i===0?32:31-(mT(i)/yT|0)|0}var Of=64,zf=4194304;function Wh(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function ng(i,t){var e=i.pendingLanes;if(e===0)return 0;var n=0,s=i.suspendedLanes,r=i.pingedLanes,o=e&268435455;if(o!==0){var l=o&~s;l!==0?n=Wh(l):(r&=o,r!==0&&(n=Wh(r)))}else o=e&~s,o!==0?n=Wh(o):r!==0&&(n=Wh(r));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,r=t&-t,s>=r||s===16&&(r&4194240)!==0))return t;if(n&4&&(n|=e&16),t=i.entangledLanes,t!==0)for(i=i.entanglements,t&=n;0<t;)e=31-Di(t),s=1<<e,n|=i[e],t&=~s;return n}function wT(i,t){switch(i){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ST(i,t){for(var e=i.suspendedLanes,n=i.pingedLanes,s=i.expirationTimes,r=i.pendingLanes;0<r;){var o=31-Di(r),l=1<<o,c=s[o];c===-1?(!(l&e)||l&n)&&(s[o]=wT(l,t)):c<=t&&(i.expiredLanes|=l),r&=~l}}function Ny(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function AA(){var i=Of;return Of<<=1,!(Of&4194240)&&(Of=64),i}function Lm(i){for(var t=[],e=0;31>e;e++)t.push(i);return t}function bf(i,t,e){i.pendingLanes|=t,t!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,t=31-Di(t),i[t]=e}function AT(i,t){var e=i.pendingLanes&~t;i.pendingLanes=t,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=t,i.mutableReadLanes&=t,i.entangledLanes&=t,t=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<e;){var s=31-Di(e),r=1<<s;t[s]=0,n[s]=-1,i[s]=-1,e&=~r}}function q0(i,t){var e=i.entangledLanes|=t;for(i=i.entanglements;e;){var n=31-Di(e),s=1<<n;s&t|i[n]&t&&(i[n]|=t),e&=~s}}var wt=0;function bA(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var xA,H0,EA,CA,TA,Ly=!1,Bf=[],Co=null,To=null,ko=null,Tu=new Map,ku=new Map,kr=[],bT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function o1(i,t){switch(i){case"focusin":case"focusout":Co=null;break;case"dragenter":case"dragleave":To=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Tu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ku.delete(t.pointerId)}}function Mh(i,t,e,n,s,r){return i===null||i.nativeEvent!==r?(i={blockedOn:t,domEventName:e,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},t!==null&&(t=Ef(t),t!==null&&H0(t)),i):(i.eventSystemFlags|=n,t=i.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),i)}function xT(i,t,e,n,s){switch(t){case"focusin":return Co=Mh(Co,i,t,e,n,s),!0;case"dragenter":return To=Mh(To,i,t,e,n,s),!0;case"mouseover":return ko=Mh(ko,i,t,e,n,s),!0;case"pointerover":var r=s.pointerId;return Tu.set(r,Mh(Tu.get(r)||null,i,t,e,n,s)),!0;case"gotpointercapture":return r=s.pointerId,ku.set(r,Mh(ku.get(r)||null,i,t,e,n,s)),!0}return!1}function kA(i){var t=$o(i.target);if(t!==null){var e=wl(t);if(e!==null){if(t=e.tag,t===13){if(t=gA(e),t!==null){i.blockedOn=t,TA(i.priority,function(){EA(e)});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){i.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}i.blockedOn=null}function dp(i){if(i.blockedOn!==null)return!1;for(var t=i.targetContainers;0<t.length;){var e=Iy(i.domEventName,i.eventSystemFlags,t[0],i.nativeEvent);if(e===null){e=i.nativeEvent;var n=new e.constructor(e.type,e);Ry=n,e.target.dispatchEvent(n),Ry=null}else return t=Ef(e),t!==null&&H0(t),i.blockedOn=e,!1;t.shift()}return!0}function a1(i,t,e){dp(i)&&e.delete(t)}function ET(){Ly=!1,Co!==null&&dp(Co)&&(Co=null),To!==null&&dp(To)&&(To=null),ko!==null&&dp(ko)&&(ko=null),Tu.forEach(a1),ku.forEach(a1)}function Dh(i,t){i.blockedOn===t&&(i.blockedOn=null,Ly||(Ly=!0,Gn.unstable_scheduleCallback(Gn.unstable_NormalPriority,ET)))}function Pu(i){function t(s){return Dh(s,i)}if(0<Bf.length){Dh(Bf[0],i);for(var e=1;e<Bf.length;e++){var n=Bf[e];n.blockedOn===i&&(n.blockedOn=null)}}for(Co!==null&&Dh(Co,i),To!==null&&Dh(To,i),ko!==null&&Dh(ko,i),Tu.forEach(t),ku.forEach(t),e=0;e<kr.length;e++)n=kr[e],n.blockedOn===i&&(n.blockedOn=null);for(;0<kr.length&&(e=kr[0],e.blockedOn===null);)kA(e),e.blockedOn===null&&kr.shift()}var $l=Sr.ReactCurrentBatchConfig,ig=!0;function CT(i,t,e,n){var s=wt,r=$l.transition;$l.transition=null;try{wt=1,j0(i,t,e,n)}finally{wt=s,$l.transition=r}}function TT(i,t,e,n){var s=wt,r=$l.transition;$l.transition=null;try{wt=4,j0(i,t,e,n)}finally{wt=s,$l.transition=r}}function j0(i,t,e,n){if(ig){var s=Iy(i,t,e,n);if(s===null)jm(i,t,n,sg,e),o1(i,n);else if(xT(s,i,t,e,n))n.stopPropagation();else if(o1(i,n),t&4&&-1<bT.indexOf(i)){for(;s!==null;){var r=Ef(s);if(r!==null&&xA(r),r=Iy(i,t,e,n),r===null&&jm(i,t,n,sg,e),r===s)break;s=r}s!==null&&n.stopPropagation()}else jm(i,t,n,null,e)}}var sg=null;function Iy(i,t,e,n){if(sg=null,i=V0(n),i=$o(i),i!==null)if(t=wl(i),t===null)i=null;else if(e=t.tag,e===13){if(i=gA(t),i!==null)return i;i=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;i=null}else t!==i&&(i=null);return sg=i,null}function PA(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fT()){case U0:return 1;case wA:return 4;case eg:case pT:return 16;case SA:return 536870912;default:return 16}default:return 16}}var xo=null,W0=null,fp=null;function RA(){if(fp)return fp;var i,t=W0,e=t.length,n,s="value"in xo?xo.value:xo.textContent,r=s.length;for(i=0;i<e&&t[i]===s[i];i++);var o=e-i;for(n=1;n<=o&&t[e-n]===s[r-n];n++);return fp=s.slice(i,1<n?1-n:void 0)}function pp(i){var t=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&t===13&&(i=13)):i=t,i===10&&(i=13),32<=i||i===13?i:0}function Vf(){return!0}function l1(){return!1}function Xn(i){function t(e,n,s,r,o){this._reactName=e,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in i)i.hasOwnProperty(l)&&(e=i[l],this[l]=e?e(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Vf:l1,this.isPropagationStopped=l1,this}return Vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Vf)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Vf)},persist:function(){},isPersistent:Vf}),t}var kh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G0=Xn(kh),xf=Vt({},kh,{view:0,detail:0}),kT=Xn(xf),Im,Fm,Nh,tm=Vt({},xf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:K0,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Nh&&(Nh&&i.type==="mousemove"?(Im=i.screenX-Nh.screenX,Fm=i.screenY-Nh.screenY):Fm=Im=0,Nh=i),Im)},movementY:function(i){return"movementY"in i?i.movementY:Fm}}),c1=Xn(tm),PT=Vt({},tm,{dataTransfer:0}),RT=Xn(PT),_T=Vt({},xf,{relatedTarget:0}),Om=Xn(_T),MT=Vt({},kh,{animationName:0,elapsedTime:0,pseudoElement:0}),DT=Xn(MT),NT=Vt({},kh,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),LT=Xn(NT),IT=Vt({},kh,{data:0}),h1=Xn(IT),FT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function BT(i){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(i):(i=zT[i])?!!t[i]:!1}function K0(){return BT}var VT=Vt({},xf,{key:function(i){if(i.key){var t=FT[i.key]||i.key;if(t!=="Unidentified")return t}return i.type==="keypress"?(i=pp(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?OT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:K0,charCode:function(i){return i.type==="keypress"?pp(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?pp(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),UT=Xn(VT),qT=Vt({},tm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),u1=Xn(qT),HT=Vt({},xf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:K0}),jT=Xn(HT),WT=Vt({},kh,{propertyName:0,elapsedTime:0,pseudoElement:0}),GT=Xn(WT),KT=Vt({},tm,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),XT=Xn(KT),YT=[9,13,27,32],X0=pr&&"CompositionEvent"in window,gu=null;pr&&"documentMode"in document&&(gu=document.documentMode);var QT=pr&&"TextEvent"in window&&!gu,_A=pr&&(!X0||gu&&8<gu&&11>=gu),d1=" ",f1=!1;function MA(i,t){switch(i){case"keyup":return YT.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DA(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fl=!1;function JT(i,t){switch(i){case"compositionend":return DA(t);case"keypress":return t.which!==32?null:(f1=!0,d1);case"textInput":return i=t.data,i===d1&&f1?null:i;default:return null}}function ZT(i,t){if(Fl)return i==="compositionend"||!X0&&MA(i,t)?(i=RA(),fp=W0=xo=null,Fl=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _A&&t.locale!=="ko"?null:t.data;default:return null}}var $T={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p1(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t==="input"?!!$T[i.type]:t==="textarea"}function NA(i,t,e,n){hA(n),t=rg(t,"onChange"),0<t.length&&(e=new G0("onChange","change",null,e,n),i.push({event:e,listeners:t}))}var mu=null,Ru=null;function tk(i){jA(i,0)}function em(i){var t=Bl(i);if(iA(t))return i}function ek(i,t){if(i==="change")return t}var LA=!1;if(pr){var zm;if(pr){var Bm="oninput"in document;if(!Bm){var g1=document.createElement("div");g1.setAttribute("oninput","return;"),Bm=typeof g1.oninput=="function"}zm=Bm}else zm=!1;LA=zm&&(!document.documentMode||9<document.documentMode)}function m1(){mu&&(mu.detachEvent("onpropertychange",IA),Ru=mu=null)}function IA(i){if(i.propertyName==="value"&&em(Ru)){var t=[];NA(t,Ru,i,V0(i)),pA(tk,t)}}function nk(i,t,e){i==="focusin"?(m1(),mu=t,Ru=e,mu.attachEvent("onpropertychange",IA)):i==="focusout"&&m1()}function ik(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return em(Ru)}function sk(i,t){if(i==="click")return em(t)}function rk(i,t){if(i==="input"||i==="change")return em(t)}function ok(i,t){return i===t&&(i!==0||1/i===1/t)||i!==i&&t!==t}var Li=typeof Object.is=="function"?Object.is:ok;function _u(i,t){if(Li(i,t))return!0;if(typeof i!="object"||i===null||typeof t!="object"||t===null)return!1;var e=Object.keys(i),n=Object.keys(t);if(e.length!==n.length)return!1;for(n=0;n<e.length;n++){var s=e[n];if(!yy.call(t,s)||!Li(i[s],t[s]))return!1}return!0}function y1(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function v1(i,t){var e=y1(i);i=0;for(var n;e;){if(e.nodeType===3){if(n=i+e.textContent.length,i<=t&&n>=t)return{node:e,offset:t-i};i=n}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=y1(e)}}function FA(i,t){return i&&t?i===t?!0:i&&i.nodeType===3?!1:t&&t.nodeType===3?FA(i,t.parentNode):"contains"in i?i.contains(t):i.compareDocumentPosition?!!(i.compareDocumentPosition(t)&16):!1:!1}function OA(){for(var i=window,t=Zp();t instanceof i.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)i=t.contentWindow;else break;t=Zp(i.document)}return t}function Y0(i){var t=i&&i.nodeName&&i.nodeName.toLowerCase();return t&&(t==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||t==="textarea"||i.contentEditable==="true")}function ak(i){var t=OA(),e=i.focusedElem,n=i.selectionRange;if(t!==e&&e&&e.ownerDocument&&FA(e.ownerDocument.documentElement,e)){if(n!==null&&Y0(e)){if(t=n.start,i=n.end,i===void 0&&(i=t),"selectionStart"in e)e.selectionStart=t,e.selectionEnd=Math.min(i,e.value.length);else if(i=(t=e.ownerDocument||document)&&t.defaultView||window,i.getSelection){i=i.getSelection();var s=e.textContent.length,r=Math.min(n.start,s);n=n.end===void 0?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=v1(e,r);var o=v1(e,n);s&&o&&(i.rangeCount!==1||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(t),i.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),i.addRange(t)))}}for(t=[],i=e;i=i.parentNode;)i.nodeType===1&&t.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof e.focus=="function"&&e.focus(),e=0;e<t.length;e++)i=t[e],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var lk=pr&&"documentMode"in document&&11>=document.documentMode,Ol=null,Fy=null,yu=null,Oy=!1;function w1(i,t,e){var n=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;Oy||Ol==null||Ol!==Zp(n)||(n=Ol,"selectionStart"in n&&Y0(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),yu&&_u(yu,n)||(yu=n,n=rg(Fy,"onSelect"),0<n.length&&(t=new G0("onSelect","select",null,t,e),i.push({event:t,listeners:n}),t.target=Ol)))}function Uf(i,t){var e={};return e[i.toLowerCase()]=t.toLowerCase(),e["Webkit"+i]="webkit"+t,e["Moz"+i]="moz"+t,e}var zl={animationend:Uf("Animation","AnimationEnd"),animationiteration:Uf("Animation","AnimationIteration"),animationstart:Uf("Animation","AnimationStart"),transitionend:Uf("Transition","TransitionEnd")},Vm={},zA={};pr&&(zA=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function nm(i){if(Vm[i])return Vm[i];if(!zl[i])return i;var t=zl[i],e;for(e in t)if(t.hasOwnProperty(e)&&e in zA)return Vm[i]=t[e];return i}var BA=nm("animationend"),VA=nm("animationiteration"),UA=nm("animationstart"),qA=nm("transitionend"),HA=new Map,S1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(i,t){HA.set(i,t),vl(t,[i])}for(var Um=0;Um<S1.length;Um++){var qm=S1[Um],ck=qm.toLowerCase(),hk=qm[0].toUpperCase()+qm.slice(1);Vo(ck,"on"+hk)}Vo(BA,"onAnimationEnd");Vo(VA,"onAnimationIteration");Vo(UA,"onAnimationStart");Vo("dblclick","onDoubleClick");Vo("focusin","onFocus");Vo("focusout","onBlur");Vo(qA,"onTransitionEnd");wh("onMouseEnter",["mouseout","mouseover"]);wh("onMouseLeave",["mouseout","mouseover"]);wh("onPointerEnter",["pointerout","pointerover"]);wh("onPointerLeave",["pointerout","pointerover"]);vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gh));function A1(i,t,e){var n=i.type||"unknown-event";i.currentTarget=e,cT(n,t,void 0,i),i.currentTarget=null}function jA(i,t){t=(t&4)!==0;for(var e=0;e<i.length;e++){var n=i[e],s=n.event;n=n.listeners;t:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break t;A1(s,l,h),r=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,h=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break t;A1(s,l,h),r=c}}}if(tg)throw i=Dy,tg=!1,Dy=null,i}function kt(i,t){var e=t[qy];e===void 0&&(e=t[qy]=new Set);var n=i+"__bubble";e.has(n)||(WA(t,i,2,!1),e.add(n))}function Hm(i,t,e){var n=0;t&&(n|=4),WA(e,i,n,t)}var qf="_reactListening"+Math.random().toString(36).slice(2);function Mu(i){if(!i[qf]){i[qf]=!0,ZS.forEach(function(e){e!=="selectionchange"&&(uk.has(e)||Hm(e,!1,i),Hm(e,!0,i))});var t=i.nodeType===9?i:i.ownerDocument;t===null||t[qf]||(t[qf]=!0,Hm("selectionchange",!1,t))}}function WA(i,t,e,n){switch(PA(t)){case 1:var s=CT;break;case 4:s=TT;break;default:s=j0}e=s.bind(null,t,e,i),s=void 0,!My||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?i.addEventListener(t,e,{capture:!0,passive:s}):i.addEventListener(t,e,!0):s!==void 0?i.addEventListener(t,e,{passive:s}):i.addEventListener(t,e,!1)}function jm(i,t,e,n,s){var r=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=$o(l),o===null)return;if(c=o.tag,c===5||c===6){n=r=o;continue t}l=l.parentNode}}n=n.return}pA(function(){var h=r,u=V0(e),d=[];t:{var f=HA.get(i);if(f!==void 0){var g=G0,v=i;switch(i){case"keypress":if(pp(e)===0)break t;case"keydown":case"keyup":g=UT;break;case"focusin":v="focus",g=Om;break;case"focusout":v="blur",g=Om;break;case"beforeblur":case"afterblur":g=Om;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=c1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=RT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=jT;break;case BA:case VA:case UA:g=DT;break;case qA:g=GT;break;case"scroll":g=kT;break;case"wheel":g=XT;break;case"copy":case"cut":case"paste":g=LT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=u1}var A=(t&4)!==0,E=!A&&i==="scroll",m=A?f!==null?f+"Capture":null:f;A=[];for(var y=h,w;y!==null;){w=y;var x=w.stateNode;if(w.tag===5&&x!==null&&(w=x,m!==null&&(x=Cu(y,m),x!=null&&A.push(Du(y,x,w)))),E)break;y=y.return}0<A.length&&(f=new g(f,v,null,e,u),d.push({event:f,listeners:A}))}}if(!(t&7)){t:{if(f=i==="mouseover"||i==="pointerover",g=i==="mouseout"||i==="pointerout",f&&e!==Ry&&(v=e.relatedTarget||e.fromElement)&&($o(v)||v[gr]))break t;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(v=e.relatedTarget||e.toElement,g=h,v=v?$o(v):null,v!==null&&(E=wl(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=h),g!==v)){if(A=c1,x="onMouseLeave",m="onMouseEnter",y="mouse",(i==="pointerout"||i==="pointerover")&&(A=u1,x="onPointerLeave",m="onPointerEnter",y="pointer"),E=g==null?f:Bl(g),w=v==null?f:Bl(v),f=new A(x,y+"leave",g,e,u),f.target=E,f.relatedTarget=w,x=null,$o(u)===h&&(A=new A(m,y+"enter",v,e,u),A.target=w,A.relatedTarget=E,x=A),E=x,g&&v)e:{for(A=g,m=v,y=0,w=A;w;w=xl(w))y++;for(w=0,x=m;x;x=xl(x))w++;for(;0<y-w;)A=xl(A),y--;for(;0<w-y;)m=xl(m),w--;for(;y--;){if(A===m||m!==null&&A===m.alternate)break e;A=xl(A),m=xl(m)}A=null}else A=null;g!==null&&b1(d,f,g,A,!1),v!==null&&E!==null&&b1(d,E,v,A,!0)}}t:{if(f=h?Bl(h):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var C=ek;else if(p1(f))if(LA)C=rk;else{C=ik;var T=nk}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=sk);if(C&&(C=C(i,h))){NA(d,C,e,u);break t}T&&T(i,f,h),i==="focusout"&&(T=f._wrapperState)&&T.controlled&&f.type==="number"&&Ey(f,"number",f.value)}switch(T=h?Bl(h):window,i){case"focusin":(p1(T)||T.contentEditable==="true")&&(Ol=T,Fy=h,yu=null);break;case"focusout":yu=Fy=Ol=null;break;case"mousedown":Oy=!0;break;case"contextmenu":case"mouseup":case"dragend":Oy=!1,w1(d,e,u);break;case"selectionchange":if(lk)break;case"keydown":case"keyup":w1(d,e,u)}var k;if(X0)t:{switch(i){case"compositionstart":var P="onCompositionStart";break t;case"compositionend":P="onCompositionEnd";break t;case"compositionupdate":P="onCompositionUpdate";break t}P=void 0}else Fl?MA(i,e)&&(P="onCompositionEnd"):i==="keydown"&&e.keyCode===229&&(P="onCompositionStart");P&&(_A&&e.locale!=="ko"&&(Fl||P!=="onCompositionStart"?P==="onCompositionEnd"&&Fl&&(k=RA()):(xo=u,W0="value"in xo?xo.value:xo.textContent,Fl=!0)),T=rg(h,P),0<T.length&&(P=new h1(P,i,null,e,u),d.push({event:P,listeners:T}),k?P.data=k:(k=DA(e),k!==null&&(P.data=k)))),(k=QT?JT(i,e):ZT(i,e))&&(h=rg(h,"onBeforeInput"),0<h.length&&(u=new h1("onBeforeInput","beforeinput",null,e,u),d.push({event:u,listeners:h}),u.data=k))}jA(d,t)})}function Du(i,t,e){return{instance:i,listener:t,currentTarget:e}}function rg(i,t){for(var e=t+"Capture",n=[];i!==null;){var s=i,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=Cu(i,e),r!=null&&n.unshift(Du(i,r,s)),r=Cu(i,t),r!=null&&n.push(Du(i,r,s))),i=i.return}return n}function xl(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function b1(i,t,e,n,s){for(var r=t._reactName,o=[];e!==null&&e!==n;){var l=e,c=l.alternate,h=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&h!==null&&(l=h,s?(c=Cu(e,r),c!=null&&o.unshift(Du(e,c,l))):s||(c=Cu(e,r),c!=null&&o.push(Du(e,c,l)))),e=e.return}o.length!==0&&i.push({event:t,listeners:o})}var dk=/\r\n?/g,fk=/\u0000|\uFFFD/g;function x1(i){return(typeof i=="string"?i:""+i).replace(dk,`
`).replace(fk,"")}function Hf(i,t,e){if(t=x1(t),x1(i)!==t&&e)throw Error(N(425))}function og(){}var zy=null,By=null;function Vy(i,t){return i==="textarea"||i==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Uy=typeof setTimeout=="function"?setTimeout:void 0,pk=typeof clearTimeout=="function"?clearTimeout:void 0,E1=typeof Promise=="function"?Promise:void 0,gk=typeof queueMicrotask=="function"?queueMicrotask:typeof E1<"u"?function(i){return E1.resolve(null).then(i).catch(mk)}:Uy;function mk(i){setTimeout(function(){throw i})}function Wm(i,t){var e=t,n=0;do{var s=e.nextSibling;if(i.removeChild(e),s&&s.nodeType===8)if(e=s.data,e==="/$"){if(n===0){i.removeChild(s),Pu(t);return}n--}else e!=="$"&&e!=="$?"&&e!=="$!"||n++;e=s}while(e);Pu(t)}function Po(i){for(;i!=null;i=i.nextSibling){var t=i.nodeType;if(t===1||t===3)break;if(t===8){if(t=i.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return i}function C1(i){i=i.previousSibling;for(var t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return i;t--}else e==="/$"&&t++}i=i.previousSibling}return null}var Ph=Math.random().toString(36).slice(2),cs="__reactFiber$"+Ph,Nu="__reactProps$"+Ph,gr="__reactContainer$"+Ph,qy="__reactEvents$"+Ph,yk="__reactListeners$"+Ph,vk="__reactHandles$"+Ph;function $o(i){var t=i[cs];if(t)return t;for(var e=i.parentNode;e;){if(t=e[gr]||e[cs]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(i=C1(i);i!==null;){if(e=i[cs])return e;i=C1(i)}return t}i=e,e=i.parentNode}return null}function Ef(i){return i=i[cs]||i[gr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Bl(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(N(33))}function im(i){return i[Nu]||null}var Hy=[],Vl=-1;function Uo(i){return{current:i}}function Rt(i){0>Vl||(i.current=Hy[Vl],Hy[Vl]=null,Vl--)}function Ct(i,t){Vl++,Hy[Vl]=i.current,i.current=t}var Io={},He=Uo(Io),mn=Uo(!1),cl=Io;function Sh(i,t){var e=i.type.contextTypes;if(!e)return Io;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in e)s[r]=t[r];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=t,i.__reactInternalMemoizedMaskedChildContext=s),s}function yn(i){return i=i.childContextTypes,i!=null}function ag(){Rt(mn),Rt(He)}function T1(i,t,e){if(He.current!==Io)throw Error(N(168));Ct(He,t),Ct(mn,e)}function GA(i,t,e){var n=i.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return e;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(N(108,nT(i)||"Unknown",s));return Vt({},e,n)}function lg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Io,cl=He.current,Ct(He,i),Ct(mn,mn.current),!0}function k1(i,t,e){var n=i.stateNode;if(!n)throw Error(N(169));e?(i=GA(i,t,cl),n.__reactInternalMemoizedMergedChildContext=i,Rt(mn),Rt(He),Ct(He,i)):Rt(mn),Ct(mn,e)}var xs=null,sm=!1,Gm=!1;function KA(i){xs===null?xs=[i]:xs.push(i)}function wk(i){sm=!0,KA(i)}function qo(){if(!Gm&&xs!==null){Gm=!0;var i=0,t=wt;try{var e=xs;for(wt=1;i<e.length;i++){var n=e[i];do n=n(!0);while(n!==null)}xs=null,sm=!1}catch(s){throw xs!==null&&(xs=xs.slice(i+1)),vA(U0,qo),s}finally{wt=t,Gm=!1}}return null}var Ul=[],ql=0,cg=null,hg=0,oi=[],ai=0,hl=null,cr=1,hr="";function Wo(i,t){Ul[ql++]=hg,Ul[ql++]=cg,cg=i,hg=t}function XA(i,t,e){oi[ai++]=cr,oi[ai++]=hr,oi[ai++]=hl,hl=i;var n=cr;i=hr;var s=32-Di(n)-1;n&=~(1<<s),e+=1;var r=32-Di(t)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,cr=1<<32-Di(t)+s|e<<s|n,hr=r+i}else cr=1<<r|e<<s|n,hr=i}function Q0(i){i.return!==null&&(Wo(i,1),XA(i,1,0))}function J0(i){for(;i===cg;)cg=Ul[--ql],Ul[ql]=null,hg=Ul[--ql],Ul[ql]=null;for(;i===hl;)hl=oi[--ai],oi[ai]=null,hr=oi[--ai],oi[ai]=null,cr=oi[--ai],oi[ai]=null}var Hn=null,qn=null,Lt=!1,_i=null;function YA(i,t){var e=ci(5,null,null,0);e.elementType="DELETED",e.stateNode=t,e.return=i,t=i.deletions,t===null?(i.deletions=[e],i.flags|=16):t.push(e)}function P1(i,t){switch(i.tag){case 5:var e=i.type;return t=t.nodeType!==1||e.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(i.stateNode=t,Hn=i,qn=Po(t.firstChild),!0):!1;case 6:return t=i.pendingProps===""||t.nodeType!==3?null:t,t!==null?(i.stateNode=t,Hn=i,qn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(e=hl!==null?{id:cr,overflow:hr}:null,i.memoizedState={dehydrated:t,treeContext:e,retryLane:1073741824},e=ci(18,null,null,0),e.stateNode=t,e.return=i,i.child=e,Hn=i,qn=null,!0):!1;default:return!1}}function jy(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Wy(i){if(Lt){var t=qn;if(t){var e=t;if(!P1(i,t)){if(jy(i))throw Error(N(418));t=Po(e.nextSibling);var n=Hn;t&&P1(i,t)?YA(n,e):(i.flags=i.flags&-4097|2,Lt=!1,Hn=i)}}else{if(jy(i))throw Error(N(418));i.flags=i.flags&-4097|2,Lt=!1,Hn=i}}}function R1(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Hn=i}function jf(i){if(i!==Hn)return!1;if(!Lt)return R1(i),Lt=!0,!1;var t;if((t=i.tag!==3)&&!(t=i.tag!==5)&&(t=i.type,t=t!=="head"&&t!=="body"&&!Vy(i.type,i.memoizedProps)),t&&(t=qn)){if(jy(i))throw QA(),Error(N(418));for(;t;)YA(i,t),t=Po(t.nextSibling)}if(R1(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));t:{for(i=i.nextSibling,t=0;i;){if(i.nodeType===8){var e=i.data;if(e==="/$"){if(t===0){qn=Po(i.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++}i=i.nextSibling}qn=null}}else qn=Hn?Po(i.stateNode.nextSibling):null;return!0}function QA(){for(var i=qn;i;)i=Po(i.nextSibling)}function Ah(){qn=Hn=null,Lt=!1}function Z0(i){_i===null?_i=[i]:_i.push(i)}var Sk=Sr.ReactCurrentBatchConfig;function Lh(i,t,e){if(i=e.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(N(309));var n=e.stateNode}if(!n)throw Error(N(147,i));var s=n,r=""+i;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===r?t.ref:(t=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},t._stringRef=r,t)}if(typeof i!="string")throw Error(N(284));if(!e._owner)throw Error(N(290,i))}return i}function Wf(i,t){throw i=Object.prototype.toString.call(t),Error(N(31,i==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":i))}function _1(i){var t=i._init;return t(i._payload)}function JA(i){function t(m,y){if(i){var w=m.deletions;w===null?(m.deletions=[y],m.flags|=16):w.push(y)}}function e(m,y){if(!i)return null;for(;y!==null;)t(m,y),y=y.sibling;return null}function n(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function s(m,y){return m=Do(m,y),m.index=0,m.sibling=null,m}function r(m,y,w){return m.index=w,i?(w=m.alternate,w!==null?(w=w.index,w<y?(m.flags|=2,y):w):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return i&&m.alternate===null&&(m.flags|=2),m}function l(m,y,w,x){return y===null||y.tag!==6?(y=$m(w,m.mode,x),y.return=m,y):(y=s(y,w),y.return=m,y)}function c(m,y,w,x){var C=w.type;return C===Il?u(m,y,w.props.children,x,w.key):y!==null&&(y.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Cr&&_1(C)===y.type)?(x=s(y,w.props),x.ref=Lh(m,y,w),x.return=m,x):(x=Ap(w.type,w.key,w.props,null,m.mode,x),x.ref=Lh(m,y,w),x.return=m,x)}function h(m,y,w,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=ty(w,m.mode,x),y.return=m,y):(y=s(y,w.children||[]),y.return=m,y)}function u(m,y,w,x,C){return y===null||y.tag!==7?(y=ll(w,m.mode,x,C),y.return=m,y):(y=s(y,w),y.return=m,y)}function d(m,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=$m(""+y,m.mode,w),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Lf:return w=Ap(y.type,y.key,y.props,null,m.mode,w),w.ref=Lh(m,null,y),w.return=m,w;case Ll:return y=ty(y,m.mode,w),y.return=m,y;case Cr:var x=y._init;return d(m,x(y._payload),w)}if(jh(y)||Rh(y))return y=ll(y,m.mode,w,null),y.return=m,y;Wf(m,y)}return null}function f(m,y,w,x){var C=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:l(m,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Lf:return w.key===C?c(m,y,w,x):null;case Ll:return w.key===C?h(m,y,w,x):null;case Cr:return C=w._init,f(m,y,C(w._payload),x)}if(jh(w)||Rh(w))return C!==null?null:u(m,y,w,x,null);Wf(m,w)}return null}function g(m,y,w,x,C){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(w)||null,l(y,m,""+x,C);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lf:return m=m.get(x.key===null?w:x.key)||null,c(y,m,x,C);case Ll:return m=m.get(x.key===null?w:x.key)||null,h(y,m,x,C);case Cr:var T=x._init;return g(m,y,w,T(x._payload),C)}if(jh(x)||Rh(x))return m=m.get(w)||null,u(y,m,x,C,null);Wf(y,x)}return null}function v(m,y,w,x){for(var C=null,T=null,k=y,P=y=0,_=null;k!==null&&P<w.length;P++){k.index>P?(_=k,k=null):_=k.sibling;var R=f(m,k,w[P],x);if(R===null){k===null&&(k=_);break}i&&k&&R.alternate===null&&t(m,k),y=r(R,y,P),T===null?C=R:T.sibling=R,T=R,k=_}if(P===w.length)return e(m,k),Lt&&Wo(m,P),C;if(k===null){for(;P<w.length;P++)k=d(m,w[P],x),k!==null&&(y=r(k,y,P),T===null?C=k:T.sibling=k,T=k);return Lt&&Wo(m,P),C}for(k=n(m,k);P<w.length;P++)_=g(k,m,P,w[P],x),_!==null&&(i&&_.alternate!==null&&k.delete(_.key===null?P:_.key),y=r(_,y,P),T===null?C=_:T.sibling=_,T=_);return i&&k.forEach(function(D){return t(m,D)}),Lt&&Wo(m,P),C}function A(m,y,w,x){var C=Rh(w);if(typeof C!="function")throw Error(N(150));if(w=C.call(w),w==null)throw Error(N(151));for(var T=C=null,k=y,P=y=0,_=null,R=w.next();k!==null&&!R.done;P++,R=w.next()){k.index>P?(_=k,k=null):_=k.sibling;var D=f(m,k,R.value,x);if(D===null){k===null&&(k=_);break}i&&k&&D.alternate===null&&t(m,k),y=r(D,y,P),T===null?C=D:T.sibling=D,T=D,k=_}if(R.done)return e(m,k),Lt&&Wo(m,P),C;if(k===null){for(;!R.done;P++,R=w.next())R=d(m,R.value,x),R!==null&&(y=r(R,y,P),T===null?C=R:T.sibling=R,T=R);return Lt&&Wo(m,P),C}for(k=n(m,k);!R.done;P++,R=w.next())R=g(k,m,P,R.value,x),R!==null&&(i&&R.alternate!==null&&k.delete(R.key===null?P:R.key),y=r(R,y,P),T===null?C=R:T.sibling=R,T=R);return i&&k.forEach(function(F){return t(m,F)}),Lt&&Wo(m,P),C}function E(m,y,w,x){if(typeof w=="object"&&w!==null&&w.type===Il&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Lf:t:{for(var C=w.key,T=y;T!==null;){if(T.key===C){if(C=w.type,C===Il){if(T.tag===7){e(m,T.sibling),y=s(T,w.props.children),y.return=m,m=y;break t}}else if(T.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Cr&&_1(C)===T.type){e(m,T.sibling),y=s(T,w.props),y.ref=Lh(m,T,w),y.return=m,m=y;break t}e(m,T);break}else t(m,T);T=T.sibling}w.type===Il?(y=ll(w.props.children,m.mode,x,w.key),y.return=m,m=y):(x=Ap(w.type,w.key,w.props,null,m.mode,x),x.ref=Lh(m,y,w),x.return=m,m=x)}return o(m);case Ll:t:{for(T=w.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){e(m,y.sibling),y=s(y,w.children||[]),y.return=m,m=y;break t}else{e(m,y);break}else t(m,y);y=y.sibling}y=ty(w,m.mode,x),y.return=m,m=y}return o(m);case Cr:return T=w._init,E(m,y,T(w._payload),x)}if(jh(w))return v(m,y,w,x);if(Rh(w))return A(m,y,w,x);Wf(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(e(m,y.sibling),y=s(y,w),y.return=m,m=y):(e(m,y),y=$m(w,m.mode,x),y.return=m,m=y),o(m)):e(m,y)}return E}var bh=JA(!0),ZA=JA(!1),ug=Uo(null),dg=null,Hl=null,$0=null;function tw(){$0=Hl=dg=null}function ew(i){var t=ug.current;Rt(ug),i._currentValue=t}function Gy(i,t,e){for(;i!==null;){var n=i.alternate;if((i.childLanes&t)!==t?(i.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),i===e)break;i=i.return}}function tc(i,t){dg=i,$0=Hl=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&t&&(gn=!0),i.firstContext=null)}function di(i){var t=i._currentValue;if($0!==i)if(i={context:i,memoizedValue:t,next:null},Hl===null){if(dg===null)throw Error(N(308));Hl=i,dg.dependencies={lanes:0,firstContext:i}}else Hl=Hl.next=i;return t}var ta=null;function nw(i){ta===null?ta=[i]:ta.push(i)}function $A(i,t,e,n){var s=t.interleaved;return s===null?(e.next=e,nw(t)):(e.next=s.next,s.next=e),t.interleaved=e,mr(i,n)}function mr(i,t){i.lanes|=t;var e=i.alternate;for(e!==null&&(e.lanes|=t),e=i,i=i.return;i!==null;)i.childLanes|=t,e=i.alternate,e!==null&&(e.childLanes|=t),e=i,i=i.return;return e.tag===3?e.stateNode:null}var Tr=!1;function iw(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tb(i,t){i=i.updateQueue,t.updateQueue===i&&(t.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ur(i,t){return{eventTime:i,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(i,t,e){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,ut&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,mr(i,e)}return s=n.interleaved,s===null?(t.next=t,nw(n)):(t.next=s.next,s.next=t),n.interleaved=t,mr(i,e)}function gp(i,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194240)!==0)){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,q0(i,e)}}function M1(i,t){var e=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,e===n)){var s=null,r=null;if(e=e.firstBaseUpdate,e!==null){do{var o={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};r===null?s=r=o:r=r.next=o,e=e.next}while(e!==null);r===null?s=r=t:r=r.next=t}else s=r=t;e={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,effects:n.effects},i.updateQueue=e;return}i=e.lastBaseUpdate,i===null?e.firstBaseUpdate=t:i.next=t,e.lastBaseUpdate=t}function fg(i,t,e,n){var s=i.updateQueue;Tr=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,h=c.next;c.next=null,o===null?r=h:o.next=h,o=c;var u=i.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=h:l.next=h,u.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,u=h=c=null,l=r;do{var f=l.lane,g=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var v=i,A=l;switch(f=t,g=e,A.tag){case 1:if(v=A.payload,typeof v=="function"){d=v.call(g,d,f);break t}d=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,f=typeof v=="function"?v.call(g,d,f):v,f==null)break t;d=Vt({},d,f);break t;case 2:Tr=!0}}l.callback!==null&&l.lane!==0&&(i.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(h=u=g,c=d):u=u.next=g,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(u===null&&(c=d),s.baseState=c,s.firstBaseUpdate=h,s.lastBaseUpdate=u,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else r===null&&(s.shared.lanes=0);dl|=o,i.lanes=o,i.memoizedState=d}}function D1(i,t,e){if(i=t.effects,t.effects=null,i!==null)for(t=0;t<i.length;t++){var n=i[t],s=n.callback;if(s!==null){if(n.callback=null,n=e,typeof s!="function")throw Error(N(191,s));s.call(n)}}}var Cf={},ds=Uo(Cf),Lu=Uo(Cf),Iu=Uo(Cf);function ea(i){if(i===Cf)throw Error(N(174));return i}function sw(i,t){switch(Ct(Iu,t),Ct(Lu,i),Ct(ds,Cf),i=t.nodeType,i){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ty(null,"");break;default:i=i===8?t.parentNode:t,t=i.namespaceURI||null,i=i.tagName,t=Ty(t,i)}Rt(ds),Ct(ds,t)}function xh(){Rt(ds),Rt(Lu),Rt(Iu)}function eb(i){ea(Iu.current);var t=ea(ds.current),e=Ty(t,i.type);t!==e&&(Ct(Lu,i),Ct(ds,e))}function rw(i){Lu.current===i&&(Rt(ds),Rt(Lu))}var zt=Uo(0);function pg(i){for(var t=i;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Km=[];function ow(){for(var i=0;i<Km.length;i++)Km[i]._workInProgressVersionPrimary=null;Km.length=0}var mp=Sr.ReactCurrentDispatcher,Xm=Sr.ReactCurrentBatchConfig,ul=0,Bt=null,ce=null,ve=null,gg=!1,vu=!1,Fu=0,Ak=0;function Ie(){throw Error(N(321))}function aw(i,t){if(t===null)return!1;for(var e=0;e<t.length&&e<i.length;e++)if(!Li(i[e],t[e]))return!1;return!0}function lw(i,t,e,n,s,r){if(ul=r,Bt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mp.current=i===null||i.memoizedState===null?Ck:Tk,i=e(n,s),vu){r=0;do{if(vu=!1,Fu=0,25<=r)throw Error(N(301));r+=1,ve=ce=null,t.updateQueue=null,mp.current=kk,i=e(n,s)}while(vu)}if(mp.current=mg,t=ce!==null&&ce.next!==null,ul=0,ve=ce=Bt=null,gg=!1,t)throw Error(N(300));return i}function cw(){var i=Fu!==0;return Fu=0,i}function Vi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?Bt.memoizedState=ve=i:ve=ve.next=i,ve}function fi(){if(ce===null){var i=Bt.alternate;i=i!==null?i.memoizedState:null}else i=ce.next;var t=ve===null?Bt.memoizedState:ve.next;if(t!==null)ve=t,ce=i;else{if(i===null)throw Error(N(310));ce=i,i={memoizedState:ce.memoizedState,baseState:ce.baseState,baseQueue:ce.baseQueue,queue:ce.queue,next:null},ve===null?Bt.memoizedState=ve=i:ve=ve.next=i}return ve}function Ou(i,t){return typeof t=="function"?t(i):t}function Ym(i){var t=fi(),e=t.queue;if(e===null)throw Error(N(311));e.lastRenderedReducer=i;var n=ce,s=n.baseQueue,r=e.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}n.baseQueue=s=r,e.pending=null}if(s!==null){r=s.next,n=n.baseState;var l=o=null,c=null,h=r;do{var u=h.lane;if((ul&u)===u)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:i(n,h.action);else{var d={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,Bt.lanes|=u,dl|=u}h=h.next}while(h!==null&&h!==r);c===null?o=n:c.next=l,Li(n,t.memoizedState)||(gn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,e.lastRenderedState=n}if(i=e.interleaved,i!==null){s=i;do r=s.lane,Bt.lanes|=r,dl|=r,s=s.next;while(s!==i)}else s===null&&(e.lanes=0);return[t.memoizedState,e.dispatch]}function Qm(i){var t=fi(),e=t.queue;if(e===null)throw Error(N(311));e.lastRenderedReducer=i;var n=e.dispatch,s=e.pending,r=t.memoizedState;if(s!==null){e.pending=null;var o=s=s.next;do r=i(r,o.action),o=o.next;while(o!==s);Li(r,t.memoizedState)||(gn=!0),t.memoizedState=r,t.baseQueue===null&&(t.baseState=r),e.lastRenderedState=r}return[r,n]}function nb(){}function ib(i,t){var e=Bt,n=fi(),s=t(),r=!Li(n.memoizedState,s);if(r&&(n.memoizedState=s,gn=!0),n=n.queue,hw(ob.bind(null,e,n,i),[i]),n.getSnapshot!==t||r||ve!==null&&ve.memoizedState.tag&1){if(e.flags|=2048,zu(9,rb.bind(null,e,n,s,t),void 0,null),we===null)throw Error(N(349));ul&30||sb(e,t,s)}return s}function sb(i,t,e){i.flags|=16384,i={getSnapshot:t,value:e},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.stores=[i]):(e=t.stores,e===null?t.stores=[i]:e.push(i))}function rb(i,t,e,n){t.value=e,t.getSnapshot=n,ab(t)&&lb(i)}function ob(i,t,e){return e(function(){ab(t)&&lb(i)})}function ab(i){var t=i.getSnapshot;i=i.value;try{var e=t();return!Li(i,e)}catch{return!0}}function lb(i){var t=mr(i,1);t!==null&&Ni(t,i,1,-1)}function N1(i){var t=Vi();return typeof i=="function"&&(i=i()),t.memoizedState=t.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ou,lastRenderedState:i},t.queue=i,i=i.dispatch=Ek.bind(null,Bt,i),[t.memoizedState,i]}function zu(i,t,e,n){return i={tag:i,create:t,destroy:e,deps:n,next:null},t=Bt.updateQueue,t===null?(t={lastEffect:null,stores:null},Bt.updateQueue=t,t.lastEffect=i.next=i):(e=t.lastEffect,e===null?t.lastEffect=i.next=i:(n=e.next,e.next=i,i.next=n,t.lastEffect=i)),i}function cb(){return fi().memoizedState}function yp(i,t,e,n){var s=Vi();Bt.flags|=i,s.memoizedState=zu(1|t,e,void 0,n===void 0?null:n)}function rm(i,t,e,n){var s=fi();n=n===void 0?null:n;var r=void 0;if(ce!==null){var o=ce.memoizedState;if(r=o.destroy,n!==null&&aw(n,o.deps)){s.memoizedState=zu(t,e,r,n);return}}Bt.flags|=i,s.memoizedState=zu(1|t,e,r,n)}function L1(i,t){return yp(8390656,8,i,t)}function hw(i,t){return rm(2048,8,i,t)}function hb(i,t){return rm(4,2,i,t)}function ub(i,t){return rm(4,4,i,t)}function db(i,t){if(typeof t=="function")return i=i(),t(i),function(){t(null)};if(t!=null)return i=i(),t.current=i,function(){t.current=null}}function fb(i,t,e){return e=e!=null?e.concat([i]):null,rm(4,4,db.bind(null,t,i),e)}function uw(){}function pb(i,t){var e=fi();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&aw(t,n[1])?n[0]:(e.memoizedState=[i,t],i)}function gb(i,t){var e=fi();t=t===void 0?null:t;var n=e.memoizedState;return n!==null&&t!==null&&aw(t,n[1])?n[0]:(i=i(),e.memoizedState=[i,t],i)}function mb(i,t,e){return ul&21?(Li(e,t)||(e=AA(),Bt.lanes|=e,dl|=e,i.baseState=!0),t):(i.baseState&&(i.baseState=!1,gn=!0),i.memoizedState=e)}function bk(i,t){var e=wt;wt=e!==0&&4>e?e:4,i(!0);var n=Xm.transition;Xm.transition={};try{i(!1),t()}finally{wt=e,Xm.transition=n}}function yb(){return fi().memoizedState}function xk(i,t,e){var n=Mo(i);if(e={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null},vb(i))wb(t,e);else if(e=$A(i,t,e,n),e!==null){var s=nn();Ni(e,i,n,s),Sb(e,t,n)}}function Ek(i,t,e){var n=Mo(i),s={lane:n,action:e,hasEagerState:!1,eagerState:null,next:null};if(vb(i))wb(t,s);else{var r=i.alternate;if(i.lanes===0&&(r===null||r.lanes===0)&&(r=t.lastRenderedReducer,r!==null))try{var o=t.lastRenderedState,l=r(o,e);if(s.hasEagerState=!0,s.eagerState=l,Li(l,o)){var c=t.interleaved;c===null?(s.next=s,nw(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}e=$A(i,t,s,n),e!==null&&(s=nn(),Ni(e,i,n,s),Sb(e,t,n))}}function vb(i){var t=i.alternate;return i===Bt||t!==null&&t===Bt}function wb(i,t){vu=gg=!0;var e=i.pending;e===null?t.next=t:(t.next=e.next,e.next=t),i.pending=t}function Sb(i,t,e){if(e&4194240){var n=t.lanes;n&=i.pendingLanes,e|=n,t.lanes=e,q0(i,e)}}var mg={readContext:di,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},Ck={readContext:di,useCallback:function(i,t){return Vi().memoizedState=[i,t===void 0?null:t],i},useContext:di,useEffect:L1,useImperativeHandle:function(i,t,e){return e=e!=null?e.concat([i]):null,yp(4194308,4,db.bind(null,t,i),e)},useLayoutEffect:function(i,t){return yp(4194308,4,i,t)},useInsertionEffect:function(i,t){return yp(4,2,i,t)},useMemo:function(i,t){var e=Vi();return t=t===void 0?null:t,i=i(),e.memoizedState=[i,t],i},useReducer:function(i,t,e){var n=Vi();return t=e!==void 0?e(t):t,n.memoizedState=n.baseState=t,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:t},n.queue=i,i=i.dispatch=xk.bind(null,Bt,i),[n.memoizedState,i]},useRef:function(i){var t=Vi();return i={current:i},t.memoizedState=i},useState:N1,useDebugValue:uw,useDeferredValue:function(i){return Vi().memoizedState=i},useTransition:function(){var i=N1(!1),t=i[0];return i=bk.bind(null,i[1]),Vi().memoizedState=i,[t,i]},useMutableSource:function(){},useSyncExternalStore:function(i,t,e){var n=Bt,s=Vi();if(Lt){if(e===void 0)throw Error(N(407));e=e()}else{if(e=t(),we===null)throw Error(N(349));ul&30||sb(n,t,e)}s.memoizedState=e;var r={value:e,getSnapshot:t};return s.queue=r,L1(ob.bind(null,n,r,i),[i]),n.flags|=2048,zu(9,rb.bind(null,n,r,e,t),void 0,null),e},useId:function(){var i=Vi(),t=we.identifierPrefix;if(Lt){var e=hr,n=cr;e=(n&~(1<<32-Di(n)-1)).toString(32)+e,t=":"+t+"R"+e,e=Fu++,0<e&&(t+="H"+e.toString(32)),t+=":"}else e=Ak++,t=":"+t+"r"+e.toString(32)+":";return i.memoizedState=t},unstable_isNewReconciler:!1},Tk={readContext:di,useCallback:pb,useContext:di,useEffect:hw,useImperativeHandle:fb,useInsertionEffect:hb,useLayoutEffect:ub,useMemo:gb,useReducer:Ym,useRef:cb,useState:function(){return Ym(Ou)},useDebugValue:uw,useDeferredValue:function(i){var t=fi();return mb(t,ce.memoizedState,i)},useTransition:function(){var i=Ym(Ou)[0],t=fi().memoizedState;return[i,t]},useMutableSource:nb,useSyncExternalStore:ib,useId:yb,unstable_isNewReconciler:!1},kk={readContext:di,useCallback:pb,useContext:di,useEffect:hw,useImperativeHandle:fb,useInsertionEffect:hb,useLayoutEffect:ub,useMemo:gb,useReducer:Qm,useRef:cb,useState:function(){return Qm(Ou)},useDebugValue:uw,useDeferredValue:function(i){var t=fi();return ce===null?t.memoizedState=i:mb(t,ce.memoizedState,i)},useTransition:function(){var i=Qm(Ou)[0],t=fi().memoizedState;return[i,t]},useMutableSource:nb,useSyncExternalStore:ib,useId:yb,unstable_isNewReconciler:!1};function vi(i,t){if(i&&i.defaultProps){t=Vt({},t),i=i.defaultProps;for(var e in i)t[e]===void 0&&(t[e]=i[e]);return t}return t}function Ky(i,t,e,n){t=i.memoizedState,e=e(n,t),e=e==null?t:Vt({},t,e),i.memoizedState=e,i.lanes===0&&(i.updateQueue.baseState=e)}var om={isMounted:function(i){return(i=i._reactInternals)?wl(i)===i:!1},enqueueSetState:function(i,t,e){i=i._reactInternals;var n=nn(),s=Mo(i),r=ur(n,s);r.payload=t,e!=null&&(r.callback=e),t=Ro(i,r,s),t!==null&&(Ni(t,i,s,n),gp(t,i,s))},enqueueReplaceState:function(i,t,e){i=i._reactInternals;var n=nn(),s=Mo(i),r=ur(n,s);r.tag=1,r.payload=t,e!=null&&(r.callback=e),t=Ro(i,r,s),t!==null&&(Ni(t,i,s,n),gp(t,i,s))},enqueueForceUpdate:function(i,t){i=i._reactInternals;var e=nn(),n=Mo(i),s=ur(e,n);s.tag=2,t!=null&&(s.callback=t),t=Ro(i,s,n),t!==null&&(Ni(t,i,n,e),gp(t,i,n))}};function I1(i,t,e,n,s,r,o){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,r,o):t.prototype&&t.prototype.isPureReactComponent?!_u(e,n)||!_u(s,r):!0}function Ab(i,t,e){var n=!1,s=Io,r=t.contextType;return typeof r=="object"&&r!==null?r=di(r):(s=yn(t)?cl:He.current,n=t.contextTypes,r=(n=n!=null)?Sh(i,s):Io),t=new t(e,r),i.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=om,i.stateNode=t,t._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=s,i.__reactInternalMemoizedMaskedChildContext=r),t}function F1(i,t,e,n){i=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,n),t.state!==i&&om.enqueueReplaceState(t,t.state,null)}function Xy(i,t,e,n){var s=i.stateNode;s.props=e,s.state=i.memoizedState,s.refs={},iw(i);var r=t.contextType;typeof r=="object"&&r!==null?s.context=di(r):(r=yn(t)?cl:He.current,s.context=Sh(i,r)),s.state=i.memoizedState,r=t.getDerivedStateFromProps,typeof r=="function"&&(Ky(i,t,r,e),s.state=i.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&om.enqueueReplaceState(s,s.state,null),fg(i,e,s,n),s.state=i.memoizedState),typeof s.componentDidMount=="function"&&(i.flags|=4194308)}function Eh(i,t){try{var e="",n=t;do e+=eT(n),n=n.return;while(n);var s=e}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:i,source:t,stack:s,digest:null}}function Jm(i,t,e){return{value:i,source:null,stack:e??null,digest:t??null}}function Yy(i,t){try{console.error(t.value)}catch(e){setTimeout(function(){throw e})}}var Pk=typeof WeakMap=="function"?WeakMap:Map;function bb(i,t,e){e=ur(-1,e),e.tag=3,e.payload={element:null};var n=t.value;return e.callback=function(){vg||(vg=!0,rv=n),Yy(i,t)},e}function xb(i,t,e){e=ur(-1,e),e.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;e.payload=function(){return n(s)},e.callback=function(){Yy(i,t)}}var r=i.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){Yy(i,t),typeof n!="function"&&(_o===null?_o=new Set([this]):_o.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),e}function O1(i,t,e){var n=i.pingCache;if(n===null){n=i.pingCache=new Pk;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(e)||(s.add(e),i=qk.bind(null,i,t,e),t.then(i,i))}function z1(i){do{var t;if((t=i.tag===13)&&(t=i.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return i;i=i.return}while(i!==null);return null}function B1(i,t,e,n,s){return i.mode&1?(i.flags|=65536,i.lanes=s,i):(i===t?i.flags|=65536:(i.flags|=128,e.flags|=131072,e.flags&=-52805,e.tag===1&&(e.alternate===null?e.tag=17:(t=ur(-1,1),t.tag=2,Ro(e,t,1))),e.lanes|=1),i)}var Rk=Sr.ReactCurrentOwner,gn=!1;function tn(i,t,e,n){t.child=i===null?ZA(t,null,e,n):bh(t,i.child,e,n)}function V1(i,t,e,n,s){e=e.render;var r=t.ref;return tc(t,s),n=lw(i,t,e,n,r,s),e=cw(),i!==null&&!gn?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,yr(i,t,s)):(Lt&&e&&Q0(t),t.flags|=1,tn(i,t,n,s),t.child)}function U1(i,t,e,n,s){if(i===null){var r=e.type;return typeof r=="function"&&!ww(r)&&r.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(t.tag=15,t.type=r,Eb(i,t,r,n,s)):(i=Ap(e.type,null,n,t,t.mode,s),i.ref=t.ref,i.return=t,t.child=i)}if(r=i.child,!(i.lanes&s)){var o=r.memoizedProps;if(e=e.compare,e=e!==null?e:_u,e(o,n)&&i.ref===t.ref)return yr(i,t,s)}return t.flags|=1,i=Do(r,n),i.ref=t.ref,i.return=t,t.child=i}function Eb(i,t,e,n,s){if(i!==null){var r=i.memoizedProps;if(_u(r,n)&&i.ref===t.ref)if(gn=!1,t.pendingProps=n=r,(i.lanes&s)!==0)i.flags&131072&&(gn=!0);else return t.lanes=i.lanes,yr(i,t,s)}return Qy(i,t,e,n,s)}function Cb(i,t,e){var n=t.pendingProps,s=n.children,r=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ct(Wl,Bn),Bn|=e;else{if(!(e&1073741824))return i=r!==null?r.baseLanes|e:e,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:i,cachePool:null,transitions:null},t.updateQueue=null,Ct(Wl,Bn),Bn|=i,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=r!==null?r.baseLanes:e,Ct(Wl,Bn),Bn|=n}else r!==null?(n=r.baseLanes|e,t.memoizedState=null):n=e,Ct(Wl,Bn),Bn|=n;return tn(i,t,s,e),t.child}function Tb(i,t){var e=t.ref;(i===null&&e!==null||i!==null&&i.ref!==e)&&(t.flags|=512,t.flags|=2097152)}function Qy(i,t,e,n,s){var r=yn(e)?cl:He.current;return r=Sh(t,r),tc(t,s),e=lw(i,t,e,n,r,s),n=cw(),i!==null&&!gn?(t.updateQueue=i.updateQueue,t.flags&=-2053,i.lanes&=~s,yr(i,t,s)):(Lt&&n&&Q0(t),t.flags|=1,tn(i,t,e,s),t.child)}function q1(i,t,e,n,s){if(yn(e)){var r=!0;lg(t)}else r=!1;if(tc(t,s),t.stateNode===null)vp(i,t),Ab(t,e,n),Xy(t,e,n,s),n=!0;else if(i===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,h=e.contextType;typeof h=="object"&&h!==null?h=di(h):(h=yn(e)?cl:He.current,h=Sh(t,h));var u=e.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==h)&&F1(t,o,n,h),Tr=!1;var f=t.memoizedState;o.state=f,fg(t,n,o,s),c=t.memoizedState,l!==n||f!==c||mn.current||Tr?(typeof u=="function"&&(Ky(t,e,u,n),c=t.memoizedState),(l=Tr||I1(t,e,l,n,f,c,h))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=h,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,tb(i,t),l=t.memoizedProps,h=t.type===t.elementType?l:vi(t.type,l),o.props=h,d=t.pendingProps,f=o.context,c=e.contextType,typeof c=="object"&&c!==null?c=di(c):(c=yn(e)?cl:He.current,c=Sh(t,c));var g=e.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&F1(t,o,n,c),Tr=!1,f=t.memoizedState,o.state=f,fg(t,n,o,s);var v=t.memoizedState;l!==d||f!==v||mn.current||Tr?(typeof g=="function"&&(Ky(t,e,g,n),v=t.memoizedState),(h=Tr||I1(t,e,h,n,f,v,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,v,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,v,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),o.props=n,o.state=v,o.context=c,n=h):(typeof o.componentDidUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===i.memoizedProps&&f===i.memoizedState||(t.flags|=1024),n=!1)}return Jy(i,t,e,n,r,s)}function Jy(i,t,e,n,s,r){Tb(i,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&k1(t,e,!1),yr(i,t,r);n=t.stateNode,Rk.current=t;var l=o&&typeof e.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,i!==null&&o?(t.child=bh(t,i.child,null,r),t.child=bh(t,null,l,r)):tn(i,t,l,r),t.memoizedState=n.state,s&&k1(t,e,!0),t.child}function kb(i){var t=i.stateNode;t.pendingContext?T1(i,t.pendingContext,t.pendingContext!==t.context):t.context&&T1(i,t.context,!1),sw(i,t.containerInfo)}function H1(i,t,e,n,s){return Ah(),Z0(s),t.flags|=256,tn(i,t,e,n),t.child}var Zy={dehydrated:null,treeContext:null,retryLane:0};function $y(i){return{baseLanes:i,cachePool:null,transitions:null}}function Pb(i,t,e){var n=t.pendingProps,s=zt.current,r=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=i!==null&&i.memoizedState===null?!1:(s&2)!==0),l?(r=!0,t.flags&=-129):(i===null||i.memoizedState!==null)&&(s|=1),Ct(zt,s&1),i===null)return Wy(t),i=t.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(t.mode&1?i.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,i=n.fallback,r?(n=t.mode,r=t.child,o={mode:"hidden",children:o},!(n&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=cm(o,n,0,null),i=ll(i,n,e,null),r.return=t,i.return=t,r.sibling=i,t.child=r,t.child.memoizedState=$y(e),t.memoizedState=Zy,i):dw(t,o));if(s=i.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return _k(i,t,o,n,l,s,e);if(r){r=n.fallback,o=t.mode,s=i.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Do(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=Do(l,r):(r=ll(r,o,e,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,n=r,r=t.child,o=i.child.memoizedState,o=o===null?$y(e):{baseLanes:o.baseLanes|e,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=i.childLanes&~e,t.memoizedState=Zy,n}return r=i.child,i=r.sibling,n=Do(r,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=e),n.return=t,n.sibling=null,i!==null&&(e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)),t.child=n,t.memoizedState=null,n}function dw(i,t){return t=cm({mode:"visible",children:t},i.mode,0,null),t.return=i,i.child=t}function Gf(i,t,e,n){return n!==null&&Z0(n),bh(t,i.child,null,e),i=dw(t,t.pendingProps.children),i.flags|=2,t.memoizedState=null,i}function _k(i,t,e,n,s,r,o){if(e)return t.flags&256?(t.flags&=-257,n=Jm(Error(N(422))),Gf(i,t,o,n)):t.memoizedState!==null?(t.child=i.child,t.flags|=128,null):(r=n.fallback,s=t.mode,n=cm({mode:"visible",children:n.children},s,0,null),r=ll(r,s,o,null),r.flags|=2,n.return=t,r.return=t,n.sibling=r,t.child=n,t.mode&1&&bh(t,i.child,null,o),t.child.memoizedState=$y(o),t.memoizedState=Zy,r);if(!(t.mode&1))return Gf(i,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,r=Error(N(419)),n=Jm(r,n,void 0),Gf(i,t,o,n)}if(l=(o&i.childLanes)!==0,gn||l){if(n=we,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,mr(i,s),Ni(n,i,s,-1))}return vw(),n=Jm(Error(N(421))),Gf(i,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=i.child,t=Hk.bind(null,i),s._reactRetry=t,null):(i=r.treeContext,qn=Po(s.nextSibling),Hn=t,Lt=!0,_i=null,i!==null&&(oi[ai++]=cr,oi[ai++]=hr,oi[ai++]=hl,cr=i.id,hr=i.overflow,hl=t),t=dw(t,n.children),t.flags|=4096,t)}function j1(i,t,e){i.lanes|=t;var n=i.alternate;n!==null&&(n.lanes|=t),Gy(i.return,t,e)}function Zm(i,t,e,n,s){var r=i.memoizedState;r===null?i.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:e,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=e,r.tailMode=s)}function Rb(i,t,e){var n=t.pendingProps,s=n.revealOrder,r=n.tail;if(tn(i,t,n.children,e),n=zt.current,n&2)n=n&1|2,t.flags|=128;else{if(i!==null&&i.flags&128)t:for(i=t.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&j1(i,e,t);else if(i.tag===19)j1(i,e,t);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break t;for(;i.sibling===null;){if(i.return===null||i.return===t)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Ct(zt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(e=t.child,s=null;e!==null;)i=e.alternate,i!==null&&pg(i)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),Zm(t,!1,s,e,r);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(i=s.alternate,i!==null&&pg(i)===null){t.child=s;break}i=s.sibling,s.sibling=e,e=s,s=i}Zm(t,!0,e,null,r);break;case"together":Zm(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vp(i,t){!(t.mode&1)&&i!==null&&(i.alternate=null,t.alternate=null,t.flags|=2)}function yr(i,t,e){if(i!==null&&(t.dependencies=i.dependencies),dl|=t.lanes,!(e&t.childLanes))return null;if(i!==null&&t.child!==i.child)throw Error(N(153));if(t.child!==null){for(i=t.child,e=Do(i,i.pendingProps),t.child=e,e.return=t;i.sibling!==null;)i=i.sibling,e=e.sibling=Do(i,i.pendingProps),e.return=t;e.sibling=null}return t.child}function Mk(i,t,e){switch(t.tag){case 3:kb(t),Ah();break;case 5:eb(t);break;case 1:yn(t.type)&&lg(t);break;case 4:sw(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Ct(ug,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Ct(zt,zt.current&1),t.flags|=128,null):e&t.child.childLanes?Pb(i,t,e):(Ct(zt,zt.current&1),i=yr(i,t,e),i!==null?i.sibling:null);Ct(zt,zt.current&1);break;case 19:if(n=(e&t.childLanes)!==0,i.flags&128){if(n)return Rb(i,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ct(zt,zt.current),n)break;return null;case 22:case 23:return t.lanes=0,Cb(i,t,e)}return yr(i,t,e)}var _b,tv,Mb,Db;_b=function(i,t){for(var e=t.child;e!==null;){if(e.tag===5||e.tag===6)i.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};tv=function(){};Mb=function(i,t,e,n){var s=i.memoizedProps;if(s!==n){i=t.stateNode,ea(ds.current);var r=null;switch(e){case"input":s=by(i,s),n=by(i,n),r=[];break;case"select":s=Vt({},s,{value:void 0}),n=Vt({},n,{value:void 0}),r=[];break;case"textarea":s=Cy(i,s),n=Cy(i,n),r=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=og)}ky(e,n);var o;e=null;for(h in s)if(!n.hasOwnProperty(h)&&s.hasOwnProperty(h)&&s[h]!=null)if(h==="style"){var l=s[h];for(o in l)l.hasOwnProperty(o)&&(e||(e={}),e[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(xu.hasOwnProperty(h)?r||(r=[]):(r=r||[]).push(h,null));for(h in n){var c=n[h];if(l=s!=null?s[h]:void 0,n.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(e||(e={}),e[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(e||(e={}),e[o]=c[o])}else e||(r||(r=[]),r.push(h,e)),e=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(xu.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&kt("scroll",i),r||l===c||(r=[])):(r=r||[]).push(h,c))}e&&(r=r||[]).push("style",e);var h=r;(t.updateQueue=h)&&(t.flags|=4)}};Db=function(i,t,e,n){e!==n&&(t.flags|=4)};function Ih(i,t){if(!Lt)switch(i.tailMode){case"hidden":t=i.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?i.tail=null:e.sibling=null;break;case"collapsed":e=i.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Fe(i){var t=i.alternate!==null&&i.alternate.child===i.child,e=0,n=0;if(t)for(var s=i.child;s!==null;)e|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=i,s=s.sibling;else for(s=i.child;s!==null;)e|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=i,s=s.sibling;return i.subtreeFlags|=n,i.childLanes=e,t}function Dk(i,t,e){var n=t.pendingProps;switch(J0(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return yn(t.type)&&ag(),Fe(t),null;case 3:return n=t.stateNode,xh(),Rt(mn),Rt(He),ow(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(jf(t)?t.flags|=4:i===null||i.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,_i!==null&&(lv(_i),_i=null))),tv(i,t),Fe(t),null;case 5:rw(t);var s=ea(Iu.current);if(e=t.type,i!==null&&t.stateNode!=null)Mb(i,t,e,n,s),i.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(N(166));return Fe(t),null}if(i=ea(ds.current),jf(t)){n=t.stateNode,e=t.type;var r=t.memoizedProps;switch(n[cs]=t,n[Nu]=r,i=(t.mode&1)!==0,e){case"dialog":kt("cancel",n),kt("close",n);break;case"iframe":case"object":case"embed":kt("load",n);break;case"video":case"audio":for(s=0;s<Gh.length;s++)kt(Gh[s],n);break;case"source":kt("error",n);break;case"img":case"image":case"link":kt("error",n),kt("load",n);break;case"details":kt("toggle",n);break;case"input":$w(n,r),kt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!r.multiple},kt("invalid",n);break;case"textarea":e1(n,r),kt("invalid",n)}ky(e,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?n.textContent!==l&&(r.suppressHydrationWarning!==!0&&Hf(n.textContent,l,i),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Hf(n.textContent,l,i),s=["children",""+l]):xu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&kt("scroll",n)}switch(e){case"input":If(n),t1(n,r,!0);break;case"textarea":If(n),n1(n);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(n.onclick=og)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=oA(e)),i==="http://www.w3.org/1999/xhtml"?e==="script"?(i=o.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=o.createElement(e,{is:n.is}):(i=o.createElement(e),e==="select"&&(o=i,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):i=o.createElementNS(i,e),i[cs]=t,i[Nu]=n,_b(i,t,!1,!1),t.stateNode=i;t:{switch(o=Py(e,n),e){case"dialog":kt("cancel",i),kt("close",i),s=n;break;case"iframe":case"object":case"embed":kt("load",i),s=n;break;case"video":case"audio":for(s=0;s<Gh.length;s++)kt(Gh[s],i);s=n;break;case"source":kt("error",i),s=n;break;case"img":case"image":case"link":kt("error",i),kt("load",i),s=n;break;case"details":kt("toggle",i),s=n;break;case"input":$w(i,n),s=by(i,n),kt("invalid",i);break;case"option":s=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},s=Vt({},n,{value:void 0}),kt("invalid",i);break;case"textarea":e1(i,n),s=Cy(i,n),kt("invalid",i);break;default:s=n}ky(e,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?cA(i,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&aA(i,c)):r==="children"?typeof c=="string"?(e!=="textarea"||c!=="")&&Eu(i,c):typeof c=="number"&&Eu(i,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(xu.hasOwnProperty(r)?c!=null&&r==="onScroll"&&kt("scroll",i):c!=null&&F0(i,r,c,o))}switch(e){case"input":If(i),t1(i,n,!1);break;case"textarea":If(i),n1(i);break;case"option":n.value!=null&&i.setAttribute("value",""+Lo(n.value));break;case"select":i.multiple=!!n.multiple,r=n.value,r!=null?Ql(i,!!n.multiple,r,!1):n.defaultValue!=null&&Ql(i,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(i.onclick=og)}switch(e){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(i&&t.stateNode!=null)Db(i,t,i.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(N(166));if(e=ea(Iu.current),ea(ds.current),jf(t)){if(n=t.stateNode,e=t.memoizedProps,n[cs]=t,(r=n.nodeValue!==e)&&(i=Hn,i!==null))switch(i.tag){case 3:Hf(n.nodeValue,e,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Hf(n.nodeValue,e,(i.mode&1)!==0)}r&&(t.flags|=4)}else n=(e.nodeType===9?e:e.ownerDocument).createTextNode(n),n[cs]=t,t.stateNode=n}return Fe(t),null;case 13:if(Rt(zt),n=t.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Lt&&qn!==null&&t.mode&1&&!(t.flags&128))QA(),Ah(),t.flags|=98560,r=!1;else if(r=jf(t),n!==null&&n.dehydrated!==null){if(i===null){if(!r)throw Error(N(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(N(317));r[cs]=t}else Ah(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),r=!1}else _i!==null&&(lv(_i),_i=null),r=!0;if(!r)return t.flags&65536?t:null}return t.flags&128?(t.lanes=e,t):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(i===null||zt.current&1?he===0&&(he=3):vw())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return xh(),tv(i,t),i===null&&Mu(t.stateNode.containerInfo),Fe(t),null;case 10:return ew(t.type._context),Fe(t),null;case 17:return yn(t.type)&&ag(),Fe(t),null;case 19:if(Rt(zt),r=t.memoizedState,r===null)return Fe(t),null;if(n=(t.flags&128)!==0,o=r.rendering,o===null)if(n)Ih(r,!1);else{if(he!==0||i!==null&&i.flags&128)for(i=t.child;i!==null;){if(o=pg(i),o!==null){for(t.flags|=128,Ih(r,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=e,e=t.child;e!==null;)r=e,i=n,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=i,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,i=o.dependencies,r.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e=e.sibling;return Ct(zt,zt.current&1|2),t.child}i=i.sibling}r.tail!==null&&Gt()>Ch&&(t.flags|=128,n=!0,Ih(r,!1),t.lanes=4194304)}else{if(!n)if(i=pg(o),i!==null){if(t.flags|=128,n=!0,e=i.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Ih(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!Lt)return Fe(t),null}else 2*Gt()-r.renderingStartTime>Ch&&e!==1073741824&&(t.flags|=128,n=!0,Ih(r,!1),t.lanes=4194304);r.isBackwards?(o.sibling=t.child,t.child=o):(e=r.last,e!==null?e.sibling=o:t.child=o,r.last=o)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Gt(),t.sibling=null,e=zt.current,Ct(zt,n?e&1|2:e&1),t):(Fe(t),null);case 22:case 23:return yw(),n=t.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Bn&1073741824&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(N(156,t.tag))}function Nk(i,t){switch(J0(t),t.tag){case 1:return yn(t.type)&&ag(),i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 3:return xh(),Rt(mn),Rt(He),ow(),i=t.flags,i&65536&&!(i&128)?(t.flags=i&-65537|128,t):null;case 5:return rw(t),null;case 13:if(Rt(zt),i=t.memoizedState,i!==null&&i.dehydrated!==null){if(t.alternate===null)throw Error(N(340));Ah()}return i=t.flags,i&65536?(t.flags=i&-65537|128,t):null;case 19:return Rt(zt),null;case 4:return xh(),null;case 10:return ew(t.type._context),null;case 22:case 23:return yw(),null;case 24:return null;default:return null}}var Kf=!1,qe=!1,Lk=typeof WeakSet=="function"?WeakSet:Set,H=null;function jl(i,t){var e=i.ref;if(e!==null)if(typeof e=="function")try{e(null)}catch(n){qt(i,t,n)}else e.current=null}function ev(i,t,e){try{e()}catch(n){qt(i,t,n)}}var W1=!1;function Ik(i,t){if(zy=ig,i=OA(),Y0(i)){if("selectionStart"in i)var e={start:i.selectionStart,end:i.selectionEnd};else t:{e=(e=i.ownerDocument)&&e.defaultView||window;var n=e.getSelection&&e.getSelection();if(n&&n.rangeCount!==0){e=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{e.nodeType,r.nodeType}catch{e=null;break t}var o=0,l=-1,c=-1,h=0,u=0,d=i,f=null;e:for(;;){for(var g;d!==e||s!==0&&d.nodeType!==3||(l=o+s),d!==r||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===i)break e;if(f===e&&++h===s&&(l=o),f===r&&++u===n&&(c=o),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}e=l===-1||c===-1?null:{start:l,end:c}}else e=null}e=e||{start:0,end:0}}else e=null;for(By={focusedElem:i,selectionRange:e},ig=!1,H=t;H!==null;)if(t=H,i=t.child,(t.subtreeFlags&1028)!==0&&i!==null)i.return=t,H=i;else for(;H!==null;){t=H;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var A=v.memoizedProps,E=v.memoizedState,m=t.stateNode,y=m.getSnapshotBeforeUpdate(t.elementType===t.type?A:vi(t.type,A),E);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(x){qt(t,t.return,x)}if(i=t.sibling,i!==null){i.return=t.return,H=i;break}H=t.return}return v=W1,W1=!1,v}function wu(i,t,e){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&i)===i){var r=s.destroy;s.destroy=void 0,r!==void 0&&ev(t,e,r)}s=s.next}while(s!==n)}}function am(i,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var e=t=t.next;do{if((e.tag&i)===i){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}}function nv(i){var t=i.ref;if(t!==null){var e=i.stateNode;switch(i.tag){case 5:i=e;break;default:i=e}typeof t=="function"?t(i):t.current=i}}function Nb(i){var t=i.alternate;t!==null&&(i.alternate=null,Nb(t)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(t=i.stateNode,t!==null&&(delete t[cs],delete t[Nu],delete t[qy],delete t[yk],delete t[vk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Lb(i){return i.tag===5||i.tag===3||i.tag===4}function G1(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||Lb(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function iv(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.nodeType===8?e.parentNode.insertBefore(i,t):e.insertBefore(i,t):(e.nodeType===8?(t=e.parentNode,t.insertBefore(i,e)):(t=e,t.appendChild(i)),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=og));else if(n!==4&&(i=i.child,i!==null))for(iv(i,t,e),i=i.sibling;i!==null;)iv(i,t,e),i=i.sibling}function sv(i,t,e){var n=i.tag;if(n===5||n===6)i=i.stateNode,t?e.insertBefore(i,t):e.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(sv(i,t,e),i=i.sibling;i!==null;)sv(i,t,e),i=i.sibling}var Pe=null,Ri=!1;function Ar(i,t,e){for(e=e.child;e!==null;)Ib(i,t,e),e=e.sibling}function Ib(i,t,e){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount($g,e)}catch{}switch(e.tag){case 5:qe||jl(e,t);case 6:var n=Pe,s=Ri;Pe=null,Ar(i,t,e),Pe=n,Ri=s,Pe!==null&&(Ri?(i=Pe,e=e.stateNode,i.nodeType===8?i.parentNode.removeChild(e):i.removeChild(e)):Pe.removeChild(e.stateNode));break;case 18:Pe!==null&&(Ri?(i=Pe,e=e.stateNode,i.nodeType===8?Wm(i.parentNode,e):i.nodeType===1&&Wm(i,e),Pu(i)):Wm(Pe,e.stateNode));break;case 4:n=Pe,s=Ri,Pe=e.stateNode.containerInfo,Ri=!0,Ar(i,t,e),Pe=n,Ri=s;break;case 0:case 11:case 14:case 15:if(!qe&&(n=e.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ev(e,t,o),s=s.next}while(s!==n)}Ar(i,t,e);break;case 1:if(!qe&&(jl(e,t),n=e.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(l){qt(e,t,l)}Ar(i,t,e);break;case 21:Ar(i,t,e);break;case 22:e.mode&1?(qe=(n=qe)||e.memoizedState!==null,Ar(i,t,e),qe=n):Ar(i,t,e);break;default:Ar(i,t,e)}}function K1(i){var t=i.updateQueue;if(t!==null){i.updateQueue=null;var e=i.stateNode;e===null&&(e=i.stateNode=new Lk),t.forEach(function(n){var s=jk.bind(null,i,n);e.has(n)||(e.add(n),n.then(s,s))})}}function gi(i,t){var e=t.deletions;if(e!==null)for(var n=0;n<e.length;n++){var s=e[n];try{var r=i,o=t,l=o;t:for(;l!==null;){switch(l.tag){case 5:Pe=l.stateNode,Ri=!1;break t;case 3:Pe=l.stateNode.containerInfo,Ri=!0;break t;case 4:Pe=l.stateNode.containerInfo,Ri=!0;break t}l=l.return}if(Pe===null)throw Error(N(160));Ib(r,o,s),Pe=null,Ri=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(h){qt(s,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Fb(t,i),t=t.sibling}function Fb(i,t){var e=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(gi(t,i),Fi(i),n&4){try{wu(3,i,i.return),am(3,i)}catch(A){qt(i,i.return,A)}try{wu(5,i,i.return)}catch(A){qt(i,i.return,A)}}break;case 1:gi(t,i),Fi(i),n&512&&e!==null&&jl(e,e.return);break;case 5:if(gi(t,i),Fi(i),n&512&&e!==null&&jl(e,e.return),i.flags&32){var s=i.stateNode;try{Eu(s,"")}catch(A){qt(i,i.return,A)}}if(n&4&&(s=i.stateNode,s!=null)){var r=i.memoizedProps,o=e!==null?e.memoizedProps:r,l=i.type,c=i.updateQueue;if(i.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&sA(s,r),Py(l,o);var h=Py(l,r);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?cA(s,d):u==="dangerouslySetInnerHTML"?aA(s,d):u==="children"?Eu(s,d):F0(s,u,d,h)}switch(l){case"input":xy(s,r);break;case"textarea":rA(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var g=r.value;g!=null?Ql(s,!!r.multiple,g,!1):f!==!!r.multiple&&(r.defaultValue!=null?Ql(s,!!r.multiple,r.defaultValue,!0):Ql(s,!!r.multiple,r.multiple?[]:"",!1))}s[Nu]=r}catch(A){qt(i,i.return,A)}}break;case 6:if(gi(t,i),Fi(i),n&4){if(i.stateNode===null)throw Error(N(162));s=i.stateNode,r=i.memoizedProps;try{s.nodeValue=r}catch(A){qt(i,i.return,A)}}break;case 3:if(gi(t,i),Fi(i),n&4&&e!==null&&e.memoizedState.isDehydrated)try{Pu(t.containerInfo)}catch(A){qt(i,i.return,A)}break;case 4:gi(t,i),Fi(i);break;case 13:gi(t,i),Fi(i),s=i.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(gw=Gt())),n&4&&K1(i);break;case 22:if(u=e!==null&&e.memoizedState!==null,i.mode&1?(qe=(h=qe)||u,gi(t,i),qe=h):gi(t,i),Fi(i),n&8192){if(h=i.memoizedState!==null,(i.stateNode.isHidden=h)&&!u&&i.mode&1)for(H=i,u=i.child;u!==null;){for(d=H=u;H!==null;){switch(f=H,g=f.child,f.tag){case 0:case 11:case 14:case 15:wu(4,f,f.return);break;case 1:jl(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,e=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(A){qt(n,e,A)}}break;case 5:jl(f,f.return);break;case 22:if(f.memoizedState!==null){Y1(d);continue}}g!==null?(g.return=f,H=g):Y1(d)}u=u.sibling}t:for(u=null,d=i;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,h?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lA("display",o))}catch(A){qt(i,i.return,A)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(A){qt(i,i.return,A)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===i)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===i)break t;for(;d.sibling===null;){if(d.return===null||d.return===i)break t;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gi(t,i),Fi(i),n&4&&K1(i);break;case 21:break;default:gi(t,i),Fi(i)}}function Fi(i){var t=i.flags;if(t&2){try{t:{for(var e=i.return;e!==null;){if(Lb(e)){var n=e;break t}e=e.return}throw Error(N(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Eu(s,""),n.flags&=-33);var r=G1(i);sv(i,r,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=G1(i);iv(i,l,o);break;default:throw Error(N(161))}}catch(c){qt(i,i.return,c)}i.flags&=-3}t&4096&&(i.flags&=-4097)}function Fk(i,t,e){H=i,Ob(i)}function Ob(i,t,e){for(var n=(i.mode&1)!==0;H!==null;){var s=H,r=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Kf;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||qe;l=Kf;var h=qe;if(Kf=o,(qe=c)&&!h)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?Q1(s):c!==null?(c.return=o,H=c):Q1(s);for(;r!==null;)H=r,Ob(r),r=r.sibling;H=s,Kf=l,qe=h}X1(i)}else s.subtreeFlags&8772&&r!==null?(r.return=s,H=r):X1(i)}}function X1(i){for(;H!==null;){var t=H;if(t.flags&8772){var e=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qe||am(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!qe)if(e===null)n.componentDidMount();else{var s=t.elementType===t.type?e.memoizedProps:vi(t.type,e.memoizedProps);n.componentDidUpdate(s,e.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var r=t.updateQueue;r!==null&&D1(t,r,n);break;case 3:var o=t.updateQueue;if(o!==null){if(e=null,t.child!==null)switch(t.child.tag){case 5:e=t.child.stateNode;break;case 1:e=t.child.stateNode}D1(t,o,e)}break;case 5:var l=t.stateNode;if(e===null&&t.flags&4){e=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&e.focus();break;case"img":c.src&&(e.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var u=h.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Pu(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}qe||t.flags&512&&nv(t)}catch(f){qt(t,t.return,f)}}if(t===i){H=null;break}if(e=t.sibling,e!==null){e.return=t.return,H=e;break}H=t.return}}function Y1(i){for(;H!==null;){var t=H;if(t===i){H=null;break}var e=t.sibling;if(e!==null){e.return=t.return,H=e;break}H=t.return}}function Q1(i){for(;H!==null;){var t=H;try{switch(t.tag){case 0:case 11:case 15:var e=t.return;try{am(4,t)}catch(c){qt(t,e,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){qt(t,s,c)}}var r=t.return;try{nv(t)}catch(c){qt(t,r,c)}break;case 5:var o=t.return;try{nv(t)}catch(c){qt(t,o,c)}}}catch(c){qt(t,t.return,c)}if(t===i){H=null;break}var l=t.sibling;if(l!==null){l.return=t.return,H=l;break}H=t.return}}var Ok=Math.ceil,yg=Sr.ReactCurrentDispatcher,fw=Sr.ReactCurrentOwner,hi=Sr.ReactCurrentBatchConfig,ut=0,we=null,Zt=null,De=0,Bn=0,Wl=Uo(0),he=0,Bu=null,dl=0,lm=0,pw=0,Su=null,pn=null,gw=0,Ch=1/0,Ss=null,vg=!1,rv=null,_o=null,Xf=!1,Eo=null,wg=0,Au=0,ov=null,wp=-1,Sp=0;function nn(){return ut&6?Gt():wp!==-1?wp:wp=Gt()}function Mo(i){return i.mode&1?ut&2&&De!==0?De&-De:Sk.transition!==null?(Sp===0&&(Sp=AA()),Sp):(i=wt,i!==0||(i=window.event,i=i===void 0?16:PA(i.type)),i):1}function Ni(i,t,e,n){if(50<Au)throw Au=0,ov=null,Error(N(185));bf(i,e,n),(!(ut&2)||i!==we)&&(i===we&&(!(ut&2)&&(lm|=e),he===4&&Pr(i,De)),vn(i,n),e===1&&ut===0&&!(t.mode&1)&&(Ch=Gt()+500,sm&&qo()))}function vn(i,t){var e=i.callbackNode;ST(i,t);var n=ng(i,i===we?De:0);if(n===0)e!==null&&r1(e),i.callbackNode=null,i.callbackPriority=0;else if(t=n&-n,i.callbackPriority!==t){if(e!=null&&r1(e),t===1)i.tag===0?wk(J1.bind(null,i)):KA(J1.bind(null,i)),gk(function(){!(ut&6)&&qo()}),e=null;else{switch(bA(n)){case 1:e=U0;break;case 4:e=wA;break;case 16:e=eg;break;case 536870912:e=SA;break;default:e=eg}e=Wb(e,zb.bind(null,i))}i.callbackPriority=t,i.callbackNode=e}}function zb(i,t){if(wp=-1,Sp=0,ut&6)throw Error(N(327));var e=i.callbackNode;if(ec()&&i.callbackNode!==e)return null;var n=ng(i,i===we?De:0);if(n===0)return null;if(n&30||n&i.expiredLanes||t)t=Sg(i,n);else{t=n;var s=ut;ut|=2;var r=Vb();(we!==i||De!==t)&&(Ss=null,Ch=Gt()+500,al(i,t));do try{Vk();break}catch(l){Bb(i,l)}while(!0);tw(),yg.current=r,ut=s,Zt!==null?t=0:(we=null,De=0,t=he)}if(t!==0){if(t===2&&(s=Ny(i),s!==0&&(n=s,t=av(i,s))),t===1)throw e=Bu,al(i,0),Pr(i,n),vn(i,Gt()),e;if(t===6)Pr(i,n);else{if(s=i.current.alternate,!(n&30)&&!zk(s)&&(t=Sg(i,n),t===2&&(r=Ny(i),r!==0&&(n=r,t=av(i,r))),t===1))throw e=Bu,al(i,0),Pr(i,n),vn(i,Gt()),e;switch(i.finishedWork=s,i.finishedLanes=n,t){case 0:case 1:throw Error(N(345));case 2:Go(i,pn,Ss);break;case 3:if(Pr(i,n),(n&130023424)===n&&(t=gw+500-Gt(),10<t)){if(ng(i,0)!==0)break;if(s=i.suspendedLanes,(s&n)!==n){nn(),i.pingedLanes|=i.suspendedLanes&s;break}i.timeoutHandle=Uy(Go.bind(null,i,pn,Ss),t);break}Go(i,pn,Ss);break;case 4:if(Pr(i,n),(n&4194240)===n)break;for(t=i.eventTimes,s=-1;0<n;){var o=31-Di(n);r=1<<o,o=t[o],o>s&&(s=o),n&=~r}if(n=s,n=Gt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ok(n/1960))-n,10<n){i.timeoutHandle=Uy(Go.bind(null,i,pn,Ss),n);break}Go(i,pn,Ss);break;case 5:Go(i,pn,Ss);break;default:throw Error(N(329))}}}return vn(i,Gt()),i.callbackNode===e?zb.bind(null,i):null}function av(i,t){var e=Su;return i.current.memoizedState.isDehydrated&&(al(i,t).flags|=256),i=Sg(i,t),i!==2&&(t=pn,pn=e,t!==null&&lv(t)),i}function lv(i){pn===null?pn=i:pn.push.apply(pn,i)}function zk(i){for(var t=i;;){if(t.flags&16384){var e=t.updateQueue;if(e!==null&&(e=e.stores,e!==null))for(var n=0;n<e.length;n++){var s=e[n],r=s.getSnapshot;s=s.value;try{if(!Li(r(),s))return!1}catch{return!1}}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===i)break;for(;t.sibling===null;){if(t.return===null||t.return===i)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(i,t){for(t&=~pw,t&=~lm,i.suspendedLanes|=t,i.pingedLanes&=~t,i=i.expirationTimes;0<t;){var e=31-Di(t),n=1<<e;i[e]=-1,t&=~n}}function J1(i){if(ut&6)throw Error(N(327));ec();var t=ng(i,0);if(!(t&1))return vn(i,Gt()),null;var e=Sg(i,t);if(i.tag!==0&&e===2){var n=Ny(i);n!==0&&(t=n,e=av(i,n))}if(e===1)throw e=Bu,al(i,0),Pr(i,t),vn(i,Gt()),e;if(e===6)throw Error(N(345));return i.finishedWork=i.current.alternate,i.finishedLanes=t,Go(i,pn,Ss),vn(i,Gt()),null}function mw(i,t){var e=ut;ut|=1;try{return i(t)}finally{ut=e,ut===0&&(Ch=Gt()+500,sm&&qo())}}function fl(i){Eo!==null&&Eo.tag===0&&!(ut&6)&&ec();var t=ut;ut|=1;var e=hi.transition,n=wt;try{if(hi.transition=null,wt=1,i)return i()}finally{wt=n,hi.transition=e,ut=t,!(ut&6)&&qo()}}function yw(){Bn=Wl.current,Rt(Wl)}function al(i,t){i.finishedWork=null,i.finishedLanes=0;var e=i.timeoutHandle;if(e!==-1&&(i.timeoutHandle=-1,pk(e)),Zt!==null)for(e=Zt.return;e!==null;){var n=e;switch(J0(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ag();break;case 3:xh(),Rt(mn),Rt(He),ow();break;case 5:rw(n);break;case 4:xh();break;case 13:Rt(zt);break;case 19:Rt(zt);break;case 10:ew(n.type._context);break;case 22:case 23:yw()}e=e.return}if(we=i,Zt=i=Do(i.current,null),De=Bn=t,he=0,Bu=null,pw=lm=dl=0,pn=Su=null,ta!==null){for(t=0;t<ta.length;t++)if(e=ta[t],n=e.interleaved,n!==null){e.interleaved=null;var s=n.next,r=e.pending;if(r!==null){var o=r.next;r.next=s,n.next=o}e.pending=n}ta=null}return i}function Bb(i,t){do{var e=Zt;try{if(tw(),mp.current=mg,gg){for(var n=Bt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}gg=!1}if(ul=0,ve=ce=Bt=null,vu=!1,Fu=0,fw.current=null,e===null||e.return===null){he=1,Bu=t,Zt=null;break}t:{var r=i,o=e.return,l=e,c=t;if(t=De,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=z1(o);if(g!==null){g.flags&=-257,B1(g,o,l,r,t),g.mode&1&&O1(r,h,t),t=g,c=h;var v=t.updateQueue;if(v===null){var A=new Set;A.add(c),t.updateQueue=A}else v.add(c);break t}else{if(!(t&1)){O1(r,h,t),vw();break t}c=Error(N(426))}}else if(Lt&&l.mode&1){var E=z1(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),B1(E,o,l,r,t),Z0(Eh(c,l));break t}}r=c=Eh(c,l),he!==4&&(he=2),Su===null?Su=[r]:Su.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,t&=-t,r.lanes|=t;var m=bb(r,c,t);M1(r,m);break t;case 1:l=c;var y=r.type,w=r.stateNode;if(!(r.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(_o===null||!_o.has(w)))){r.flags|=65536,t&=-t,r.lanes|=t;var x=xb(r,l,t);M1(r,x);break t}}r=r.return}while(r!==null)}qb(e)}catch(C){t=C,Zt===e&&e!==null&&(Zt=e=e.return);continue}break}while(!0)}function Vb(){var i=yg.current;return yg.current=mg,i===null?mg:i}function vw(){(he===0||he===3||he===2)&&(he=4),we===null||!(dl&268435455)&&!(lm&268435455)||Pr(we,De)}function Sg(i,t){var e=ut;ut|=2;var n=Vb();(we!==i||De!==t)&&(Ss=null,al(i,t));do try{Bk();break}catch(s){Bb(i,s)}while(!0);if(tw(),ut=e,yg.current=n,Zt!==null)throw Error(N(261));return we=null,De=0,he}function Bk(){for(;Zt!==null;)Ub(Zt)}function Vk(){for(;Zt!==null&&!uT();)Ub(Zt)}function Ub(i){var t=jb(i.alternate,i,Bn);i.memoizedProps=i.pendingProps,t===null?qb(i):Zt=t,fw.current=null}function qb(i){var t=i;do{var e=t.alternate;if(i=t.return,t.flags&32768){if(e=Nk(e,t),e!==null){e.flags&=32767,Zt=e;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{he=6,Zt=null;return}}else if(e=Dk(e,t,Bn),e!==null){Zt=e;return}if(t=t.sibling,t!==null){Zt=t;return}Zt=t=i}while(t!==null);he===0&&(he=5)}function Go(i,t,e){var n=wt,s=hi.transition;try{hi.transition=null,wt=1,Uk(i,t,e,n)}finally{hi.transition=s,wt=n}return null}function Uk(i,t,e,n){do ec();while(Eo!==null);if(ut&6)throw Error(N(327));e=i.finishedWork;var s=i.finishedLanes;if(e===null)return null;if(i.finishedWork=null,i.finishedLanes=0,e===i.current)throw Error(N(177));i.callbackNode=null,i.callbackPriority=0;var r=e.lanes|e.childLanes;if(AT(i,r),i===we&&(Zt=we=null,De=0),!(e.subtreeFlags&2064)&&!(e.flags&2064)||Xf||(Xf=!0,Wb(eg,function(){return ec(),null})),r=(e.flags&15990)!==0,e.subtreeFlags&15990||r){r=hi.transition,hi.transition=null;var o=wt;wt=1;var l=ut;ut|=4,fw.current=null,Ik(i,e),Fb(e,i),ak(By),ig=!!zy,By=zy=null,i.current=e,Fk(e),dT(),ut=l,wt=o,hi.transition=r}else i.current=e;if(Xf&&(Xf=!1,Eo=i,wg=s),r=i.pendingLanes,r===0&&(_o=null),gT(e.stateNode),vn(i,Gt()),t!==null)for(n=i.onRecoverableError,e=0;e<t.length;e++)s=t[e],n(s.value,{componentStack:s.stack,digest:s.digest});if(vg)throw vg=!1,i=rv,rv=null,i;return wg&1&&i.tag!==0&&ec(),r=i.pendingLanes,r&1?i===ov?Au++:(Au=0,ov=i):Au=0,qo(),null}function ec(){if(Eo!==null){var i=bA(wg),t=hi.transition,e=wt;try{if(hi.transition=null,wt=16>i?16:i,Eo===null)var n=!1;else{if(i=Eo,Eo=null,wg=0,ut&6)throw Error(N(331));var s=ut;for(ut|=4,H=i.current;H!==null;){var r=H,o=r.child;if(H.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(H=h;H!==null;){var u=H;switch(u.tag){case 0:case 11:case 15:wu(8,u,r)}var d=u.child;if(d!==null)d.return=u,H=d;else for(;H!==null;){u=H;var f=u.sibling,g=u.return;if(Nb(u),u===h){H=null;break}if(f!==null){f.return=g,H=f;break}H=g}}}var v=r.alternate;if(v!==null){var A=v.child;if(A!==null){v.child=null;do{var E=A.sibling;A.sibling=null,A=E}while(A!==null)}}H=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,H=o;else t:for(;H!==null;){if(r=H,r.flags&2048)switch(r.tag){case 0:case 11:case 15:wu(9,r,r.return)}var m=r.sibling;if(m!==null){m.return=r.return,H=m;break t}H=r.return}}var y=i.current;for(H=y;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else t:for(o=y;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:am(9,l)}}catch(C){qt(l,l.return,C)}if(l===o){H=null;break t}var x=l.sibling;if(x!==null){x.return=l.return,H=x;break t}H=l.return}}if(ut=s,qo(),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot($g,i)}catch{}n=!0}return n}finally{wt=e,hi.transition=t}}return!1}function Z1(i,t,e){t=Eh(e,t),t=bb(i,t,1),i=Ro(i,t,1),t=nn(),i!==null&&(bf(i,1,t),vn(i,t))}function qt(i,t,e){if(i.tag===3)Z1(i,i,e);else for(;t!==null;){if(t.tag===3){Z1(t,i,e);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_o===null||!_o.has(n))){i=Eh(e,i),i=xb(t,i,1),t=Ro(t,i,1),i=nn(),t!==null&&(bf(t,1,i),vn(t,i));break}}t=t.return}}function qk(i,t,e){var n=i.pingCache;n!==null&&n.delete(t),t=nn(),i.pingedLanes|=i.suspendedLanes&e,we===i&&(De&e)===e&&(he===4||he===3&&(De&130023424)===De&&500>Gt()-gw?al(i,0):pw|=e),vn(i,t)}function Hb(i,t){t===0&&(i.mode&1?(t=zf,zf<<=1,!(zf&130023424)&&(zf=4194304)):t=1);var e=nn();i=mr(i,t),i!==null&&(bf(i,t,e),vn(i,e))}function Hk(i){var t=i.memoizedState,e=0;t!==null&&(e=t.retryLane),Hb(i,e)}function jk(i,t){var e=0;switch(i.tag){case 13:var n=i.stateNode,s=i.memoizedState;s!==null&&(e=s.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(t),Hb(i,e)}var jb;jb=function(i,t,e){if(i!==null)if(i.memoizedProps!==t.pendingProps||mn.current)gn=!0;else{if(!(i.lanes&e)&&!(t.flags&128))return gn=!1,Mk(i,t,e);gn=!!(i.flags&131072)}else gn=!1,Lt&&t.flags&1048576&&XA(t,hg,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;vp(i,t),i=t.pendingProps;var s=Sh(t,He.current);tc(t,e),s=lw(null,t,n,i,s,e);var r=cw();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yn(n)?(r=!0,lg(t)):r=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,iw(t),s.updater=om,t.stateNode=s,s._reactInternals=t,Xy(t,n,i,e),t=Jy(null,t,n,!0,r,e)):(t.tag=0,Lt&&r&&Q0(t),tn(null,t,s,e),t=t.child),t;case 16:n=t.elementType;t:{switch(vp(i,t),i=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=Gk(n),i=vi(n,i),s){case 0:t=Qy(null,t,n,i,e);break t;case 1:t=q1(null,t,n,i,e);break t;case 11:t=V1(null,t,n,i,e);break t;case 14:t=U1(null,t,n,vi(n.type,i),e);break t}throw Error(N(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vi(n,s),Qy(i,t,n,s,e);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vi(n,s),q1(i,t,n,s,e);case 3:t:{if(kb(t),i===null)throw Error(N(387));n=t.pendingProps,r=t.memoizedState,s=r.element,tb(i,t),fg(t,n,null,e);var o=t.memoizedState;if(n=o.element,r.isDehydrated)if(r={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=r,t.memoizedState=r,t.flags&256){s=Eh(Error(N(423)),t),t=H1(i,t,n,e,s);break t}else if(n!==s){s=Eh(Error(N(424)),t),t=H1(i,t,n,e,s);break t}else for(qn=Po(t.stateNode.containerInfo.firstChild),Hn=t,Lt=!0,_i=null,e=ZA(t,null,n,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling;else{if(Ah(),n===s){t=yr(i,t,e);break t}tn(i,t,n,e)}t=t.child}return t;case 5:return eb(t),i===null&&Wy(t),n=t.type,s=t.pendingProps,r=i!==null?i.memoizedProps:null,o=s.children,Vy(n,s)?o=null:r!==null&&Vy(n,r)&&(t.flags|=32),Tb(i,t),tn(i,t,o,e),t.child;case 6:return i===null&&Wy(t),null;case 13:return Pb(i,t,e);case 4:return sw(t,t.stateNode.containerInfo),n=t.pendingProps,i===null?t.child=bh(t,null,n,e):tn(i,t,n,e),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vi(n,s),V1(i,t,n,s,e);case 7:return tn(i,t,t.pendingProps,e),t.child;case 8:return tn(i,t,t.pendingProps.children,e),t.child;case 12:return tn(i,t,t.pendingProps.children,e),t.child;case 10:t:{if(n=t.type._context,s=t.pendingProps,r=t.memoizedProps,o=s.value,Ct(ug,n._currentValue),n._currentValue=o,r!==null)if(Li(r.value,o)){if(r.children===s.children&&!mn.current){t=yr(i,t,e);break t}}else for(r=t.child,r!==null&&(r.return=t);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(r.tag===1){c=ur(-1,e&-e),c.tag=2;var h=r.updateQueue;if(h!==null){h=h.shared;var u=h.pending;u===null?c.next=c:(c.next=u.next,u.next=c),h.pending=c}}r.lanes|=e,c=r.alternate,c!==null&&(c.lanes|=e),Gy(r.return,e,t),l.lanes|=e;break}c=c.next}}else if(r.tag===10)o=r.type===t.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(N(341));o.lanes|=e,l=o.alternate,l!==null&&(l.lanes|=e),Gy(o,e,t),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===t){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}tn(i,t,s.children,e),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,tc(t,e),s=di(s),n=n(s),t.flags|=1,tn(i,t,n,e),t.child;case 14:return n=t.type,s=vi(n,t.pendingProps),s=vi(n.type,s),U1(i,t,n,s,e);case 15:return Eb(i,t,t.type,t.pendingProps,e);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:vi(n,s),vp(i,t),t.tag=1,yn(n)?(i=!0,lg(t)):i=!1,tc(t,e),Ab(t,n,s),Xy(t,n,s,e),Jy(null,t,n,!0,i,e);case 19:return Rb(i,t,e);case 22:return Cb(i,t,e)}throw Error(N(156,t.tag))};function Wb(i,t){return vA(i,t)}function Wk(i,t,e,n){this.tag=i,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(i,t,e,n){return new Wk(i,t,e,n)}function ww(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Gk(i){if(typeof i=="function")return ww(i)?1:0;if(i!=null){if(i=i.$$typeof,i===z0)return 11;if(i===B0)return 14}return 2}function Do(i,t){var e=i.alternate;return e===null?(e=ci(i.tag,t,i.key,i.mode),e.elementType=i.elementType,e.type=i.type,e.stateNode=i.stateNode,e.alternate=i,i.alternate=e):(e.pendingProps=t,e.type=i.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=i.flags&14680064,e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,t=i.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=i.sibling,e.index=i.index,e.ref=i.ref,e}function Ap(i,t,e,n,s,r){var o=2;if(n=i,typeof i=="function")ww(i)&&(o=1);else if(typeof i=="string")o=5;else t:switch(i){case Il:return ll(e.children,s,r,t);case O0:o=8,s|=8;break;case vy:return i=ci(12,e,t,s|2),i.elementType=vy,i.lanes=r,i;case wy:return i=ci(13,e,t,s),i.elementType=wy,i.lanes=r,i;case Sy:return i=ci(19,e,t,s),i.elementType=Sy,i.lanes=r,i;case eA:return cm(e,s,r,t);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case $S:o=10;break t;case tA:o=9;break t;case z0:o=11;break t;case B0:o=14;break t;case Cr:o=16,n=null;break t}throw Error(N(130,i==null?i:typeof i,""))}return t=ci(o,e,t,s),t.elementType=i,t.type=n,t.lanes=r,t}function ll(i,t,e,n){return i=ci(7,i,n,t),i.lanes=e,i}function cm(i,t,e,n){return i=ci(22,i,n,t),i.elementType=eA,i.lanes=e,i.stateNode={isHidden:!1},i}function $m(i,t,e){return i=ci(6,i,null,t),i.lanes=e,i}function ty(i,t,e){return t=ci(4,i.children!==null?i.children:[],i.key,t),t.lanes=e,t.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},t}function Kk(i,t,e,n,s){this.tag=t,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lm(0),this.expirationTimes=Lm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lm(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sw(i,t,e,n,s,r,o,l,c){return i=new Kk(i,t,e,l,c),t===1?(t=1,r===!0&&(t|=8)):t=0,r=ci(3,null,null,t),i.current=r,r.stateNode=i,r.memoizedState={element:n,isDehydrated:e,cache:null,transitions:null,pendingSuspenseBoundaries:null},iw(r),i}function Xk(i,t,e){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ll,key:n==null?null:""+n,children:i,containerInfo:t,implementation:e}}function Gb(i){if(!i)return Io;i=i._reactInternals;t:{if(wl(i)!==i||i.tag!==1)throw Error(N(170));var t=i;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(yn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(N(171))}if(i.tag===1){var e=i.type;if(yn(e))return GA(i,e,t)}return t}function Kb(i,t,e,n,s,r,o,l,c){return i=Sw(e,n,!0,i,s,r,o,l,c),i.context=Gb(null),e=i.current,n=nn(),s=Mo(e),r=ur(n,s),r.callback=t??null,Ro(e,r,s),i.current.lanes=s,bf(i,s,n),vn(i,n),i}function hm(i,t,e,n){var s=t.current,r=nn(),o=Mo(s);return e=Gb(e),t.context===null?t.context=e:t.pendingContext=e,t=ur(r,o),t.payload={element:i},n=n===void 0?null:n,n!==null&&(t.callback=n),i=Ro(s,t,o),i!==null&&(Ni(i,s,o,r),gp(i,s,o)),o}function Ag(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function $1(i,t){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var e=i.retryLane;i.retryLane=e!==0&&e<t?e:t}}function Aw(i,t){$1(i,t),(i=i.alternate)&&$1(i,t)}function Yk(){return null}var Xb=typeof reportError=="function"?reportError:function(i){console.error(i)};function bw(i){this._internalRoot=i}um.prototype.render=bw.prototype.render=function(i){var t=this._internalRoot;if(t===null)throw Error(N(409));hm(i,t,null,null)};um.prototype.unmount=bw.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var t=i.containerInfo;fl(function(){hm(null,i,null,null)}),t[gr]=null}};function um(i){this._internalRoot=i}um.prototype.unstable_scheduleHydration=function(i){if(i){var t=CA();i={blockedOn:null,target:i,priority:t};for(var e=0;e<kr.length&&t!==0&&t<kr[e].priority;e++);kr.splice(e,0,i),e===0&&kA(i)}};function xw(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function dm(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function tS(){}function Qk(i,t,e,n,s){if(s){if(typeof n=="function"){var r=n;n=function(){var h=Ag(o);r.call(h)}}var o=Kb(t,n,i,0,null,!1,!1,"",tS);return i._reactRootContainer=o,i[gr]=o.current,Mu(i.nodeType===8?i.parentNode:i),fl(),o}for(;s=i.lastChild;)i.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var h=Ag(c);l.call(h)}}var c=Sw(i,0,!1,null,null,!1,!1,"",tS);return i._reactRootContainer=c,i[gr]=c.current,Mu(i.nodeType===8?i.parentNode:i),fl(function(){hm(t,c,e,n)}),c}function fm(i,t,e,n,s){var r=e._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=Ag(o);l.call(c)}}hm(t,o,i,s)}else o=Qk(e,t,i,s,n);return Ag(o)}xA=function(i){switch(i.tag){case 3:var t=i.stateNode;if(t.current.memoizedState.isDehydrated){var e=Wh(t.pendingLanes);e!==0&&(q0(t,e|1),vn(t,Gt()),!(ut&6)&&(Ch=Gt()+500,qo()))}break;case 13:fl(function(){var n=mr(i,1);if(n!==null){var s=nn();Ni(n,i,1,s)}}),Aw(i,1)}};H0=function(i){if(i.tag===13){var t=mr(i,134217728);if(t!==null){var e=nn();Ni(t,i,134217728,e)}Aw(i,134217728)}};EA=function(i){if(i.tag===13){var t=Mo(i),e=mr(i,t);if(e!==null){var n=nn();Ni(e,i,t,n)}Aw(i,t)}};CA=function(){return wt};TA=function(i,t){var e=wt;try{return wt=i,t()}finally{wt=e}};_y=function(i,t,e){switch(t){case"input":if(xy(i,e),t=e.name,e.type==="radio"&&t!=null){for(e=i;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<e.length;t++){var n=e[t];if(n!==i&&n.form===i.form){var s=im(n);if(!s)throw Error(N(90));iA(n),xy(n,s)}}}break;case"textarea":rA(i,e);break;case"select":t=e.value,t!=null&&Ql(i,!!e.multiple,t,!1)}};dA=mw;fA=fl;var Jk={usingClientEntryPoint:!1,Events:[Ef,Bl,im,hA,uA,mw]},Fh={findFiberByHostInstance:$o,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Zk={bundleType:Fh.bundleType,version:Fh.version,rendererPackageName:Fh.rendererPackageName,rendererConfig:Fh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sr.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=mA(i),i===null?null:i.stateNode},findFiberByHostInstance:Fh.findFiberByHostInstance||Yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yf.isDisabled&&Yf.supportsFiber)try{$g=Yf.inject(Zk),us=Yf}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jk;Kn.createPortal=function(i,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xw(t))throw Error(N(200));return Xk(i,t,null,e)};Kn.createRoot=function(i,t){if(!xw(i))throw Error(N(299));var e=!1,n="",s=Xb;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Sw(i,1,!1,null,null,e,!1,n,s),i[gr]=t.current,Mu(i.nodeType===8?i.parentNode:i),new bw(t)};Kn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var t=i._reactInternals;if(t===void 0)throw typeof i.render=="function"?Error(N(188)):(i=Object.keys(i).join(","),Error(N(268,i)));return i=mA(t),i=i===null?null:i.stateNode,i};Kn.flushSync=function(i){return fl(i)};Kn.hydrate=function(i,t,e){if(!dm(t))throw Error(N(200));return fm(null,i,t,!0,e)};Kn.hydrateRoot=function(i,t,e){if(!xw(i))throw Error(N(405));var n=e!=null&&e.hydratedSources||null,s=!1,r="",o=Xb;if(e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),t=Kb(t,null,i,1,e??null,s,!1,r,o),i[gr]=t.current,Mu(i),n)for(i=0;i<n.length;i++)e=n[i],s=e._getVersion,s=s(e._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[e,s]:t.mutableSourceEagerHydrationData.push(e,s);return new um(t)};Kn.render=function(i,t,e){if(!dm(t))throw Error(N(200));return fm(null,i,t,!1,e)};Kn.unmountComponentAtNode=function(i){if(!dm(i))throw Error(N(40));return i._reactRootContainer?(fl(function(){fm(null,null,i,!1,function(){i._reactRootContainer=null,i[gr]=null})}),!0):!1};Kn.unstable_batchedUpdates=mw;Kn.unstable_renderSubtreeIntoContainer=function(i,t,e,n){if(!dm(e))throw Error(N(200));if(i==null||i._reactInternals===void 0)throw Error(N(38));return fm(i,t,e,!1,n)};Kn.version="18.3.1-next-f1338f8080-20240426";function Yb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yb)}catch(i){console.error(i)}}Yb(),YS.exports=Kn;var Tf=YS.exports,Ew,eS=Tf;Ew=eS.createRoot,eS.hydrateRoot;const $k="modulepreload",tP=function(i){return"/react-pdf-highlighter/"+i},nS={},eP=function(t,e,n){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(e.map(c=>{if(c=tP(c),c in nS)return;nS[c]=!0;const h=c.endsWith(".css"),u=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":$k,h||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),h)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};function iS(i,t,e){var n,s,r;e===void 0&&(e={});var o=(n=e.isImmediate)!=null&&n,l=(s=e.callback)!=null&&s,c=e.maxWait,h=Date.now(),u=[];function d(){if(c!==void 0){var g=Date.now()-h;if(g+t>=c)return c-g}return t}var f=function(){var g=[].slice.call(arguments),v=this;return new Promise(function(A,E){var m=o&&r===void 0;if(r!==void 0&&clearTimeout(r),r=setTimeout(function(){if(r=void 0,h=Date.now(),!o){var w=i.apply(v,g);l&&l(w),u.forEach(function(x){return(0,x.resolve)(w)}),u=[]}},d()),m){var y=i.apply(v,g);return l&&l(y),A(y)}u.push({resolve:A,reject:E})})};return f.cancel=function(g){r!==void 0&&clearTimeout(r),u.forEach(function(v){return(0,v.reject)(g)}),u=[]},f}const cv=(i,{width:t,height:e})=>({x1:i.left,y1:i.top,x2:i.left+i.width,y2:i.top+i.height,width:t,height:e,pageNumber:i.pageNumber}),nP=(i,t)=>{const[e,n,s,r]=t.convertToViewportRectangle([i.x1,i.y1,i.x2,i.y2]);return{left:Math.min(e,s),top:Math.min(n,r),width:Math.abs(s-e),height:Math.abs(n-r),pageNumber:i.pageNumber}},ey=(i,t,e=!1)=>{const{width:n,height:s}=t;if(e)return nP(i,t);if(i.x1===void 0)throw new Error("You are using old position format, please update");const r=n*i.x1/i.width,o=s*i.y1/i.height,l=n*i.x2/i.width,c=s*i.y2/i.height;return{left:r,top:o,width:l-r,height:c-o,pageNumber:i.pageNumber}},Qb=i=>i.ownerDocument||document,Cw=i=>Qb(i).defaultView||window,No=i=>i!=null&&(i instanceof HTMLElement||i instanceof Cw(i).HTMLElement),iP=i=>i instanceof HTMLCanvasElement||i instanceof Cw(i).HTMLCanvasElement,bu=i=>{const t=i.closest(".page");if(!No(t))return null;const e=Number(t.dataset.pageNumber);return{node:t,number:e}},sP=i=>{const t=i.startContainer.parentElement,e=i.endContainer.parentElement;if(!No(t)||!No(e))return[];const n=bu(t),s=bu(e);if(!(n!=null&&n.number)||!(s!=null&&s.number))return[];if(n.number===s.number)return[n];if(n.number===s.number-1)return[n,s];const r=[];let o=n.number;const l=n.node.ownerDocument;for(;o<=s.number;){const c=bu(l.querySelector(`[data-page-number='${o}'`));c&&r.push(c),o++}return r},rP=(i,t,e)=>{const n=Qb(i);let s=i.querySelector(e);return s||(s=n.createElement("div"),s.className=t,i.appendChild(s)),s},oP=(i,t)=>{const{left:e,top:n,width:s,height:r}=t,o=i?i.ownerDocument:null,l=o==null?void 0:o.createElement("canvas");if(!l||!iP(l))return"";l.width=s,l.height=r;const c=l.getContext("2d");if(!c||!i)return"";const h=window.devicePixelRatio;return c.drawImage(i,e*h,n*h,s*h,r*h,0,0,s,r),l.toDataURL("image/png")},aP=i=>{const t=Array.from(i).map(u=>{const{left:d,top:f,width:g,height:v,pageNumber:A}=u,E=d,m=d+g,y=f,w=f+v;return{X0:E,X1:m,Y0:y,Y1:w,pageNumber:A}});let e=Number.MAX_SAFE_INTEGER;for(const u of t)e=Math.min(e,u.pageNumber??e);const n=t.filter(u=>(u.X0>0||u.X1>0||u.Y0>0||u.Y1>0)&&u.pageNumber===e),s=n.reduce((u,d)=>({X0:Math.min(u.X0,d.X0),X1:Math.max(u.X1,d.X1),Y0:Math.min(u.Y0,d.Y0),Y1:Math.max(u.Y1,d.Y1),pageNumber:e}),n[0]),{X0:r,X1:o,Y0:l,Y1:c,pageNumber:h}=s;return{left:r,top:l,width:o-r,height:c-l,pageNumber:h}},lP=i=>i.sort((t,e)=>{const n=(t.pageNumber||0)*t.top-(e.pageNumber||0)*e.top;return n===0?t.left-e.left:n}),cP=(i,t)=>i.pageNumber===t.pageNumber&&i.left<=t.left&&t.left<=i.left+i.width,hP=(i,t,e=5)=>i.pageNumber===t.pageNumber&&Math.abs(i.top-t.top)<e&&Math.abs(i.height-t.height)<e,uP=(i,t)=>i.pageNumber===t.pageNumber&&i.top>t.top&&i.left>t.left&&i.top+i.height<t.top+t.height&&i.left+i.width<t.left+t.width,dP=(i,t,e=10)=>{const n=i.left+i.width,s=t.left+t.width;return i.pageNumber===t.pageNumber&&i.left<=t.left&&n<=s&&t.left-n<=e},sS=(i,t)=>{i.width=Math.max(t.width-i.left+t.left,i.width)},fP=i=>{const t=lP(i),e=new Set,n=t.filter(r=>t.every(o=>!uP(r,o)));let s=0;for(;s<=2;){for(const r of n)for(const o of n)r===o||e.has(r)||e.has(o)||hP(r,o)&&(cP(r,o)&&(sS(r,o),r.height=Math.max(r.height,o.height),e.add(o)),dP(r,o)&&(sS(r,o),e.add(o)));s+=1}return n.filter(r=>!e.has(r))},pP=(i,t)=>!(i.top<t.top||i.bottom>t.bottom||i.right>t.right||i.left<t.left),gP=(i,t,e=!0)=>{const n=Array.from(i.getClientRects()),s=[];for(const r of n)for(const o of t){const l=o.node.getBoundingClientRect();if(pP(r,l)&&r.width>0&&r.height>0&&r.width<l.width&&r.height<l.height){const c={top:r.top+o.node.scrollTop-l.top,left:r.left+o.node.scrollLeft-l.left,width:r.width,height:r.height,pageNumber:o.number};s.push(c)}}return e?fP(s):s},mP="_container_12oj9_1",yP="_highlightLayer_12oj9_8",vP="_tipContainer_12oj9_14",wP="_disableSelection_12oj9_19",ny={container:mP,highlightLayer:yP,tipContainer:vP,disableSelection:wP};function SP({highlightsByPage:i,scaledPositionToViewport:t,pageNumber:e,scrolledToHighlightId:n,highlightTransform:s,tip:r,hideTipAndSelection:o,viewer:l,screenshot:c,showTip:h,setTip:u}){const d=i[String(e)]||[];return I.jsx("div",{children:d.map((f,g)=>{const v={...f,position:t(f.position)};r&&r.highlight.id===String(f.id)&&h(r.highlight,r.callback(v));const A=n===f.id;return s(v,g,(E,m)=>{u({highlight:E,callback:m}),h(E,m(E))},o,E=>{const m=l.getPageView((E.pageNumber||Number.parseInt(e))-1).viewport;return cv(E,m)},E=>c(E,Number.parseInt(e)),A)})})}const AP="_mouseSelection_1p43j_1",bP={mouseSelection:AP},rS=(i,t)=>({left:Math.min(t.x,i.x),top:Math.min(t.y,i.y),width:Math.abs(t.x-i.x),height:Math.abs(t.y-i.y)}),xP=i=>i.width>=1&&i.height>=1;function EP({onSelection:i,onDragStart:t,onDragEnd:e,shouldStart:n,onChange:s}){const[r,o]=nt.useState(!1),[l,c]=nt.useState(null),[h,u]=nt.useState(null),d=nt.useRef(null),f=nt.useRef(l),g=nt.useRef(r);nt.useEffect(()=>{f.current=l},[l]),nt.useEffect(()=>{g.current=r},[r]);const v=nt.useCallback(()=>{e(),c(null),u(null),o(!1)},[e]);return nt.useEffect(()=>{s(!!(l&&h))},[l,h,s]),nt.useEffect(()=>{const A=d.current;if(!A)return;const E=A.parentElement;if(!E||!No(E))return;const m=(x,C)=>{const T=E.getBoundingClientRect();return{x:x-T.left+E.scrollLeft,y:C-T.top+E.scrollTop-window.scrollY}},y=x=>{!f.current||g.current||u(m(x.pageX,x.pageY))},w=x=>{if(!n(x)){v();return}const C=x.target;if(!(C instanceof Element)||!No(C))return;t(),c(m(x.pageX,x.pageY)),u(null),o(!1);const T=P=>{var F;(F=P.currentTarget)==null||F.removeEventListener("mouseup",T);const _=f.current;if(!_||!(P instanceof MouseEvent))return;const R=m(P.pageX,P.pageY),D=rS(_,R);if(!(P.target instanceof Element)||!No(P.target)||!E.contains(P.target)||!xP(D)){v();return}u(R),o(!0),i(C,D,v),e()},k=E.ownerDocument;k!=null&&k.body&&k.body.addEventListener("mouseup",T)};return E.addEventListener("mousemove",y),E.addEventListener("mousedown",w),()=>{E.removeEventListener("mousemove",y),E.removeEventListener("mousedown",w)}},[n,t,e,i,v]),I.jsx("div",{ref:d,children:l&&h&&I.jsx("div",{className:bP.mouseSelection,style:rS(l,h)})})}const CP="_tipContainer_f56kr_1",TP={tipContainer:CP};function kP(i,t,e){return Math.min(Math.max(i,t),e)}function PP({children:i,style:t,scrollTop:e,pageBoundingRect:n}){const[s,r]=nt.useState(0),[o,l]=nt.useState(0),c=nt.useRef(null),h=nt.useCallback(()=>{if(!c.current)return;const{offsetHeight:E,offsetWidth:m}=c.current;r(E),l(m)},[]);nt.useEffect(()=>{setTimeout(h,0)},[h]);const u=o===0&&s===0,d=t.top-s-5<e,f=d?t.bottom+5:t.top-s-5,g=kP(t.left-o/2,0,n.width-o),v=nt.useCallback(()=>{l(0),r(0),setTimeout(h,0)},[h]),A=vh.Children.map(i,E=>E!=null&&nt.isValidElement(E)?vh.cloneElement(E,{onUpdate:v,popup:{position:d?"below":"above"}}):E);return I.jsx("div",{id:"PdfHighlighter__tip-container",className:TP.tipContainer,style:{visibility:u?"hidden":"visible",top:f,left:g},ref:c,children:A})}const oS="empty-id";class Jb extends nt.PureComponent{constructor(e){super(e);M(this,"state",{ghostHighlight:null,isCollapsed:!0,range:null,scrolledToHighlightId:oS,isAreaSelectionInProgress:!1,tip:null,tipPosition:null,tipChildren:null});M(this,"viewer");M(this,"resizeObserver",null);M(this,"containerNode",null);M(this,"containerNodeRef");M(this,"highlightRoots",{});M(this,"unsubscribe",()=>{});M(this,"attachRef",e=>{var s;const{resizeObserver:n}=this;if(this.containerNode=this.containerNodeRef.current,this.unsubscribe(),this.containerNode){const{ownerDocument:r}=this.containerNode;e.on("textlayerrendered",this.onTextLayerRendered),e.on("pagesinit",this.onDocumentReady),r.addEventListener("selectionchange",this.onSelectionChange),r.addEventListener("keydown",this.handleKeyDown),(s=r.defaultView)==null||s.addEventListener("resize",this.debouncedScaleValue),n&&n.observe(this.containerNode),this.unsubscribe=()=>{var o;e.off("pagesinit",this.onDocumentReady),e.off("textlayerrendered",this.onTextLayerRendered),r.removeEventListener("selectionchange",this.onSelectionChange),r.removeEventListener("keydown",this.handleKeyDown),(o=r.defaultView)==null||o.removeEventListener("resize",this.debouncedScaleValue),n&&n.disconnect()}}});M(this,"hideTipAndSelection",()=>{this.setState({tipPosition:null,tipChildren:null}),this.setState({ghostHighlight:null,tip:null},()=>this.renderHighlightLayers())});M(this,"renderTip",()=>{const{tipPosition:e,tipChildren:n}=this.state;if(!e)return null;const{boundingRect:s,pageNumber:r}=e,o={node:this.viewer.getPageView((s.pageNumber||r)-1).div,pageNumber:s.pageNumber||r},l=o.node.getBoundingClientRect(),c={bottom:l.bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width,x:l.x,y:l.y,pageNumber:o.pageNumber};return I.jsx(PP,{scrollTop:this.viewer.container.scrollTop,pageBoundingRect:c,style:{left:o.node.offsetLeft+s.left+s.width/2,top:s.top+o.node.offsetTop,bottom:s.top+o.node.offsetTop+s.height},children:n})});M(this,"onTextLayerRendered",()=>{this.renderHighlightLayers()});M(this,"scrollTo",e=>{const{pageNumber:n,boundingRect:s,usePdfCoordinates:r}=e.position;this.viewer.container.removeEventListener("scroll",this.onScroll);const o=this.viewer.getPageView(n-1).viewport;this.viewer.scrollPageIntoView({pageNumber:n,destArray:[null,{name:"XYZ"},...o.convertToPdfPoint(0,ey(s,o,r).top-10),0]}),this.setState({scrolledToHighlightId:e.id},()=>this.renderHighlightLayers()),setTimeout(()=>{this.viewer.container.addEventListener("scroll",this.onScroll)},100)});M(this,"onDocumentReady",()=>{const{scrollRef:e}=this.props;this.handleScaleValue(),e(this.scrollTo)});M(this,"onSelectionChange",()=>{const e=this.containerNode;if(!e)return;const n=Cw(e).getSelection();if(!n)return;const s=n.rangeCount>0?n.getRangeAt(0):null;if(n.isCollapsed){this.setState({isCollapsed:!0});return}!s||!e||!e.contains(s.commonAncestorContainer)||(this.setState({isCollapsed:!1,range:s}),this.debouncedAfterSelection())});M(this,"onScroll",()=>{const{onScrollChange:e}=this.props;e(),this.setState({scrolledToHighlightId:oS},()=>this.renderHighlightLayers()),this.viewer.container.removeEventListener("scroll",this.onScroll)});M(this,"onMouseDown",e=>{!(e.target instanceof Element)||!No(e.target)||e.target.closest("#PdfHighlighter__tip-container")||this.hideTipAndSelection()});M(this,"handleKeyDown",e=>{e.code==="Escape"&&this.hideTipAndSelection()});M(this,"afterSelection",()=>{const{onSelectionFinished:e}=this.props,{isCollapsed:n,range:s}=this.state;if(!s||n)return;const r=sP(s);if(!r||r.length===0)return;const o=gP(s,r);if(o.length===0)return;const c={boundingRect:aP(o),rects:o,pageNumber:r[0].number},h={text:s.toString()},u=this.viewportPositionToScaled(c);this.setTip(c,e(u,h,()=>this.hideTipAndSelection(),()=>this.setState({ghostHighlight:{position:u}},()=>this.renderHighlightLayers())))});M(this,"debouncedAfterSelection",iS(this.afterSelection,500));M(this,"handleScaleValue",()=>{this.viewer&&(this.viewer.currentScaleValue=this.props.pdfScaleValue)});M(this,"debouncedScaleValue",iS(this.handleScaleValue,500));typeof ResizeObserver<"u"&&(this.resizeObserver=new ResizeObserver(this.debouncedScaleValue)),this.containerNodeRef=vh.createRef()}componentDidMount(){this.init()}componentDidUpdate(e){if(e.pdfDocument!==this.props.pdfDocument){this.init();return}e.highlights!==this.props.highlights&&this.renderHighlightLayers()}async init(){const{pdfDocument:e,pdfViewerOptions:n}=this.props,s=await eP(()=>import("./pdf_viewer-DcXcnvXe.js"),[]),r=new s.EventBus,o=new s.PDFLinkService({eventBus:r,externalLinkTarget:2});if(!this.containerNodeRef.current)throw new Error("!");this.viewer=this.viewer||new s.PDFViewer({container:this.containerNodeRef.current,eventBus:r,textLayerMode:2,removePageBorders:!0,linkService:o,...n}),o.setDocument(e),o.setViewer(this.viewer),this.viewer.setDocument(e),this.attachRef(r)}componentWillUnmount(){this.unsubscribe()}findOrCreateHighlightLayer(e){const{textLayer:n}=this.viewer.getPageView(e-1)||{};return n?rP(n.div,`PdfHighlighter__highlight-layer ${ny.highlightLayer}`,".PdfHighlighter__highlight-layer"):null}groupHighlightsByPage(e){const{ghostHighlight:n}=this.state,s=[...e,n].filter(Boolean),r=new Set;for(const l of s){r.add(l.position.pageNumber);for(const c of l.position.rects)c.pageNumber&&r.add(c.pageNumber)}const o={};for(const l of r){o[l]=o[l]||[];for(const c of s){const h={...c,position:{pageNumber:l,boundingRect:c.position.boundingRect,rects:[],usePdfCoordinates:c.position.usePdfCoordinates}};let u=!1;for(const d of c.position.rects)l===(d.pageNumber||c.position.pageNumber)&&(h.position.rects.push(d),u=!0);(u||l===c.position.pageNumber)&&o[l].push(h)}}return o}showTip(e,n){const{isCollapsed:s,ghostHighlight:r,isAreaSelectionInProgress:o}=this.state;!s||r||o||this.setTip(e.position,n)}scaledPositionToViewport({pageNumber:e,boundingRect:n,rects:s,usePdfCoordinates:r}){const o=this.viewer.getPageView(e-1).viewport;return{boundingRect:ey(n,o,r),rects:(s||[]).map(l=>ey(l,o,r)),pageNumber:e}}viewportPositionToScaled({pageNumber:e,boundingRect:n,rects:s}){const r=this.viewer.getPageView(e-1).viewport;return{boundingRect:cv(n,r),rects:(s||[]).map(o=>cv(o,r)),pageNumber:e}}screenshot(e,n){const s=this.viewer.getPageView(n-1).canvas;return oP(s,e)}setTip(e,n){this.setState({tipPosition:e,tipChildren:n})}toggleTextSelection(e){this.viewer.viewer&&this.viewer.viewer.classList.toggle(ny.disableSelection,e)}render(){const{onSelectionFinished:e,enableAreaSelection:n}=this.props;return I.jsx("div",{onPointerDown:this.onMouseDown,children:I.jsxs("div",{ref:this.containerNodeRef,className:ny.container,onContextMenu:s=>s.preventDefault(),children:[I.jsx("div",{className:"pdfViewer"}),this.renderTip(),typeof n=="function"?I.jsx(EP,{onDragStart:()=>this.toggleTextSelection(!0),onDragEnd:()=>this.toggleTextSelection(!1),onChange:s=>this.setState({isAreaSelectionInProgress:s}),shouldStart:s=>n(s)&&s.target instanceof Element&&No(s.target)&&!!s.target.closest(".page"),onSelection:(s,r,o)=>{const l=bu(s);if(!l)return;const c={...r,top:r.top-l.node.offsetTop,left:r.left-l.node.offsetLeft,pageNumber:l.number},h={boundingRect:c,rects:[],pageNumber:l.number},u=this.viewportPositionToScaled(h),d=this.screenshot(c,c.pageNumber);this.setTip(h,e(u,{image:d},()=>this.hideTipAndSelection(),()=>{console.log("setting ghost highlight",u),this.setState({ghostHighlight:{position:u,content:{image:d}}},()=>{o(),this.renderHighlightLayers()})}))}}):null]})})}renderHighlightLayers(){const{pdfDocument:e}=this.props;for(let n=1;n<=e.numPages;n++){const s=this.highlightRoots[n];if(s!=null&&s.container.isConnected)this.renderHighlightLayer(s.reactRoot,n);else{const r=this.findOrCreateHighlightLayer(n);if(r){const o=Ew(r);this.highlightRoots[n]={reactRoot:o,container:r},this.renderHighlightLayer(o,n)}}}}renderHighlightLayer(e,n){const{highlightTransform:s,highlights:r}=this.props,{tip:o,scrolledToHighlightId:l}=this.state;e.render(I.jsx(SP,{highlightsByPage:this.groupHighlightsByPage(r),pageNumber:n.toString(),scrolledToHighlightId:l,highlightTransform:s,tip:o,scaledPositionToViewport:this.scaledPositionToViewport.bind(this),hideTipAndSelection:this.hideTipAndSelection.bind(this),viewer:this.viewer,screenshot:this.screenshot.bind(this),showTip:this.showTip.bind(this),setTip:c=>{this.setState({tip:c})}}))}}M(Jb,"defaultProps",{pdfScaleValue:"auto"});const RP="_compact_1um8o_1",_P="_card_1um8o_10",aS={compact:RP,card:_P};class MP extends nt.Component{constructor(){super(...arguments);M(this,"state",{compact:!0,text:"",emoji:""})}componentDidUpdate(e,n){const{onUpdate:s}=this.props;s&&this.state.compact!==n.compact&&s()}render(){const{onConfirm:e,onOpen:n}=this.props,{compact:s,text:r,emoji:o}=this.state;return I.jsx("div",{children:s?I.jsx("div",{className:aS.compact,onClick:()=>{n(),this.setState({compact:!1})},children:"Add highlight"}):I.jsxs("form",{className:aS.card,onSubmit:l=>{l.preventDefault(),e({text:r,emoji:o})},children:[I.jsxs("div",{children:[I.jsx("textarea",{placeholder:"Your comment",autoFocus:!0,value:r,onChange:l=>this.setState({text:l.target.value}),ref:l=>{l&&l.focus()}}),I.jsx("div",{children:["","","","","",""].map(l=>I.jsxs("label",{children:[I.jsx("input",{checked:o===l,type:"radio",name:"emoji",value:l,onChange:c=>this.setState({emoji:c.target.value})}),l]},l))})]}),I.jsx("div",{children:I.jsx("input",{type:"submit",value:"Save"})})]})})}}const DP="_highlight_3l4zw_1",NP="_emoji_3l4zw_5",LP="_parts_3l4zw_12",IP="_part_3l4zw_12",FP="_scrolledTo_3l4zw_23",Oh={highlight:DP,emoji:NP,parts:LP,part:IP,scrolledTo:FP};function OP({position:i,onClick:t,onMouseOver:e,onMouseOut:n,comment:s,isScrolledTo:r}){const{rects:o,boundingRect:l}=i;return I.jsxs("div",{className:`Highlight ${Oh.highlight} ${r?Oh.scrolledTo:""}`,children:[s?I.jsx("div",{className:`Highlight__emoji ${Oh.emoji}`,style:{left:20,top:l.top},children:s.emoji}):null,I.jsx("div",{className:`Highlight__parts ${Oh.parts}`,children:o.map((c,h)=>I.jsx("div",{onMouseOver:e,onMouseOut:n,onClick:t,style:c,className:`Highlight__part ${Oh.part}`},h))})]})}class zP extends nt.Component{constructor(){super(...arguments);M(this,"container",null);M(this,"unsubscribe",()=>{});M(this,"onMouseMove",e=>{if(!this.container)return;const{onMoveAway:n,paddingX:s,paddingY:r}=this.props,{clientX:o,clientY:l}=e,{left:c,top:h,width:u,height:d}=this.container.getBoundingClientRect(),f=o>c-s&&o<c+u+s,g=l>h-r&&l<h+d+r;f&&g||n()});M(this,"attachRef",e=>{if(this.container=e,this.unsubscribe(),e){const{ownerDocument:n}=e;n.addEventListener("mousemove",this.onMouseMove),this.unsubscribe=()=>{n.removeEventListener("mousemove",this.onMouseMove)}}})}render(){const{onMoveAway:e,paddingX:n,paddingY:s,children:r,...o}=this.props;return I.jsx("div",{ref:this.attachRef,children:vh.cloneElement(r,o)})}}function BP({onMouseOver:i,popupContent:t,onMouseOut:e,children:n}){const[s,r]=nt.useState(!1);return I.jsx("div",{onMouseOver:()=>{r(!0),i(I.jsx(zP,{onMoveAway:()=>{s||e()},paddingX:60,paddingY:30,children:t}))},onMouseOut:()=>{r(!1)},children:n})}var pm={exports:{}},Zb={},$b={exports:{}},VP="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UP=VP,qP=UP;function tx(){}function ex(){}ex.resetWarningCache=tx;var HP=function(){function i(n,s,r,o,l,c){if(c!==qP){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function t(){return i}var e={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:t,element:i,elementType:i,instanceOf:t,node:i,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ex,resetWarningCache:tx};return e.PropTypes=e,e};$b.exports=HP();var nx=$b.exports;function ix(i){var t,e,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i))for(t=0;t<i.length;t++)i[t]&&(e=ix(i[t]))&&(n&&(n+=" "),n+=e);else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function lS(){for(var i,t,e=0,n="";e<arguments.length;)(i=arguments[e++])&&(t=ix(i))&&(n&&(n+=" "),n+=t);return n}const jP=Object.freeze(Object.defineProperty({__proto__:null,clsx:lS,default:lS},Symbol.toStringTag,{value:"Module"})),WP=kC(jP);var Ht={},gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.dontSetMe=QP;gs.findInArray=GP;gs.int=YP;gs.isFunction=KP;gs.isNum=XP;function GP(i,t){for(let e=0,n=i.length;e<n;e++)if(t.apply(t,[i[e],e,i]))return i[e]}function KP(i){return typeof i=="function"||Object.prototype.toString.call(i)==="[object Function]"}function XP(i){return typeof i=="number"&&!isNaN(i)}function YP(i){return parseInt(i,10)}function QP(i,t,e){if(i[t])return new Error("Invalid prop ".concat(t," passed to ").concat(e," - do not set this, set it on the child."))}var Sl={};Object.defineProperty(Sl,"__esModule",{value:!0});Sl.browserPrefixToKey=rx;Sl.browserPrefixToStyle=JP;Sl.default=void 0;Sl.getPrefix=sx;const iy=["Moz","Webkit","O","ms"];function sx(){var i;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const e=(i=window.document)===null||i===void 0||(i=i.documentElement)===null||i===void 0?void 0:i.style;if(!e||t in e)return"";for(let n=0;n<iy.length;n++)if(rx(t,iy[n])in e)return iy[n];return""}function rx(i,t){return t?"".concat(t).concat(ZP(i)):i}function JP(i,t){return t?"-".concat(t.toLowerCase(),"-").concat(i):i}function ZP(i){let t="",e=!0;for(let n=0;n<i.length;n++)e?(t+=i[n].toUpperCase(),e=!1):i[n]==="-"?e=!0:t+=i[n];return t}Sl.default=sx();Object.defineProperty(Ht,"__esModule",{value:!0});Ht.addClassName=lx;Ht.addEvent=eR;Ht.addUserSelectStyles=dR;Ht.createCSSTransform=lR;Ht.createSVGTransform=cR;Ht.getTouch=hR;Ht.getTouchIdentifier=uR;Ht.getTranslation=Tw;Ht.innerHeight=rR;Ht.innerWidth=oR;Ht.matchesSelector=ax;Ht.matchesSelectorAndParentsTo=tR;Ht.offsetXYFromParent=aR;Ht.outerHeight=iR;Ht.outerWidth=sR;Ht.removeClassName=cx;Ht.removeEvent=nR;Ht.removeUserSelectStyles=fR;var jn=gs,cS=$P(Sl);function ox(i){if(typeof WeakMap!="function")return null;var t=new WeakMap,e=new WeakMap;return(ox=function(n){return n?e:t})(i)}function $P(i,t){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var e=ox(t);if(e&&e.has(i))return e.get(i);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)){var o=s?Object.getOwnPropertyDescriptor(i,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=i[r]}return n.default=i,e&&e.set(i,n),n}let Qf="";function ax(i,t){return Qf||(Qf=(0,jn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(e){return(0,jn.isFunction)(i[e])})),(0,jn.isFunction)(i[Qf])?i[Qf](t):!1}function tR(i,t,e){let n=i;do{if(ax(n,t))return!0;if(n===e)return!1;n=n.parentNode}while(n);return!1}function eR(i,t,e,n){if(!i)return;const s={capture:!0,...n};i.addEventListener?i.addEventListener(t,e,s):i.attachEvent?i.attachEvent("on"+t,e):i["on"+t]=e}function nR(i,t,e,n){if(!i)return;const s={capture:!0,...n};i.removeEventListener?i.removeEventListener(t,e,s):i.detachEvent?i.detachEvent("on"+t,e):i["on"+t]=null}function iR(i){let t=i.clientHeight;const e=i.ownerDocument.defaultView.getComputedStyle(i);return t+=(0,jn.int)(e.borderTopWidth),t+=(0,jn.int)(e.borderBottomWidth),t}function sR(i){let t=i.clientWidth;const e=i.ownerDocument.defaultView.getComputedStyle(i);return t+=(0,jn.int)(e.borderLeftWidth),t+=(0,jn.int)(e.borderRightWidth),t}function rR(i){let t=i.clientHeight;const e=i.ownerDocument.defaultView.getComputedStyle(i);return t-=(0,jn.int)(e.paddingTop),t-=(0,jn.int)(e.paddingBottom),t}function oR(i){let t=i.clientWidth;const e=i.ownerDocument.defaultView.getComputedStyle(i);return t-=(0,jn.int)(e.paddingLeft),t-=(0,jn.int)(e.paddingRight),t}function aR(i,t,e){const s=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),r=(i.clientX+t.scrollLeft-s.left)/e,o=(i.clientY+t.scrollTop-s.top)/e;return{x:r,y:o}}function lR(i,t){const e=Tw(i,t,"px");return{[(0,cS.browserPrefixToKey)("transform",cS.default)]:e}}function cR(i,t){return Tw(i,t,"")}function Tw(i,t,e){let{x:n,y:s}=i,r="translate(".concat(n).concat(e,",").concat(s).concat(e,")");if(t){const o="".concat(typeof t.x=="string"?t.x:t.x+e),l="".concat(typeof t.y=="string"?t.y:t.y+e);r="translate(".concat(o,", ").concat(l,")")+r}return r}function hR(i,t){return i.targetTouches&&(0,jn.findInArray)(i.targetTouches,e=>t===e.identifier)||i.changedTouches&&(0,jn.findInArray)(i.changedTouches,e=>t===e.identifier)}function uR(i){if(i.targetTouches&&i.targetTouches[0])return i.targetTouches[0].identifier;if(i.changedTouches&&i.changedTouches[0])return i.changedTouches[0].identifier}function dR(i){if(!i)return;let t=i.getElementById("react-draggable-style-el");t||(t=i.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,i.getElementsByTagName("head")[0].appendChild(t)),i.body&&lx(i.body,"react-draggable-transparent-selection")}function fR(i){if(i)try{if(i.body&&cx(i.body,"react-draggable-transparent-selection"),i.selection)i.selection.empty();else{const t=(i.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function lx(i,t){i.classList?i.classList.add(t):i.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(i.className+=" ".concat(t))}function cx(i,t){i.classList?i.classList.remove(t):i.className=i.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var ms={};Object.defineProperty(ms,"__esModule",{value:!0});ms.canDragX=mR;ms.canDragY=yR;ms.createCoreData=wR;ms.createDraggableData=SR;ms.getBoundPosition=pR;ms.getControlPosition=vR;ms.snapToGrid=gR;var wn=gs,Gl=Ht;function pR(i,t,e){if(!i.props.bounds)return[t,e];let{bounds:n}=i.props;n=typeof n=="string"?n:AR(n);const s=kw(i);if(typeof n=="string"){const{ownerDocument:r}=s,o=r.defaultView;let l;if(n==="parent"?l=s.parentNode:l=r.querySelector(n),!(l instanceof o.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const c=l,h=o.getComputedStyle(s),u=o.getComputedStyle(c);n={left:-s.offsetLeft+(0,wn.int)(u.paddingLeft)+(0,wn.int)(h.marginLeft),top:-s.offsetTop+(0,wn.int)(u.paddingTop)+(0,wn.int)(h.marginTop),right:(0,Gl.innerWidth)(c)-(0,Gl.outerWidth)(s)-s.offsetLeft+(0,wn.int)(u.paddingRight)-(0,wn.int)(h.marginRight),bottom:(0,Gl.innerHeight)(c)-(0,Gl.outerHeight)(s)-s.offsetTop+(0,wn.int)(u.paddingBottom)-(0,wn.int)(h.marginBottom)}}return(0,wn.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,wn.isNum)(n.bottom)&&(e=Math.min(e,n.bottom)),(0,wn.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,wn.isNum)(n.top)&&(e=Math.max(e,n.top)),[t,e]}function gR(i,t,e){const n=Math.round(t/i[0])*i[0],s=Math.round(e/i[1])*i[1];return[n,s]}function mR(i){return i.props.axis==="both"||i.props.axis==="x"}function yR(i){return i.props.axis==="both"||i.props.axis==="y"}function vR(i,t,e){const n=typeof t=="number"?(0,Gl.getTouch)(i,t):null;if(typeof t=="number"&&!n)return null;const s=kw(e),r=e.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Gl.offsetXYFromParent)(n||i,r,e.props.scale)}function wR(i,t,e){const n=!(0,wn.isNum)(i.lastX),s=kw(i);return n?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:e,x:t,y:e}:{node:s,deltaX:t-i.lastX,deltaY:e-i.lastY,lastX:i.lastX,lastY:i.lastY,x:t,y:e}}function SR(i,t){const e=i.props.scale;return{node:t.node,x:i.state.x+t.deltaX/e,y:i.state.y+t.deltaY/e,deltaX:t.deltaX/e,deltaY:t.deltaY/e,lastX:i.state.x,lastY:i.state.y}}function AR(i){return{left:i.left,top:i.top,right:i.right,bottom:i.bottom}}function kw(i){const t=i.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var gm={},mm={};Object.defineProperty(mm,"__esModule",{value:!0});mm.default=bR;function bR(){}Object.defineProperty(gm,"__esModule",{value:!0});gm.default=void 0;var sy=ER(nt),an=Pw(nx),xR=Pw(Tf),Oe=Ht,br=ms,ry=gs,zh=Pw(mm);function Pw(i){return i&&i.__esModule?i:{default:i}}function hx(i){if(typeof WeakMap!="function")return null;var t=new WeakMap,e=new WeakMap;return(hx=function(n){return n?e:t})(i)}function ER(i,t){if(i&&i.__esModule)return i;if(i===null||typeof i!="object"&&typeof i!="function")return{default:i};var e=hx(t);if(e&&e.has(i))return e.get(i);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in i)if(r!=="default"&&Object.prototype.hasOwnProperty.call(i,r)){var o=s?Object.getOwnPropertyDescriptor(i,r):null;o&&(o.get||o.set)?Object.defineProperty(n,r,o):n[r]=i[r]}return n.default=i,e&&e.set(i,n),n}function Ke(i,t,e){return t=CR(t),t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function CR(i){var t=TR(i,"string");return typeof t=="symbol"?t:String(t)}function TR(i,t){if(typeof i!="object"||i===null)return i;var e=i[Symbol.toPrimitive];if(e!==void 0){var n=e.call(i,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(i)}const mi={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let xr=mi.mouse,ym=class extends sy.Component{constructor(){super(...arguments),Ke(this,"dragging",!1),Ke(this,"lastX",NaN),Ke(this,"lastY",NaN),Ke(this,"touchIdentifier",null),Ke(this,"mounted",!1),Ke(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=e;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,Oe.matchesSelectorAndParentsTo)(t.target,this.props.handle,e)||this.props.cancel&&(0,Oe.matchesSelectorAndParentsTo)(t.target,this.props.cancel,e))return;t.type==="touchstart"&&t.preventDefault();const s=(0,Oe.getTouchIdentifier)(t);this.touchIdentifier=s;const r=(0,br.getControlPosition)(t,s,this);if(r==null)return;const{x:o,y:l}=r,c=(0,br.createCoreData)(this,o,l);(0,zh.default)("DraggableCore: handleDragStart: %j",c),(0,zh.default)("calling",this.props.onStart),!(this.props.onStart(t,c)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,Oe.addUserSelectStyles)(n),this.dragging=!0,this.lastX=o,this.lastY=l,(0,Oe.addEvent)(n,xr.move,this.handleDrag),(0,Oe.addEvent)(n,xr.stop,this.handleDragStop))}),Ke(this,"handleDrag",t=>{const e=(0,br.getControlPosition)(t,this.touchIdentifier,this);if(e==null)return;let{x:n,y:s}=e;if(Array.isArray(this.props.grid)){let l=n-this.lastX,c=s-this.lastY;if([l,c]=(0,br.snapToGrid)(this.props.grid,l,c),!l&&!c)return;n=this.lastX+l,s=this.lastY+c}const r=(0,br.createCoreData)(this,n,s);if((0,zh.default)("DraggableCore: handleDrag: %j",r),this.props.onDrag(t,r)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const c=document.createEvent("MouseEvents");c.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(c)}return}this.lastX=n,this.lastY=s}),Ke(this,"handleDragStop",t=>{if(!this.dragging)return;const e=(0,br.getControlPosition)(t,this.touchIdentifier,this);if(e==null)return;let{x:n,y:s}=e;if(Array.isArray(this.props.grid)){let c=n-this.lastX||0,h=s-this.lastY||0;[c,h]=(0,br.snapToGrid)(this.props.grid,c,h),n=this.lastX+c,s=this.lastY+h}const r=(0,br.createCoreData)(this,n,s);if(this.props.onStop(t,r)===!1||this.mounted===!1)return!1;const l=this.findDOMNode();l&&this.props.enableUserSelectHack&&(0,Oe.removeUserSelectStyles)(l.ownerDocument),(0,zh.default)("DraggableCore: handleDragStop: %j",r),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,l&&((0,zh.default)("DraggableCore: Removing handlers"),(0,Oe.removeEvent)(l.ownerDocument,xr.move,this.handleDrag),(0,Oe.removeEvent)(l.ownerDocument,xr.stop,this.handleDragStop))}),Ke(this,"onMouseDown",t=>(xr=mi.mouse,this.handleDragStart(t))),Ke(this,"onMouseUp",t=>(xr=mi.mouse,this.handleDragStop(t))),Ke(this,"onTouchStart",t=>(xr=mi.touch,this.handleDragStart(t))),Ke(this,"onTouchEnd",t=>(xr=mi.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,Oe.addEvent)(t,mi.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;(0,Oe.removeEvent)(e,mi.mouse.move,this.handleDrag),(0,Oe.removeEvent)(e,mi.touch.move,this.handleDrag),(0,Oe.removeEvent)(e,mi.mouse.stop,this.handleDragStop),(0,Oe.removeEvent)(e,mi.touch.stop,this.handleDragStop),(0,Oe.removeEvent)(t,mi.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Oe.removeUserSelectStyles)(e)}}findDOMNode(){var t,e;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(e=this.props)===null||e===void 0||(e=e.nodeRef)===null||e===void 0?void 0:e.current:xR.default.findDOMNode(this)}render(){return sy.cloneElement(sy.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};gm.default=ym;Ke(ym,"displayName","DraggableCore");Ke(ym,"propTypes",{allowAnyClick:an.default.bool,children:an.default.node.isRequired,disabled:an.default.bool,enableUserSelectHack:an.default.bool,offsetParent:function(i,t){if(i[t]&&i[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:an.default.arrayOf(an.default.number),handle:an.default.string,cancel:an.default.string,nodeRef:an.default.object,onStart:an.default.func,onDrag:an.default.func,onStop:an.default.func,onMouseDown:an.default.func,scale:an.default.number,className:ry.dontSetMe,style:ry.dontSetMe,transform:ry.dontSetMe});Ke(ym,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(i){Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"DraggableCore",{enumerable:!0,get:function(){return c.default}}),i.default=void 0;var t=f(nt),e=u(nx),n=u(Tf),s=u(WP),r=Ht,o=ms,l=gs,c=u(gm),h=u(mm);function u(y){return y&&y.__esModule?y:{default:y}}function d(y){if(typeof WeakMap!="function")return null;var w=new WeakMap,x=new WeakMap;return(d=function(C){return C?x:w})(y)}function f(y,w){if(y&&y.__esModule)return y;if(y===null||typeof y!="object"&&typeof y!="function")return{default:y};var x=d(w);if(x&&x.has(y))return x.get(y);var C={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var k in y)if(k!=="default"&&Object.prototype.hasOwnProperty.call(y,k)){var P=T?Object.getOwnPropertyDescriptor(y,k):null;P&&(P.get||P.set)?Object.defineProperty(C,k,P):C[k]=y[k]}return C.default=y,x&&x.set(y,C),C}function g(){return g=Object.assign?Object.assign.bind():function(y){for(var w=1;w<arguments.length;w++){var x=arguments[w];for(var C in x)Object.prototype.hasOwnProperty.call(x,C)&&(y[C]=x[C])}return y},g.apply(this,arguments)}function v(y,w,x){return w=A(w),w in y?Object.defineProperty(y,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):y[w]=x,y}function A(y){var w=E(y,"string");return typeof w=="symbol"?w:String(w)}function E(y,w){if(typeof y!="object"||y===null)return y;var x=y[Symbol.toPrimitive];if(x!==void 0){var C=x.call(y,w||"default");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(y)}class m extends t.Component{static getDerivedStateFromProps(w,x){let{position:C}=w,{prevPropsPosition:T}=x;return C&&(!T||C.x!==T.x||C.y!==T.y)?((0,h.default)("Draggable: getDerivedStateFromProps %j",{position:C,prevPropsPosition:T}),{x:C.x,y:C.y,prevPropsPosition:{...C}}):null}constructor(w){super(w),v(this,"onDragStart",(x,C)=>{if((0,h.default)("Draggable: onDragStart: %j",C),this.props.onStart(x,(0,o.createDraggableData)(this,C))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),v(this,"onDrag",(x,C)=>{if(!this.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",C);const T=(0,o.createDraggableData)(this,C),k={x:T.x,y:T.y,slackX:0,slackY:0};if(this.props.bounds){const{x:_,y:R}=k;k.x+=this.state.slackX,k.y+=this.state.slackY;const[D,F]=(0,o.getBoundPosition)(this,k.x,k.y);k.x=D,k.y=F,k.slackX=this.state.slackX+(_-k.x),k.slackY=this.state.slackY+(R-k.y),T.x=k.x,T.y=k.y,T.deltaX=k.x-this.state.x,T.deltaY=k.y-this.state.y}if(this.props.onDrag(x,T)===!1)return!1;this.setState(k)}),v(this,"onDragStop",(x,C)=>{if(!this.state.dragging||this.props.onStop(x,(0,o.createDraggableData)(this,C))===!1)return!1;(0,h.default)("Draggable: onDragStop: %j",C);const k={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:_,y:R}=this.props.position;k.x=_,k.y=R}this.setState(k)}),this.state={dragging:!1,dragged:!1,x:w.position?w.position.x:w.defaultPosition.x,y:w.position?w.position.y:w.defaultPosition.y,prevPropsPosition:{...w.position},slackX:0,slackY:0,isElementSVG:!1},w.position&&!(w.onDrag||w.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var w,x;return(w=(x=this.props)===null||x===void 0||(x=x.nodeRef)===null||x===void 0?void 0:x.current)!==null&&w!==void 0?w:n.default.findDOMNode(this)}render(){const{axis:w,bounds:x,children:C,defaultPosition:T,defaultClassName:k,defaultClassNameDragging:P,defaultClassNameDragged:_,position:R,positionOffset:D,scale:F,...X}=this.props;let Q={},tt=null;const z=!!!R||this.state.dragging,L=R||T,V={x:(0,o.canDragX)(this)&&z?this.state.x:L.x,y:(0,o.canDragY)(this)&&z?this.state.y:L.y};this.state.isElementSVG?tt=(0,r.createSVGTransform)(V,D):Q=(0,r.createCSSTransform)(V,D);const G=(0,s.default)(C.props.className||"",k,{[P]:this.state.dragging,[_]:this.state.dragged});return t.createElement(c.default,g({},X,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(C),{className:G,style:{...C.props.style,...Q},transform:tt}))}}i.default=m,v(m,"displayName","Draggable"),v(m,"propTypes",{...c.default.propTypes,axis:e.default.oneOf(["both","x","y","none"]),bounds:e.default.oneOfType([e.default.shape({left:e.default.number,right:e.default.number,top:e.default.number,bottom:e.default.number}),e.default.string,e.default.oneOf([!1])]),defaultClassName:e.default.string,defaultClassNameDragging:e.default.string,defaultClassNameDragged:e.default.string,defaultPosition:e.default.shape({x:e.default.number,y:e.default.number}),positionOffset:e.default.shape({x:e.default.oneOfType([e.default.number,e.default.string]),y:e.default.oneOfType([e.default.number,e.default.string])}),position:e.default.shape({x:e.default.number,y:e.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),v(m,"defaultProps",{...c.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(Zb);const{default:ux,DraggableCore:kR}=Zb;pm.exports=ux;pm.exports.default=ux;pm.exports.DraggableCore=kR;var PR=pm.exports;const RR=OS(PR);var Qt=function(){return Qt=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Qt.apply(this,arguments)},hS={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},uS={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Jf={width:"20px",height:"20px",position:"absolute",zIndex:1},_R={top:Qt(Qt({},hS),{top:"-5px"}),right:Qt(Qt({},uS),{left:void 0,right:"-5px"}),bottom:Qt(Qt({},hS),{top:void 0,bottom:"-5px"}),left:Qt(Qt({},uS),{left:"-5px"}),topRight:Qt(Qt({},Jf),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Qt(Qt({},Jf),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Qt(Qt({},Jf),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Qt(Qt({},Jf),{left:"-10px",top:"-10px",cursor:"nw-resize"})},MR=nt.memo(function(i){var t=i.onResizeStart,e=i.direction,n=i.children,s=i.replaceStyles,r=i.className,o=nt.useCallback(function(h){t(h,e)},[t,e]),l=nt.useCallback(function(h){t(h,e)},[t,e]),c=nt.useMemo(function(){return Qt(Qt({position:"absolute",userSelect:"none"},_R[e]),s??{})},[s,e]);return I.jsx("div",{className:r||void 0,style:c,onMouseDown:o,onTouchStart:l,children:n})}),DR=function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(n[r]=s[r])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ui=function(){return Ui=Object.assign||function(i){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(i[s]=t[s])}return i},Ui.apply(this,arguments)},NR={width:"auto",height:"auto"},Zf=function(i,t,e){return Math.max(Math.min(i,e),t)},dS=function(i,t,e){var n=Math.round(i/t);return n*t+e*(n-1)},El=function(i,t){return new RegExp(i,"i").test(t)},$f=function(i){return!!(i.touches&&i.touches.length)},LR=function(i){return!!((i.clientX||i.clientX===0)&&(i.clientY||i.clientY===0))},fS=function(i,t,e){e===void 0&&(e=0);var n=t.reduce(function(r,o,l){return Math.abs(o-i)<Math.abs(t[r]-i)?l:r},0),s=Math.abs(t[n]-i);return e===0||s<e?t[n]:i},oy=function(i){return i=i.toString(),i==="auto"||i.endsWith("px")||i.endsWith("%")||i.endsWith("vh")||i.endsWith("vw")||i.endsWith("vmax")||i.endsWith("vmin")?i:"".concat(i,"px")},tp=function(i,t,e,n){if(i&&typeof i=="string"){if(i.endsWith("px"))return Number(i.replace("px",""));if(i.endsWith("%")){var s=Number(i.replace("%",""))/100;return t*s}if(i.endsWith("vw")){var s=Number(i.replace("vw",""))/100;return e*s}if(i.endsWith("vh")){var s=Number(i.replace("vh",""))/100;return n*s}}return i},IR=function(i,t,e,n,s,r,o){return n=tp(n,i.width,t,e),s=tp(s,i.height,t,e),r=tp(r,i.width,t,e),o=tp(o,i.height,t,e),{maxWidth:typeof n>"u"?void 0:Number(n),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof r>"u"?void 0:Number(r),minHeight:typeof o>"u"?void 0:Number(o)}},FR=function(i){return Array.isArray(i)?i:[i,i]},OR=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],pS="__resizable_base__",zR=function(i){DR(t,i);function t(e){var n,s,r,o,l=i.call(this,e)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var c=l.parentNode;if(!c)return null;var h=l.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(pS):h.className+=pS,c.appendChild(h),h},l.removeBase=function(c){var h=l.parentNode;h&&h.removeChild(c)},l.state={isResizing:!1,width:(s=(n=l.propsSize)===null||n===void 0?void 0:n.width)!==null&&s!==void 0?s:"auto",height:(o=(r=l.propsSize)===null||r===void 0?void 0:r.height)!==null&&o!==void 0?o:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||NR},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,n=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,r=this.resizable.offsetHeight,o=this.resizable.style.position;o!=="relative"&&(this.resizable.style.position="relative"),e=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,n=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:r,this.resizable.style.position=o}return{width:e,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,n=this.props.size,s=function(l){var c;if(typeof e.state[l]>"u"||e.state[l]==="auto")return"auto";if(e.propsSize&&e.propsSize[l]&&(!((c=e.propsSize[l])===null||c===void 0)&&c.toString().endsWith("%"))){if(e.state[l].toString().endsWith("%"))return e.state[l].toString();var h=e.getParentSize(),u=Number(e.state[l].toString().replace("px","")),d=u/h[l]*100;return"".concat(d,"%")}return oy(e.state[l])},r=n&&typeof n.width<"u"&&!this.state.isResizing?oy(n.width):s("width"),o=n&&typeof n.height<"u"&&!this.state.isResizing?oy(n.height):s("height");return{width:r,height:o}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var n=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(n=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var r={width:e.offsetWidth,height:e.offsetHeight};return n&&(this.parentNode.style.flexWrap=s),this.removeBase(e),r},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:e.flexBasis!=="auto"?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,n){var s=this.propsSize&&this.propsSize[n];return this.state[n]==="auto"&&this.state.original[n]===e&&(typeof s>"u"||s==="auto")?"auto":e},t.prototype.calculateNewMaxFromBoundary=function(e,n){var s=this.props.boundsByDirection,r=this.state.direction,o=s&&El("left",r),l=s&&El("top",r),c,h;if(this.props.bounds==="parent"){var u=this.parentNode;u&&(c=o?this.resizableRight-this.parentLeft:u.offsetWidth+(this.parentLeft-this.resizableLeft),h=l?this.resizableBottom-this.parentTop:u.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(c=o?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(c=o?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return c&&Number.isFinite(c)&&(e=e&&e<c?e:c),h&&Number.isFinite(h)&&(n=n&&n<h?n:h),{maxWidth:e,maxHeight:n}},t.prototype.calculateNewSizeFromDirection=function(e,n){var s=this.props.scale||1,r=FR(this.props.resizeRatio||1),o=r[0],l=r[1],c=this.state,h=c.direction,u=c.original,d=this.props,f=d.lockAspectRatio,g=d.lockAspectRatioExtraHeight,v=d.lockAspectRatioExtraWidth,A=u.width,E=u.height,m=g||0,y=v||0;return El("right",h)&&(A=u.width+(e-u.x)*o/s,f&&(E=(A-y)/this.ratio+m)),El("left",h)&&(A=u.width-(e-u.x)*o/s,f&&(E=(A-y)/this.ratio+m)),El("bottom",h)&&(E=u.height+(n-u.y)*l/s,f&&(A=(E-m)*this.ratio+y)),El("top",h)&&(E=u.height-(n-u.y)*l/s,f&&(A=(E-m)*this.ratio+y)),{newWidth:A,newHeight:E}},t.prototype.calculateNewSizeFromAspectRatio=function(e,n,s,r){var o=this.props,l=o.lockAspectRatio,c=o.lockAspectRatioExtraHeight,h=o.lockAspectRatioExtraWidth,u=typeof r.width>"u"?10:r.width,d=typeof s.width>"u"||s.width<0?e:s.width,f=typeof r.height>"u"?10:r.height,g=typeof s.height>"u"||s.height<0?n:s.height,v=c||0,A=h||0;if(l){var E=(f-v)*this.ratio+A,m=(g-v)*this.ratio+A,y=(u-A)/this.ratio+v,w=(d-A)/this.ratio+v,x=Math.max(u,E),C=Math.min(d,m),T=Math.max(f,y),k=Math.min(g,w);e=Zf(e,x,C),n=Zf(n,T,k)}else e=Zf(e,u,d),n=Zf(n,f,g);return{newWidth:e,newHeight:n}},t.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if(this.props.bounds==="parent"){var n=this.parentNode;if(n){var s=n.getBoundingClientRect();this.parentLeft=s.left*e,this.parentTop=s.top*e}}if(this.props.bounds&&typeof this.props.bounds!="string"){var r=this.props.bounds.getBoundingClientRect();this.targetLeft=r.left*e,this.targetTop=r.top*e}if(this.resizable){var o=this.resizable.getBoundingClientRect(),l=o.left,c=o.top,h=o.right,u=o.bottom;this.resizableLeft=l*e,this.resizableRight=h*e,this.resizableTop=c*e,this.resizableBottom=u*e}},t.prototype.onResizeStart=function(e,n){if(!(!this.resizable||!this.window)){var s=0,r=0;if(e.nativeEvent&&LR(e.nativeEvent)?(s=e.nativeEvent.clientX,r=e.nativeEvent.clientY):e.nativeEvent&&$f(e.nativeEvent)&&(s=e.nativeEvent.touches[0].clientX,r=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var o=this.props.onResizeStart(e,n,this.resizable);if(o===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,c=this.window.getComputedStyle(this.resizable);if(c.flexBasis!=="auto"){var h=this.parentNode;if(h){var u=this.window.getComputedStyle(h).flexDirection;this.flexDir=u.startsWith("row")?"row":"column",l=c.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var d={original:{x:s,y:r,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Ui(Ui({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:n,flexBasis:l};this.setState(d)}},t.prototype.onMouseMove=function(e){var n=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&$f(e))try{e.preventDefault(),e.stopPropagation()}catch{}var s=this.props,r=s.maxWidth,o=s.maxHeight,l=s.minWidth,c=s.minHeight,h=$f(e)?e.touches[0].clientX:e.clientX,u=$f(e)?e.touches[0].clientY:e.clientY,d=this.state,f=d.direction,g=d.original,v=d.width,A=d.height,E=this.getParentSize(),m=IR(E,this.window.innerWidth,this.window.innerHeight,r,o,l,c);r=m.maxWidth,o=m.maxHeight,l=m.minWidth,c=m.minHeight;var y=this.calculateNewSizeFromDirection(h,u),w=y.newHeight,x=y.newWidth,C=this.calculateNewMaxFromBoundary(r,o);this.props.snap&&this.props.snap.x&&(x=fS(x,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(w=fS(w,this.props.snap.y,this.props.snapGap));var T=this.calculateNewSizeFromAspectRatio(x,w,{width:C.maxWidth,height:C.maxHeight},{width:l,height:c});if(x=T.newWidth,w=T.newHeight,this.props.grid){var k=dS(x,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),P=dS(w,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),_=this.props.snapGap||0,R=_===0||Math.abs(k-x)<=_?k:x,D=_===0||Math.abs(P-w)<=_?P:w;x=R,w=D}var F={width:x-g.width,height:w-g.height};if(this.delta=F,v&&typeof v=="string"){if(v.endsWith("%")){var X=x/E.width*100;x="".concat(X,"%")}else if(v.endsWith("vw")){var Q=x/this.window.innerWidth*100;x="".concat(Q,"vw")}else if(v.endsWith("vh")){var tt=x/this.window.innerHeight*100;x="".concat(tt,"vh")}}if(A&&typeof A=="string"){if(A.endsWith("%")){var X=w/E.height*100;w="".concat(X,"%")}else if(A.endsWith("vw")){var Q=w/this.window.innerWidth*100;w="".concat(Q,"vw")}else if(A.endsWith("vh")){var tt=w/this.window.innerHeight*100;w="".concat(tt,"vh")}}var B={width:this.createSizeForCssProperty(x,"width"),height:this.createSizeForCssProperty(w,"height")};this.flexDir==="row"?B.flexBasis=B.width:this.flexDir==="column"&&(B.flexBasis=B.height);var z=this.state.width!==B.width,L=this.state.height!==B.height,V=this.state.flexBasis!==B.flexBasis,G=z||L||V;G&&Tf.flushSync(function(){n.setState(B)}),this.props.onResize&&G&&this.props.onResize(e,f,this.resizable,F)}},t.prototype.onMouseUp=function(e){var n,s,r=this.state,o=r.isResizing,l=r.direction;r.original,!(!o||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(e,l,this.resizable,this.delta),this.props.size&&this.setState({width:(n=this.props.size.width)!==null&&n!==void 0?n:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Ui(Ui({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(e){var n,s;this.setState({width:(n=e.width)!==null&&n!==void 0?n:"auto",height:(s=e.height)!==null&&s!==void 0?s:"auto"})},t.prototype.renderResizer=function(){var e=this,n=this.props,s=n.enable,r=n.handleStyles,o=n.handleClasses,l=n.handleWrapperStyle,c=n.handleWrapperClass,h=n.handleComponent;if(!s)return null;var u=Object.keys(s).map(function(d){return s[d]!==!1?I.jsx(MR,{direction:d,onResizeStart:e.onResizeStart,replaceStyles:r&&r[d],className:o&&o[d],children:h&&h[d]?h[d]:null},d):null});return I.jsx("div",{className:c,style:l,children:u})},t.prototype.render=function(){var e=this,n=Object.keys(this.props).reduce(function(o,l){return OR.indexOf(l)!==-1||(o[l]=e.props[l]),o},{}),s=Ui(Ui(Ui({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var r=this.props.as||"div";return I.jsxs(r,Ui({style:s,className:this.props.className},n,{ref:function(o){o&&(e.resizable=o)},children:[this.state.isResizing&&I.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(nt.PureComponent);/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var hv=function(i,t){return hv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)n.hasOwnProperty(s)&&(e[s]=n[s])},hv(i,t)};function BR(i,t){hv(i,t);function e(){this.constructor=i}i.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}var ie=function(){return ie=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},ie.apply(this,arguments)};function VR(i,t){var e={};for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(i);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(i,n[s])&&(e[n[s]]=i[n[s]]);return e}var UR={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},qR=function(i){return{bottom:i,bottomLeft:i,bottomRight:i,left:i,right:i,top:i,topLeft:i,topRight:i}},HR=function(i){BR(t,i);function t(e){var n=i.call(this,e)||this;return n.resizingPosition={x:0,y:0},n.offsetFromParent={left:0,top:0},n.resizableElement={current:null},n.originalPosition={x:0,y:0},n.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:e.maxWidth,maxHeight:e.maxHeight},n.onResizeStart=n.onResizeStart.bind(n),n.onResize=n.onResize.bind(n),n.onResizeStop=n.onResizeStop.bind(n),n.onDragStart=n.onDragStart.bind(n),n.onDrag=n.onDrag.bind(n),n.onDragStop=n.onDragStop.bind(n),n.getMaxSizesFromProps=n.getMaxSizesFromProps.bind(n),n}return t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var e=this.offsetFromParent,n=e.left,s=e.top,r=this.getDraggablePosition(),o=r.x,l=r.y;this.draggable.setState({x:o-n,y:l-s}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var e=this.draggable.state,n=e.x,s=e.y;return{x:n,y:s}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){var e=typeof this.props.maxWidth>"u"?Number.MAX_SAFE_INTEGER:this.props.maxWidth,n=typeof this.props.maxHeight>"u"?Number.MAX_SAFE_INTEGER:this.props.maxHeight;return{maxWidth:e,maxHeight:n}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(e){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/n;case"body":return document.body.offsetHeight/n;default:return e.offsetHeight}},t.prototype.getOffsetWidth=function(e){var n=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/n;case"body":return document.body.offsetWidth/n;default:return e.offsetWidth}},t.prototype.onDragStart=function(e,n){this.props.onDragStart&&this.props.onDragStart(e,n);var s=this.getDraggablePosition();if(this.originalPosition=s,!!this.props.bounds){var r=this.getParent(),o=this.props.scale,l;if(this.props.bounds==="parent")l=r;else if(this.props.bounds==="body"){var c=r.getBoundingClientRect(),h=c.left,u=c.top,d=document.body.getBoundingClientRect(),f=-(h-r.offsetLeft*o-d.left)/o,g=-(u-r.offsetTop*o-d.top)/o,v=(document.body.offsetWidth-this.resizable.size.width*o)/o+f,A=(document.body.offsetHeight-this.resizable.size.height*o)/o+g;return this.setState({bounds:{top:g,right:v,bottom:A,left:f}})}else if(this.props.bounds==="window"){if(!this.resizable)return;var E=r.getBoundingClientRect(),m=E.left,y=E.top,w=-(m-r.offsetLeft*o)/o,x=-(y-r.offsetTop*o)/o,v=(window.innerWidth-this.resizable.size.width*o)/o+w,A=(window.innerHeight-this.resizable.size.height*o)/o+x;return this.setState({bounds:{top:x,right:v,bottom:A,left:w}})}else typeof this.props.bounds=="string"?l=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(l=this.props.bounds);if(!(!(l instanceof HTMLElement)||!(r instanceof HTMLElement))){var C=l.getBoundingClientRect(),T=C.left,k=C.top,P=r.getBoundingClientRect(),_=P.left,R=P.top,D=(T-_)/o,F=k-R;if(this.resizable){this.updateOffsetFromParent();var X=this.offsetFromParent;this.setState({bounds:{top:F-X.top,right:D+(l.offsetWidth-this.resizable.size.width)-X.left/o,bottom:F+(l.offsetHeight-this.resizable.size.height)-X.top,left:D-X.left/o}})}}}},t.prototype.onDrag=function(e,n){if(this.props.onDrag){var s=this.offsetFromParent,r=s.left,o=s.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDrag(e,ie(ie({},n),{x:n.x+r,y:n.y+o}));if(this.props.dragAxis==="x")return this.props.onDrag(e,ie(ie({},n),{x:n.x+r,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDrag(e,ie(ie({},n),{x:this.originalPosition.x+r,y:n.y+o,deltaX:0}))}},t.prototype.onDragStop=function(e,n){if(this.props.onDragStop){var s=this.offsetFromParent,r=s.left,o=s.top;if(!this.props.dragAxis||this.props.dragAxis==="both")return this.props.onDragStop(e,ie(ie({},n),{x:n.x+r,y:n.y+o}));if(this.props.dragAxis==="x")return this.props.onDragStop(e,ie(ie({},n),{x:n.x+r,y:this.originalPosition.y+o,deltaY:0}));if(this.props.dragAxis==="y")return this.props.onDragStop(e,ie(ie({},n),{x:this.originalPosition.x+r,y:n.y+o,deltaX:0}))}},t.prototype.onResizeStart=function(e,n,s){e.stopPropagation(),this.setState({resizing:!0});var r=this.props.scale,o=this.offsetFromParent,l=this.getDraggablePosition();if(this.resizingPosition={x:l.x+o.left,y:l.y+o.top},this.originalPosition=l,this.props.bounds){var c=this.getParent(),h=void 0;this.props.bounds==="parent"?h=c:this.props.bounds==="body"?h=document.body:this.props.bounds==="window"?h=window:typeof this.props.bounds=="string"?h=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(h=this.props.bounds);var u=this.getSelfElement();if(u instanceof Element&&(h instanceof HTMLElement||h===window)&&c instanceof HTMLElement){var d=this.getMaxSizesFromProps(),f=d.maxWidth,g=d.maxHeight,v=this.getParentSize();if(f&&typeof f=="string")if(f.endsWith("%")){var A=Number(f.replace("%",""))/100;f=v.width*A}else f.endsWith("px")&&(f=Number(f.replace("px","")));if(g&&typeof g=="string")if(g.endsWith("%")){var A=Number(g.replace("%",""))/100;g=v.height*A}else g.endsWith("px")&&(g=Number(g.replace("px","")));var E=u.getBoundingClientRect(),m=E.left,y=E.top,w=this.props.bounds==="window"?{left:0,top:0}:h.getBoundingClientRect(),x=w.left,C=w.top,T=this.getOffsetWidth(h),k=this.getOffsetHeight(h),P=n.toLowerCase().endsWith("left"),_=n.toLowerCase().endsWith("right"),R=n.startsWith("top"),D=n.startsWith("bottom");if((P||R)&&this.resizable){var F=(m-x)/r+this.resizable.size.width;this.setState({maxWidth:F>Number(f)?f:F})}if(_||this.props.lockAspectRatio&&!P&&!R){var F=T+(x-m)/r;this.setState({maxWidth:F>Number(f)?f:F})}if((R||P)&&this.resizable){var F=(y-C)/r+this.resizable.size.height;this.setState({maxHeight:F>Number(g)?g:F})}if(D||this.props.lockAspectRatio&&!R&&!P){var F=k+(C-y)/r;this.setState({maxHeight:F>Number(g)?g:F})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,n,s)},t.prototype.onResize=function(e,n,s,r){var o=this,l={x:this.originalPosition.x,y:this.originalPosition.y},c=-r.width,h=-r.height,u=["top","left","topLeft","bottomLeft","topRight"];u.includes(n)&&(n==="bottomLeft"?l.x+=c:(n==="topRight"||(l.x+=c),l.y+=h));var d=this.draggable.state;(l.x!==d.x||l.y!==d.y)&&Tf.flushSync(function(){o.draggable.setState(l)}),this.updateOffsetFromParent();var f=this.offsetFromParent,g=this.getDraggablePosition().x+f.left,v=this.getDraggablePosition().y+f.top;this.resizingPosition={x:g,y:v},this.props.onResize&&this.props.onResize(e,n,s,r,{x:g,y:v})},t.prototype.onResizeStop=function(e,n,s,r){this.setState({resizing:!1});var o=this.getMaxSizesFromProps(),l=o.maxWidth,c=o.maxHeight;this.setState({maxWidth:l,maxHeight:c}),this.props.onResizeStop&&this.props.onResizeStop(e,n,s,r,this.resizingPosition)},t.prototype.updateSize=function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})},t.prototype.updatePosition=function(e){this.draggable.setState(e)},t.prototype.updateOffsetFromParent=function(){var e=this.props.scale,n=this.getParent(),s=this.getSelfElement();if(!n||s===null)return{top:0,left:0};var r=n.getBoundingClientRect(),o=r.left,l=r.top,c=s.getBoundingClientRect(),h=this.getDraggablePosition(),u=n.scrollLeft,d=n.scrollTop;this.offsetFromParent={left:c.left-o+u-h.x*e,top:c.top-l+d-h.y*e}},t.prototype.render=function(){var e=this,n=this.props,s=n.disableDragging,r=n.style,o=n.dragHandleClassName,l=n.position,c=n.onMouseDown,h=n.onMouseUp,u=n.dragAxis,d=n.dragGrid,f=n.bounds,g=n.enableUserSelectHack,v=n.cancel,A=n.children;n.onResizeStart,n.onResize,n.onResizeStop,n.onDragStart,n.onDrag,n.onDragStop;var E=n.resizeHandleStyles,m=n.resizeHandleClasses,y=n.resizeHandleComponent,w=n.enableResizing,x=n.resizeGrid,C=n.resizeHandleWrapperClass,T=n.resizeHandleWrapperStyle,k=n.scale,P=n.allowAnyClick,_=n.dragPositionOffset,R=VR(n,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),D=this.props.default?ie({},this.props.default):void 0;delete R.default;var F=s||o?{cursor:"auto"}:{cursor:"move"},X=ie(ie(ie({},UR),F),r),Q=this.offsetFromParent,tt=Q.left,B=Q.top,z;l&&(z={x:l.x-tt,y:l.y-B});var L=this.state.resizing?void 0:z,V=this.state.resizing?"both":u;return nt.createElement(RR,{ref:function(G){G&&(e.draggable=G)},handle:o?".".concat(o):void 0,defaultPosition:D,onMouseDown:c,onMouseUp:h,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:V,disabled:s,grid:d,bounds:f?this.state.bounds:void 0,position:L,enableUserSelectHack:g,cancel:v,scale:k,allowAnyClick:P,nodeRef:this.resizableElement,positionOffset:_},nt.createElement(zR,ie({},R,{ref:function(G){G&&(e.resizable=G,e.resizableElement.current=G.resizable)},defaultSize:D,size:this.props.size,enable:typeof w=="boolean"?qR(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:X,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:x,handleWrapperClass:C,handleWrapperStyle:T,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:E,handleClasses:m,handleComponent:y,scale:this.props.scale}),A))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(nt.PureComponent);const jR="_areaHighlight_1ppoh_1",WR="_part_1ppoh_8",GR="_scrolledTo_1ppoh_15",ay={areaHighlight:jR,part:WR,scrolledTo:GR};function KR({highlight:i,onChange:t,isScrolledTo:e,...n}){return I.jsx("div",{className:`${ay.areaHighlight} ${e?ay.scrolledTo:""}`,children:I.jsx(HR,{className:ay.part,onDragStop:(s,r)=>{const o={...i.position.boundingRect,top:r.y,left:r.x};t(o)},onResizeStop:(s,r,o,l,c)=>{var u;const h={top:c.y,left:c.x,width:o.offsetWidth,height:o.offsetHeight,pageNumber:((u=bu(o))==null?void 0:u.number)||-1};t(h)},position:{x:i.position.boundingRect.left,y:i.position.boundingRect.top},size:{width:i.position.boundingRect.width,height:i.position.boundingRect.height},onClick:s=>{s.stopPropagation(),s.preventDefault()},...n})})}const Ze=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),uv=[.001,0,0,.001,0,0],ly=1.35,zn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dx="pdfjs_internal_editor_",Z={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},lt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},XR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ae={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},bp={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Yt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Tl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},vm={ERRORS:0,WARNINGS:1,INFOS:5},Vu={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ep={moveTo:0,lineTo:1,curveTo:2,closePath:3},YR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let wm=vm.WARNINGS;function QR(i){Number.isInteger(i)&&(wm=i)}function JR(){return wm}function Sm(i){wm>=vm.INFOS&&console.log(`Info: ${i}`)}function $(i){wm>=vm.WARNINGS&&console.log(`Warning: ${i}`)}function xt(i){throw new Error(i)}function $t(i,t){i||xt(t)}function ZR(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function fx(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=i_(i)}catch{}}const n=t?URL.parse(i,t):URL.parse(i);return ZR(n)?n:null}function px(i,t,e=!1){const n=URL.parse(i);return n?(n.hash=t,n.href):e&&fx(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function rt(i,t,e,n=!1){return Object.defineProperty(i,t,{value:e,enumerable:!n,configurable:!0,writable:!1}),e}const Al=function(){function t(e,n){this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();class gS extends Al{constructor(t,e){super(t,"PasswordException"),this.code=e}}class cy extends Al{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class dv extends Al{constructor(t){super(t,"InvalidPDFException")}}class bg extends Al{constructor(t,e,n){super(t,"ResponseException"),this.status=e,this.missing=n}}class $R extends Al{constructor(t){super(t,"FormatError")}}class Fo extends Al{constructor(t){super(t,"AbortException")}}function gx(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&xt("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<t;s+=e){const r=Math.min(s+e,t),o=i.subarray(s,r);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function kf(i){typeof i!="string"&&xt("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let n=0;n<t;++n)e[n]=i.charCodeAt(n)&255;return e}function t_(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function e_(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function n_(){try{return new Function(""),!0}catch{return!1}}class Ne{static get isLittleEndian(){return rt(this,"isLittleEndian",e_())}static get isEvalSupported(){return rt(this,"isEvalSupported",n_())}static get isOffscreenCanvasSupported(){return rt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return rt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return rt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return rt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const hy=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var dr,xp,fv;class W{static makeHexColor(t,e,n){return`#${hy[t]}${hy[e]}${hy[n]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[1],e[1]=n,n=e[2],e[2]=e[3],e[3]=n,t[1]<0&&(n=e[1],e[1]=e[3],e[3]=n),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[2],e[2]=n),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static multiplyByDOMMatrix(t,e){return[t[0]*e.a+t[2]*e.b,t[1]*e.a+t[3]*e.b,t[0]*e.c+t[2]*e.d,t[1]*e.c+t[3]*e.d,t[0]*e.e+t[2]*e.f+t[4],t[1]*e.e+t[3]*e.f+t[5]]}static applyTransform(t,e,n=0){const s=t[n],r=t[n+1];t[n]=s*e[0]+r*e[2]+e[4],t[n+1]=s*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,n=0){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const d=t[n+u],f=t[n+u+1];t[n+u]=d*s+f*o+c,t[n+u+1]=d*r+f*l+h}}static applyInverseTransform(t,e){const n=t[0],s=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(n*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-n*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,n){const s=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],u=t[0],d=t[1],f=t[2],g=t[3];let v=s*u+c,A=v,E=s*f+c,m=E,y=l*d+h,w=y,x=l*g+h,C=x;if(r!==0||o!==0){const T=r*u,k=r*f,P=o*d,_=o*g;v+=P,m+=P,E+=_,A+=_,y+=T,C+=T,x+=k,w+=k}n[0]=Math.min(n[0],v,E,A,m),n[1]=Math.min(n[1],y,x,w,C),n[2]=Math.max(n[2],v,E,A,m),n[3]=Math.max(n[3],y,x,w,C)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const n=t[0],s=t[1],r=t[2],o=t[3],l=n**2+s**2,c=n*r+s*o,h=r**2+o**2,u=(l+h)/2,d=Math.sqrt(u**2-(l*h-c**2));e[0]=Math.sqrt(u+d||1),e[1]=Math.sqrt(u-d||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>s)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,s,o]}static pointBoundingBox(t,e,n){n[0]=Math.min(n[0],t),n[1]=Math.min(n[1],e),n[2]=Math.max(n[2],t),n[3]=Math.max(n[3],e)}static rectBoundingBox(t,e,n,s,r){r[0]=Math.min(r[0],t,n),r[1]=Math.min(r[1],e,s),r[2]=Math.max(r[2],t,n),r[3]=Math.max(r[3],e,s)}static bezierBoundingBox(t,e,n,s,r,o,l,c,h){h[0]=Math.min(h[0],t,l),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,l),h[3]=Math.max(h[3],e,c),b(this,dr,fv).call(this,t,n,r,l,e,s,o,c,3*(-t+3*(n-r)+l),6*(t-2*n+r),3*(n-t),h),b(this,dr,fv).call(this,t,n,r,l,e,s,o,c,3*(-e+3*(s-o)+c),6*(e-2*s+o),3*(s-e),h)}}dr=new WeakSet,xp=function(t,e,n,s,r,o,l,c,h,u){if(h<=0||h>=1)return;const d=1-h,f=h*h,g=f*h,v=d*(d*(d*t+3*h*e)+3*f*n)+g*s,A=d*(d*(d*r+3*h*o)+3*f*l)+g*c;u[0]=Math.min(u[0],v),u[1]=Math.min(u[1],A),u[2]=Math.max(u[2],v),u[3]=Math.max(u[3],A)},fv=function(t,e,n,s,r,o,l,c,h,u,d,f){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&b(this,dr,xp).call(this,t,e,n,s,r,o,l,c,-d/u,f);return}const g=u**2-4*d*h;if(g<0)return;const v=Math.sqrt(g),A=2*h;b(this,dr,xp).call(this,t,e,n,s,r,o,l,c,(-u+v)/A,f),b(this,dr,xp).call(this,t,e,n,s,r,o,l,c,(-u-v)/A,f)},S(W,dr);function i_(i){return decodeURIComponent(escape(i))}let uy=null,mS=null;function s_(i){return uy||(uy=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,mS=new Map([["","t"]])),i.replaceAll(uy,(t,e,n)=>e?e.normalize("NFKC"):mS.get(n))}function mx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),gx(i)}const Rw="pdfjs_internal_id_";function r_(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[n,s,...r]=e;if(!i(n)&&!Number.isInteger(n)||!t(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function $e(i,t,e){return Math.min(Math.max(i,t),e)}function yx(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(gx(i))}function o_(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):kf(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const ys="http://www.w3.org/2000/svg",Qo=class Qo{};M(Qo,"CSS",96),M(Qo,"PDF",72),M(Qo,"PDF_TO_CSS_UNITS",Qo.CSS/Qo.PDF);let Oo=Qo;async function Pf(i,t="text"){if(Kh(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class Rf{constructor({viewBox:t,userUnit:e,scale:n,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=n,this.rotation=s,this.offsetX=r,this.offsetY=o,n*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,d,f,g;switch(s%=360,s<0&&(s+=360),s){case 180:u=-1,d=0,f=0,g=1;break;case 90:u=0,d=1,f=1,g=0;break;case 270:u=0,d=-1,f=-1,g=0;break;case 0:u=1,d=0,f=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,g=-g);let v,A,E,m;u===0?(v=Math.abs(h-t[1])*n+r,A=Math.abs(c-t[0])*n+o,E=(t[3]-t[1])*n,m=(t[2]-t[0])*n):(v=Math.abs(c-t[0])*n+r,A=Math.abs(h-t[1])*n+o,E=(t[2]-t[0])*n,m=(t[3]-t[1])*n),this.transform=[u*n,d*n,f*n,g*n,v-u*n*c-f*n*h,A-d*n*c-g*n*h],this.width=E,this.height=m}get rawDims(){const t=this.viewBox;return rt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new Rf({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}convertToViewportPoint(t,e){const n=[t,e];return W.applyTransform(n,this.transform),n}convertToViewportRectangle(t){const e=[t[0],t[1]];W.applyTransform(e,this.transform);const n=[t[2],t[3]];return W.applyTransform(n,this.transform),[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){const n=[t,e];return W.applyInverseTransform(n,this.transform),n}}class _w extends Al{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Am(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Mw(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function a_(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function l_(i,t="document.pdf"){if(typeof i!="string")return t;if(Am(i))return $('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return t;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(r.test(o))return s(o);if(n.searchParams.size>0){const l=Array.from(n.searchParams.values()).reverse();for(const h of l)if(r.test(h))return s(h);const c=Array.from(n.searchParams.keys()).reverse();for(const h of c)if(r.test(h))return s(h)}if(n.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(c)return s(c[0])}return t}class yS{constructor(){M(this,"started",Object.create(null));M(this,"times",[])}time(t){t in this.started&&$(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||$(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:n}of this.times)e=Math.max(n.length,e);for(const{name:n,start:s,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-s}ms
`);return t.join("")}}function Kh(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function pi(i){i.preventDefault()}function Jt(i){i.preventDefault(),i.stopPropagation()}function c_(i){console.log("Deprecated API usage: "+i)}var ju;class xg{static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;a(this,ju)||p(this,ju,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,ju).exec(t);if(!e)return null;const n=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let d=parseInt(e[9],10)||0;return d=d>=0&&d<=59?d:0,h==="-"?(o+=u,l+=d):h==="+"&&(o-=u,l-=d),new Date(Date.UTC(n,s,r,o,l,c))}}ju=new WeakMap,S(xg,ju);function h_(i,{scale:t=1,rotation:e=0}){const{width:n,height:s}=i.attributes.style,r=[0,0,parseInt(n),parseInt(s)];return new Rf({viewBox:r,userUnit:1,scale:t,rotation:e})}function bm(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):($(`Not a valid color format: "${i}"`),[0,0,0])}function u_(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const n=window.getComputedStyle(t).color;i.set(e,bm(n))}t.remove()}function Ot(i){const{a:t,b:e,c:n,d:s,e:r,f:o}=i.getTransform();return[t,e,n,s,r,o]}function Oi(i){const{a:t,b:e,c:n,d:s,e:r,f:o}=i.getTransform().invertSelf();return[t,e,n,s,r,o]}function pl(i,t,e=!1,n=!0){if(t instanceof Rf){const{pageWidth:s,pageHeight:r}=t.rawDims,{style:o}=i,l=Ne.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,h=`var(--total-scale-factor) * ${r}px`,u=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=d):(o.width=d,o.height=u)}n&&i.setAttribute("data-main-rotation",t.rotation)}class fs{constructor(){const{pixelRatio:t}=fs;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,n,s,r=-1){let o=1/0,l=1/0,c=1/0;n=fs.capPixels(n,r),n>0&&(o=Math.sqrt(n/(t*e))),s!==-1&&(l=s/t,c=s/e);const h=Math.min(o,l,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,n):n}return t}}const pv=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var _r,Mr,Jn,Es,Wu,ic,sc,Gu,Ng,vx,Me,wx,Sx,kl,Xh;const As=class As{constructor(t){S(this,Me);S(this,_r,null);S(this,Mr,null);S(this,Jn);S(this,Es,null);S(this,Wu,null);S(this,ic,null);S(this,sc,null);p(this,Jn,t),a(As,Gu)||p(As,Gu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=p(this,_r,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Jn)._uiManager._signal;e instanceof AbortSignal&&!e.aborted&&(t.addEventListener("contextmenu",pi,{signal:e}),t.addEventListener("pointerdown",b(As,Ng,vx),{signal:e}));const n=p(this,Es,document.createElement("div"));n.className="buttons",t.append(n);const s=a(this,Jn).toolbarPosition;if(s){const{style:r}=t,o=a(this,Jn)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return a(this,_r)}hide(){var t;a(this,_r).classList.add("hidden"),(t=a(this,Mr))==null||t.hideDropdown()}show(){var t,e;a(this,_r).classList.remove("hidden"),(t=a(this,Wu))==null||t.shown(),(e=a(this,ic))==null||e.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=a(this,Jn),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",a(As,Gu)[t]),b(this,Me,kl).call(this,n)&&n.addEventListener("click",s=>{e.delete()},{signal:e._signal}),a(this,Es).append(n)}async addAltText(t){const e=await t.render();b(this,Me,kl).call(this,e),a(this,Es).append(e,a(this,Me,Xh)),p(this,Wu,t)}addComment(t){if(a(this,ic))return;const e=t.render();e&&(b(this,Me,kl).call(this,e),a(this,Es).append(e,a(this,Me,Xh)),p(this,ic,t),t.toolbar=this)}addColorPicker(t){if(a(this,Mr))return;p(this,Mr,t);const e=t.renderButton();b(this,Me,kl).call(this,e),a(this,Es).append(e,a(this,Me,Xh))}async addEditSignatureButton(t){const e=p(this,sc,await t.renderEditButton(a(this,Jn)));b(this,Me,kl).call(this,e),a(this,Es).append(e,a(this,Me,Xh))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(e);break}}updateEditSignatureButton(t){a(this,sc)&&(a(this,sc).title=t)}remove(){var t;a(this,_r).remove(),(t=a(this,Mr))==null||t.destroy(),p(this,Mr,null)}};_r=new WeakMap,Mr=new WeakMap,Jn=new WeakMap,Es=new WeakMap,Wu=new WeakMap,ic=new WeakMap,sc=new WeakMap,Gu=new WeakMap,Ng=new WeakSet,vx=function(t){t.stopPropagation()},Me=new WeakSet,wx=function(t){a(this,Jn)._focusEventsAllowed=!1,Jt(t)},Sx=function(t){a(this,Jn)._focusEventsAllowed=!0,Jt(t)},kl=function(t){const e=a(this,Jn)._uiManager._signal;return!(e instanceof AbortSignal)||e.aborted?!1:(t.addEventListener("focusin",b(this,Me,wx).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",b(this,Me,Sx).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",pi,{signal:e}),!0)},Xh=function(){const t=document.createElement("div");return t.className="divider",t},S(As,Ng),S(As,Gu,null);let gv=As;var Ku,na,Cs,vr,Ax,bx,mv;class d_{constructor(t){S(this,vr);S(this,Ku,null);S(this,na,null);S(this,Cs);p(this,Cs,t)}show(t,e,n){const[s,r]=b(this,vr,bx).call(this,e,n),{style:o}=a(this,na)||p(this,na,b(this,vr,Ax).call(this));t.append(a(this,na)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,na).remove()}}Ku=new WeakMap,na=new WeakMap,Cs=new WeakMap,vr=new WeakSet,Ax=function(){const t=p(this,na,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar");const e=a(this,Cs)._signal;e instanceof AbortSignal&&!e.aborted&&t.addEventListener("contextmenu",pi,{signal:e});const n=p(this,Ku,document.createElement("div"));return n.className="buttons",t.append(n),a(this,Cs).hasCommentManager()&&b(this,vr,mv).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,Cs).commentSelection("floating_button")}),b(this,vr,mv).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,Cs).highlightSelection("floating_button")}),t},bx=function(t,e){let n=0,s=0;for(const r of t){const o=r.y+r.height;if(o<n)continue;const l=r.x+(e?r.width:0);if(o>n){s=l,n=o;continue}e?l>s&&(s=l):l<s&&(s=l)}return[e?1-s:s,n]},mv=function(t,e,n,s){const r=document.createElement("button");r.classList.add("basic",t),r.tabIndex=0,r.setAttribute("data-l10n-id",e);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const l=a(this,Cs)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",pi,{signal:l}),r.addEventListener("click",s,{signal:l})),a(this,Ku).append(r)};function xx(i,t,e){for(const n of e)t.addEventListener(n,i[n].bind(i))}var Lg;class f_{constructor(){S(this,Lg,0)}get id(){return`${dx}${ne(this,Lg)._++}`}}Lg=new WeakMap;var rc,Xu,Be,oc,Ep;const Bw=class Bw{constructor(){S(this,oc);S(this,rc,mx());S(this,Xu,0);S(this,Be,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const r=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return rt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:n,size:s,type:r}=t;return b(this,oc,Ep).call(this,`${e}_${n}_${s}_${r}`,t)}async getFromUrl(t){return b(this,oc,Ep).call(this,t,t)}async getFromBlob(t,e){const n=await e;return b(this,oc,Ep).call(this,t,n)}async getFromId(t){a(this,Be)||p(this,Be,new Map);const e=a(this,Be).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:n}=e;return delete e.blobPromise,this.getFromBlob(e.id,n)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Be)||p(this,Be,new Map);let n=a(this,Be).get(t);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${a(this,rc)}_${ne(this,Xu)._++}`,refCounter:1,isSvg:!1},a(this,Be).set(t,n),a(this,Be).set(n.id,n),n}getSvgUrl(t){const e=a(this,Be).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;a(this,Be)||p(this,Be,new Map);const e=a(this,Be).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:n}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(n.width,n.height);r.getContext("bitmaprenderer").transferFromImageBitmap(n),e.blobPromise=r.convertToBlob()}(s=n.close)==null||s.call(n),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,rc)}_`)}};rc=new WeakMap,Xu=new WeakMap,Be=new WeakMap,oc=new WeakSet,Ep=async function(t,e){a(this,Be)||p(this,Be,new Map);let n=a(this,Be).get(t);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${a(this,rc)}_${ne(this,Xu)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(n.url=e,s=await Pf(e,"blob")):e instanceof File?s=n.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const r=Bw._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((h,u)=>{l.onload=()=>{n.bitmap=l,n.isSvg=!0,h()},o.onload=async()=>{const d=n.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=u});o.readAsDataURL(s),await c}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){$(s),n=null}return a(this,Be).set(t,n),n&&a(this,Be).set(n.id,n),n};let yv=Bw;var jt,Dr,Yu,It;class p_{constructor(t=128){S(this,jt,[]);S(this,Dr,!1);S(this,Yu);S(this,It,-1);p(this,Yu,t)}add({cmd:t,undo:e,post:n,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&t(),a(this,Dr))return;const c={cmd:t,undo:e,post:n,type:r};if(a(this,It)===-1){a(this,jt).length>0&&(a(this,jt).length=0),p(this,It,0),a(this,jt).push(c);return}if(o&&a(this,jt)[a(this,It)].type===r){l&&(c.undo=a(this,jt)[a(this,It)].undo),a(this,jt)[a(this,It)]=c;return}const h=a(this,It)+1;h===a(this,Yu)?a(this,jt).splice(0,1):(p(this,It,h),h<a(this,jt).length&&a(this,jt).splice(h)),a(this,jt).push(c)}undo(){if(a(this,It)===-1)return;p(this,Dr,!0);const{undo:t,post:e}=a(this,jt)[a(this,It)];t(),e==null||e(),p(this,Dr,!1),p(this,It,a(this,It)-1)}redo(){if(a(this,It)<a(this,jt).length-1){p(this,It,a(this,It)+1),p(this,Dr,!0);const{cmd:t,post:e}=a(this,jt)[a(this,It)];t(),e==null||e(),p(this,Dr,!1)}}hasSomethingToUndo(){return a(this,It)!==-1}hasSomethingToRedo(){return a(this,It)<a(this,jt).length-1}cleanType(t){if(a(this,It)!==-1){for(let e=a(this,It);e>=0;e--)if(a(this,jt)[e].type!==t){a(this,jt).splice(e+1,a(this,It)-e),p(this,It,e);return}a(this,jt).length=0,p(this,It,-1)}}destroy(){p(this,jt,null)}}jt=new WeakMap,Dr=new WeakMap,Yu=new WeakMap,It=new WeakMap;var Ig,Ex;class _f{constructor(t){S(this,Ig);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ne.platform;for(const[n,s,r={}]of t)for(const o of n){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(b(this,Ig,Ex).call(this,e));if(!n)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=n;l&&!l(t,e)||(s.bind(t,...o,e)(),r||Jt(e))}}Ig=new WeakSet,Ex=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Fg=class Fg{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return u_(t),rt(this,"_colors",t)}convert(t){const e=bm(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[n,s]of this._colors)if(s.every((r,o)=>r===e[o]))return Fg._colorsMapping.get(n);return e}getHexCode(t){const e=this._colors.get(t);return e?W.makeHexColor(...e):t}};M(Fg,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let vv=Fg;var ac,An,lc,oe,be,cc,Ts,hc,Zn,ks,Nr,Lr,uc,ia,qi,$n,sa,Qu,Ju,dc,Zu,Hi,Ir,fc,Fr,ji,Og,Or,pc,$u,zr,ra,gc,Br,td,ae,yt,Ps,Vr,Ur,ed,mc,nd,qr,Wi,Rs,id,sd,ti,O,Cp,wv,Cx,Tx,Yh,kx,Px,Rx,Sv,_x,Av,bv,Mx,We,vs,Dx,Nx,xv,Lx,Qh,Ev;const Xl=class Xl{constructor(t,e,n,s,r,o,l,c,h,u,d,f,g,v,A,E){S(this,O);S(this,ac,new AbortController);S(this,An,null);S(this,lc,null);S(this,oe,new Map);S(this,be,new Map);S(this,cc,null);S(this,Ts,null);S(this,hc,null);S(this,Zn,new p_);S(this,ks,null);S(this,Nr,null);S(this,Lr,null);S(this,uc,0);S(this,ia,new Set);S(this,qi,null);S(this,$n,null);S(this,sa,new Set);M(this,"_editorUndoBar",null);S(this,Qu,!1);S(this,Ju,!1);S(this,dc,!1);S(this,Zu,null);S(this,Hi,null);S(this,Ir,null);S(this,fc,null);S(this,Fr,!1);S(this,ji,null);S(this,Og,new f_);S(this,Or,!1);S(this,pc,!1);S(this,$u,!1);S(this,zr,null);S(this,ra,null);S(this,gc,null);S(this,Br,null);S(this,td,null);S(this,ae,Z.NONE);S(this,yt,new Set);S(this,Ps,null);S(this,Vr,null);S(this,Ur,null);S(this,ed,null);S(this,mc,null);S(this,nd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});S(this,qr,[0,0]);S(this,Wi,null);S(this,Rs,null);S(this,id,null);S(this,sd,null);S(this,ti,null);const m=this._signal=a(this,ac).signal;p(this,Rs,t),p(this,id,e),p(this,sd,n),p(this,cc,s),p(this,ks,r),p(this,Vr,o),p(this,mc,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:m}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:m}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:m}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:m}),l._on("setpreference",this.onSetPreference.bind(this),{signal:m}),l._on("switchannotationeditorparams",y=>this.updateParams(y.type,y.value),{signal:m}),window.addEventListener("pointerdown",()=>{p(this,pc,!0)},{capture:!0,signal:m}),window.addEventListener("pointerup",()=>{p(this,pc,!1)},{capture:!0,signal:m}),b(this,O,kx).call(this),b(this,O,Mx).call(this),b(this,O,Sv).call(this),p(this,Ts,c.annotationStorage),p(this,Zu,c.filterFactory),p(this,Ur,h),p(this,fc,u||null),p(this,Qu,d),p(this,Ju,f),p(this,dc,g),p(this,td,v||null),this.viewParameters={realScale:Oo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=A||null,this._supportsPinchToZoom=E!==!1}static get _keyboardManager(){const t=Xl.prototype,e=o=>a(o,Rs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return rt(this,"_keyboardManager",new _f([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],t.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:n}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Rs).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Rs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,n,s,r,o,l,c,h;(t=a(this,ti))==null||t.resolve(),p(this,ti,null),(e=a(this,ac))==null||e.abort(),p(this,ac,null),this._signal=null;for(const u of a(this,be).values())u.destroy();a(this,be).clear(),a(this,oe).clear(),a(this,sa).clear(),(n=a(this,Br))==null||n.clear(),p(this,An,null),a(this,yt).clear(),a(this,Zn).destroy(),(s=a(this,cc))==null||s.destroy(),(r=a(this,ks))==null||r.destroy(),(o=a(this,Vr))==null||o.destroy(),(l=a(this,ji))==null||l.hide(),p(this,ji,null),(c=a(this,gc))==null||c.destroy(),p(this,gc,null),p(this,lc,null),a(this,Hi)&&(clearTimeout(a(this,Hi)),p(this,Hi,null)),a(this,Wi)&&(clearTimeout(a(this,Wi)),p(this,Wi,null)),(h=this._editorUndoBar)==null||h.destroy(),p(this,mc,null)}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,td)}get useNewAltTextFlow(){return a(this,Ju)}get useNewAltTextWhenAddingImage(){return a(this,dc)}get hcmFilter(){return rt(this,"hcmFilter",a(this,Ur)?a(this,Zu).addHCMFilter(a(this,Ur).foreground,a(this,Ur).background):"none")}get direction(){return rt(this,"direction",getComputedStyle(a(this,Rs)).direction)}get _highlightColors(){return rt(this,"_highlightColors",a(this,fc)?new Map(a(this,fc).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return rt(this,"highlightColors",null);const e=new Map,n=!!a(this,Ur);for(const[s,r]of t){const o=s.endsWith("_HCM");if(n&&o){e.set(s.replace("_HCM",""),r);continue}!n&&!o&&e.set(s,r)}return rt(this,"highlightColors",e)}get highlightColorNames(){return rt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const e=this.highlightColorNames.get(t);return this._highlightColors.get(e)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),p(this,Lr,t)}setMainHighlightColorPicker(t){p(this,gc,t)}editAltText(t,e=!1){var n;(n=a(this,cc))==null||n.editAltText(this,t,e)}hasCommentManager(){return!!a(this,ks)}editComment(t,e){var n;(n=a(this,ks))==null||n.open(this,t,e)}getSignature(t){var e;(e=a(this,Vr))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,Vr)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":p(this,dc,e);break}}onPageChanging({pageNumber:t}){p(this,uc,t-1)}focusMainContainer(){a(this,Rs).focus()}findParent(t,e){for(const n of a(this,be).values()){const{x:s,y:r,width:o,height:l}=n.div.getBoundingClientRect();if(t>=s&&t<=s+o&&e>=r&&e<=r+l)return n}return null}disableUserSelect(t=!1){a(this,id).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,sa).add(t)}removeShouldRescale(t){a(this,sa).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Oo.PDF_TO_CSS_UNITS;for(const n of a(this,sa))n.onScaleChanging();(e=a(this,Lr))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t="",e=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l}=n,c=n.toString(),u=b(this,O,Cp).call(this,n).closest(".textLayer"),d=this.getSelectionBoxes(u);if(!d)return;n.empty();const f=b(this,O,wv).call(this,u),g=a(this,ae)===Z.NONE,v=()=>{const A=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:d,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l,text:c});g&&this.showAllEditors("highlight",!0,!0),e&&(A==null||A.editComment())};if(g){this.switchToMode(Z.HIGHLIGHT,v);return}v()}commentSelection(t=""){this.highlightSelection(t,!0)}addToAnnotationStorage(t){!t.isEmpty()&&a(this,Ts)&&!a(this,Ts).has(t.id)&&a(this,Ts).setValue(t.id,t)}a11yAlert(t,e=null){const n=a(this,sd);n&&(n.setAttribute("data-l10n-id",t),e?n.setAttribute("data-l10n-args",JSON.stringify(e)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,Fr)&&(p(this,Fr,!1),b(this,O,Yh).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,yt))if(e.div.contains(t)){p(this,ra,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,ra))return;const[t,e]=a(this,ra);p(this,ra,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){b(this,O,Sv).call(this),b(this,O,Av).call(this)}removeEditListeners(){b(this,O,_x).call(this),b(this,O,bv).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const n of a(this,$n))if(n.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const n of a(this,$n))if(n.isHandlingMimeForPasting(e.type)){n.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var n;if(t.preventDefault(),(n=a(this,An))==null||n.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of a(this,yt)){const r=s.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,$n))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(r){$(`paste: "${r.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of n){const h=await s.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)b(this,O,xv).call(this,c);b(this,O,Ev).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){$(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,ae)!==Z.NONE&&!this.isEditorHandlingKeyboard&&Xl._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Fr)&&(p(this,Fr,!1),b(this,O,Yh).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(t){t?(b(this,O,Px).call(this),b(this,O,Av).call(this),b(this,O,We).call(this,{isEditing:a(this,ae)!==Z.NONE,isEmpty:b(this,O,Qh).call(this),hasSomethingToUndo:a(this,Zn).hasSomethingToUndo(),hasSomethingToRedo:a(this,Zn).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,O,Rx).call(this),b(this,O,bv).call(this),b(this,O,We).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,$n)){p(this,$n,t);for(const e of a(this,$n))b(this,O,vs).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Og).id}get currentLayer(){return a(this,be).get(a(this,uc))}getLayer(t){return a(this,be).get(t)}get currentPageIndex(){return a(this,uc)}addLayer(t){a(this,be).set(t.pageIndex,t),a(this,Or)?t.enable():t.disable()}removeLayer(t){a(this,be).delete(t.pageIndex)}async updateMode(t,e=null,n=!1,s=!1,r=!1){var o,l,c,h,u;if(a(this,ae)!==t&&!(a(this,ti)&&(await a(this,ti).promise,!a(this,ti)))){if(p(this,ti,Promise.withResolvers()),(o=a(this,Lr))==null||o.commitOrRemove(),a(this,ae)===Z.POPUP&&((l=a(this,ks))==null||l.hideSidebar()),p(this,ae,t),t===Z.NONE){this.setEditingState(!1),b(this,O,Nx).call(this),(c=this._editorUndoBar)==null||c.hide(),a(this,ti).resolve();return}t===Z.SIGNATURE&&await((h=a(this,Vr))==null?void 0:h.loadSignatures()),t===Z.POPUP&&(a(this,lc)||p(this,lc,await a(this,mc).getAnnotationsByType(new Set(a(this,$n).map(d=>d._editorType)))),(u=a(this,ks))==null||u.showSidebar(a(this,lc))),this.setEditingState(!0),await b(this,O,Dx).call(this),this.unselectAll();for(const d of a(this,be).values())d.updateMode(t);if(!e){n&&this.addNewEditorFromKeyboard(),a(this,ti).resolve();return}for(const d of a(this,oe).values())d.annotationElementId===e||d.id===e?(this.setSelected(d),r?d.editComment():s&&d.enterInEditMode()):d.unselect();a(this,ti).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,ae)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){if(a(this,$n)){switch(t){case lt.CREATE:this.currentLayer.addNewEditor(e);return;case lt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,ed)||p(this,ed,new Map)).set(t,e),this.showAllEditors("highlight",e);break}if(this.hasSelection)for(const n of a(this,yt))n.updateParams(t,e);else for(const n of a(this,$n))n.updateDefaultParams(t,e)}}showAllEditors(t,e,n=!1){var r;for(const o of a(this,oe).values())o.editorType===t&&o.show(e);(((r=a(this,ed))==null?void 0:r.get(lt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&b(this,O,vs).call(this,[[lt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,$u)!==t){p(this,$u,t);for(const e of a(this,be).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const n of a(this,oe).values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return a(this,oe).get(t)}addEditor(t){a(this,oe).set(t.id,t)}removeEditor(t){var e,n;t.div.contains(document.activeElement)&&(a(this,Hi)&&clearTimeout(a(this,Hi)),p(this,Hi,setTimeout(()=>{this.focusMainContainer(),p(this,Hi,null)},0))),a(this,oe).delete(t.id),t.annotationElementId&&((e=a(this,Br))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,ia).has(t.annotationElementId))&&((n=a(this,Ts))==null||n.remove(t.id))}addDeletedAnnotationElement(t){a(this,ia).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,ia).has(t)}removeDeletedAnnotationElement(t){a(this,ia).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,An)!==t&&(p(this,An,t),t&&b(this,O,vs).call(this,t.propertiesToUpdate))}updateUI(t){a(this,O,Lx)===t&&b(this,O,vs).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){b(this,O,vs).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,yt).has(t)){a(this,yt).delete(t),t.unselect(),b(this,O,We).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,yt).add(t),t.select(),b(this,O,vs).call(this,t.propertiesToUpdate),b(this,O,We).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=a(this,Lr))==null||e.commitOrRemove();for(const n of a(this,yt))n!==t&&n.unselect();a(this,yt).clear(),a(this,yt).add(t),t.select(),b(this,O,vs).call(this,t.propertiesToUpdate),b(this,O,We).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,yt).has(t)}get firstSelectedEditor(){return a(this,yt).values().next().value}unselect(t){t.unselect(),a(this,yt).delete(t),b(this,O,We).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,yt).size!==0}get isEnterHandled(){return a(this,yt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Zn).undo(),b(this,O,We).call(this,{hasSomethingToUndo:a(this,Zn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,O,Qh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Zn).redo(),b(this,O,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Zn).hasSomethingToRedo(),isEmpty:b(this,O,Qh).call(this)})}addCommands(t){a(this,Zn).add(t),b(this,O,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,O,Qh).call(this)})}cleanUndoStack(t){a(this,Zn).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,yt)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},s=()=>{for(const o of e)b(this,O,xv).call(this,o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=a(this,An))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,An)||this.hasSelection}selectAll(){for(const t of a(this,yt))t.commit();b(this,O,Ev).call(this,a(this,oe).values())}unselectAll(){var t;if(!(a(this,An)&&(a(this,An).commitOrRemove(),a(this,ae)!==Z.NONE))&&!((t=a(this,Lr))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,yt))e.unselect();a(this,yt).clear(),b(this,O,We).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;a(this,qr)[0]+=t,a(this,qr)[1]+=e;const[s,r]=a(this,qr),o=[...a(this,yt)],l=1e3;a(this,Wi)&&clearTimeout(a(this,Wi)),p(this,Wi,setTimeout(()=>{p(this,Wi,null),a(this,qr)[0]=a(this,qr)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,oe).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,oe).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),p(this,qi,new Map);for(const t of a(this,yt))a(this,qi).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,qi))return!1;this.disableUserSelect(!1);const t=a(this,qi);p(this,qi,null);let e=!1;for(const[{x:s,y:r,pageIndex:o},l]of t)l.newX=s,l.newY=r,l.newPageIndex=o,e||(e=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const n=(s,r,o,l)=>{if(a(this,oe).has(s.id)){const c=a(this,be).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of t)n(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of t)n(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,qi))for(const n of a(this,qi).keys())n.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,yt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,An)===t}getActive(){return a(this,An)}getMode(){return a(this,ae)}get imageManager(){return rt(this,"imageManager",new yv)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:n,y:s,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(h,u,d,f)=>({x:(u-s)/o,y:1-(h+d-n)/r,width:f/o,height:d/r});break;case"180":l=(h,u,d,f)=>({x:1-(h+d-n)/r,y:1-(u+f-s)/o,width:d/r,height:f/o});break;case"270":l=(h,u,d,f)=>({x:1-(u+f-s)/o,y:(h-n)/r,width:f/o,height:d/r});break;default:l=(h,u,d,f)=>({x:(h-n)/r,y:(u-s)/o,width:d/r,height:f/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const d=e.getRangeAt(h);if(!d.collapsed)for(const{x:f,y:g,width:v,height:A}of d.getClientRects())v===0||A===0||c.push(l(f,g,v,A))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,hc)||p(this,hc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,hc))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=a(this,hc))==null?void 0:s.get(t.data.id);if(!e)return;const n=a(this,Ts).getRawValue(e);n&&(a(this,ae)===Z.NONE&&!n.hasBeenModified||n.renderAnnotationElement(t))}setMissingCanvas(t,e,n){var r;const s=(r=a(this,Br))==null?void 0:r.get(t);s&&(s.setCanvas(e,n),a(this,Br).delete(t))}addMissingCanvas(t,e){(a(this,Br)||p(this,Br,new Map)).set(t,e)}};ac=new WeakMap,An=new WeakMap,lc=new WeakMap,oe=new WeakMap,be=new WeakMap,cc=new WeakMap,Ts=new WeakMap,hc=new WeakMap,Zn=new WeakMap,ks=new WeakMap,Nr=new WeakMap,Lr=new WeakMap,uc=new WeakMap,ia=new WeakMap,qi=new WeakMap,$n=new WeakMap,sa=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,dc=new WeakMap,Zu=new WeakMap,Hi=new WeakMap,Ir=new WeakMap,fc=new WeakMap,Fr=new WeakMap,ji=new WeakMap,Og=new WeakMap,Or=new WeakMap,pc=new WeakMap,$u=new WeakMap,zr=new WeakMap,ra=new WeakMap,gc=new WeakMap,Br=new WeakMap,td=new WeakMap,ae=new WeakMap,yt=new WeakMap,Ps=new WeakMap,Vr=new WeakMap,Ur=new WeakMap,ed=new WeakMap,mc=new WeakMap,nd=new WeakMap,qr=new WeakMap,Wi=new WeakMap,Rs=new WeakMap,id=new WeakMap,sd=new WeakMap,ti=new WeakMap,O=new WeakSet,Cp=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},wv=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const n of a(this,be).values())if(n.hasTextLayer(t))return n;return null},Cx=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const n=b(this,O,Cp).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(a(this,ji)||p(this,ji,new d_(this)),a(this,ji).show(n,s,this.direction==="ltr"))},Tx=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,Ps)&&((r=a(this,ji))==null||r.hide(),p(this,Ps,null),b(this,O,We).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,Ps))return;const s=b(this,O,Cp).call(this,t).closest(".textLayer");if(!s){a(this,Ps)&&((o=a(this,ji))==null||o.hide(),p(this,Ps,null),b(this,O,We).call(this,{hasSelectedText:!1}));return}if((l=a(this,ji))==null||l.hide(),p(this,Ps,e),b(this,O,We).call(this,{hasSelectedText:!0}),!(a(this,ae)!==Z.HIGHLIGHT&&a(this,ae)!==Z.NONE)&&(a(this,ae)===Z.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),p(this,Fr,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,ae)===Z.HIGHLIGHT?b(this,O,wv).call(this,s):null;if(c==null||c.toggleDrawing(),a(this,pc)){const h=new AbortController,u=this.combinedSignal(h),d=f=>{f.type==="pointerup"&&f.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&b(this,O,Yh).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:u}),window.addEventListener("blur",d,{signal:u})}else c==null||c.toggleDrawing(!0),b(this,O,Yh).call(this,"main_toolbar")}},Yh=function(t=""){a(this,ae)===Z.HIGHLIGHT?this.highlightSelection(t):a(this,Qu)&&b(this,O,Cx).call(this)},kx=function(){document.addEventListener("selectionchange",b(this,O,Tx).bind(this),{signal:this._signal})},Px=function(){if(a(this,Ir))return;p(this,Ir,new AbortController);const t=this.combinedSignal(a(this,Ir));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Rx=function(){var t;(t=a(this,Ir))==null||t.abort(),p(this,Ir,null)},Sv=function(){if(a(this,zr))return;p(this,zr,new AbortController);const t=this.combinedSignal(a(this,zr));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},_x=function(){var t;(t=a(this,zr))==null||t.abort(),p(this,zr,null)},Av=function(){if(a(this,Nr))return;p(this,Nr,new AbortController);const t=this.combinedSignal(a(this,Nr));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},bv=function(){var t;(t=a(this,Nr))==null||t.abort(),p(this,Nr,null)},Mx=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},We=function(t){Object.entries(t).some(([n,s])=>a(this,nd)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,nd),t)}),a(this,ae)===Z.HIGHLIGHT&&t.hasSelectedEditor===!1&&b(this,O,vs).call(this,[[lt.HIGHLIGHT_FREE,!0]]))},vs=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},Dx=async function(){if(!a(this,Or)){p(this,Or,!0);const t=[];for(const e of a(this,be).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,oe).values())e.enable()}},Nx=function(){if(this.unselectAll(),a(this,Or)){p(this,Or,!1);for(const t of a(this,be).values())t.disable();for(const t of a(this,oe).values())t.disable()}},xv=function(t){const e=a(this,be).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},Lx=function(){let t=null;for(t of a(this,yt));return t},Qh=function(){if(a(this,oe).size===0)return!0;if(a(this,oe).size===1)for(const t of a(this,oe).values())return t.isEmpty();return!1},Ev=function(t){for(const e of a(this,yt))e.unselect();a(this,yt).clear();for(const e of t)e.isEmpty()||(a(this,yt).add(e),e.select());b(this,O,We).call(this,{hasSelectedEditor:this.hasSelection})},M(Xl,"TRANSLATE_SMALL",1),M(Xl,"TRANSLATE_BIG",10);let gl=Xl;var de,Gi,wi,yc,Ki,bn,vc,Xi,hn,_s,oa,Yi,Hr,Mi,Jh,Tp;const Ge=class Ge{constructor(t){S(this,Mi);S(this,de,null);S(this,Gi,!1);S(this,wi,null);S(this,yc,null);S(this,Ki,null);S(this,bn,null);S(this,vc,!1);S(this,Xi,null);S(this,hn,null);S(this,_s,null);S(this,oa,null);S(this,Yi,!1);p(this,hn,t),p(this,Yi,t._uiManager.useNewAltTextFlow),a(Ge,Hr)||p(Ge,Hr,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Ge._l10n??(Ge._l10n=t)}async render(){const t=p(this,wi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=p(this,yc,document.createElement("span"));t.append(e),a(this,Yi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Ge,Hr).missing),e.setAttribute("data-l10n-id",a(Ge,Hr)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=a(this,hn)._uiManager._signal;t.addEventListener("contextmenu",pi,{signal:n}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:n});const s=r=>{r.preventDefault(),a(this,hn)._uiManager.editAltText(a(this,hn)),a(this,Yi)&&a(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Mi,Jh)}})};return t.addEventListener("click",s,{capture:!0,signal:n}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(p(this,vc,!0),s(r))},{signal:n}),await b(this,Mi,Tp).call(this),t}finish(){a(this,wi)&&(a(this,wi).focus({focusVisible:a(this,vc)}),p(this,vc,!1))}isEmpty(){return a(this,Yi)?a(this,de)===null:!a(this,de)&&!a(this,Gi)}hasData(){return a(this,Yi)?a(this,de)!==null||!!a(this,_s):this.isEmpty()}get guessedText(){return a(this,_s)}async setGuessedText(t){a(this,de)===null&&(p(this,_s,t),p(this,oa,await Ge._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),b(this,Mi,Tp).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Yi)||a(this,de)){(e=a(this,Xi))==null||e.remove(),p(this,Xi,null);return}if(!a(this,Xi)){const n=p(this,Xi,document.createElement("div"));n.className="noAltTextBadge",a(this,hn).div.append(n)}a(this,Xi).classList.toggle("hidden",!t)}serialize(t){let e=a(this,de);return!t&&a(this,_s)===e&&(e=a(this,oa)),{altText:e,decorative:a(this,Gi),guessedText:a(this,_s),textWithDisclaimer:a(this,oa)}}get data(){return{altText:a(this,de),decorative:a(this,Gi)}}set data({altText:t,decorative:e,guessedText:n,textWithDisclaimer:s,cancel:r=!1}){n&&(p(this,_s,n),p(this,oa,s)),!(a(this,de)===t&&a(this,Gi)===e)&&(r||(p(this,de,t),p(this,Gi,e)),b(this,Mi,Tp).call(this))}toggle(t=!1){a(this,wi)&&(!t&&a(this,bn)&&(clearTimeout(a(this,bn)),p(this,bn,null)),a(this,wi).disabled=!t)}shown(){a(this,hn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Mi,Jh)}})}destroy(){var t,e;(t=a(this,wi))==null||t.remove(),p(this,wi,null),p(this,yc,null),p(this,Ki,null),(e=a(this,Xi))==null||e.remove(),p(this,Xi,null)}};de=new WeakMap,Gi=new WeakMap,wi=new WeakMap,yc=new WeakMap,Ki=new WeakMap,bn=new WeakMap,vc=new WeakMap,Xi=new WeakMap,hn=new WeakMap,_s=new WeakMap,oa=new WeakMap,Yi=new WeakMap,Hr=new WeakMap,Mi=new WeakSet,Jh=function(){return a(this,de)&&"added"||a(this,de)===null&&this.guessedText&&"review"||"missing"},Tp=async function(){var s,r,o;const t=a(this,wi);if(!t)return;if(a(this,Yi)){if(t.classList.toggle("done",!!a(this,de)),t.setAttribute("data-l10n-id",a(Ge,Hr)[a(this,Mi,Jh)]),(s=a(this,yc))==null||s.setAttribute("data-l10n-id",a(Ge,Hr)[`${a(this,Mi,Jh)}-label`]),!a(this,de)){(r=a(this,Ki))==null||r.remove();return}}else{if(!a(this,de)&&!a(this,Gi)){t.classList.remove("done"),(o=a(this,Ki))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Ki);if(!e){p(this,Ki,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,hn).id}`;const l=100,c=a(this,hn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,bn)),p(this,bn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{p(this,bn,setTimeout(()=>{p(this,bn,null),a(this,Ki).classList.add("show"),a(this,hn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;a(this,bn)&&(clearTimeout(a(this,bn)),p(this,bn,null)),(h=a(this,Ki))==null||h.classList.remove("show")},{signal:c})}a(this,Gi)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,de)),e.parentNode||t.append(e);const n=a(this,hn).getElementForAltText();n==null||n.setAttribute("aria-describedby",e.id)},S(Ge,Hr,null),M(Ge,"_l10n",null);let Eg=Ge;var Qi,aa,Si,rd,Ms,wc,jr;class np{constructor(t){S(this,Qi,null);S(this,aa,!1);S(this,Si,null);S(this,rd,null);S(this,Ms,null);S(this,wc,null);S(this,jr,!1);p(this,Si,t),this.toolbar=null}render(){if(!a(this,Si)._uiManager.hasCommentManager())return null;const t=p(this,Qi,document.createElement("button"));t.className="comment",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button");const e=a(this,Si)._uiManager._signal;if(!(e instanceof AbortSignal)||e.aborted)return t;t.addEventListener("contextmenu",pi,{signal:e}),t.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:e});const n=s=>{s.preventDefault(),this.edit()};return t.addEventListener("click",n,{capture:!0,signal:e}),t.addEventListener("keydown",s=>{s.target===t&&s.key==="Enter"&&(p(this,aa,!0),n(s))},{signal:e}),t}edit(){const{bottom:t,left:e,right:n}=a(this,Si).getClientDimensions(),s={top:t};a(this,Si)._uiManager.direction==="ltr"?s.right=n:s.left=e,a(this,Si)._uiManager.editComment(a(this,Si),s)}finish(){a(this,Qi)&&(a(this,Qi).focus({focusVisible:a(this,aa)}),p(this,aa,!1))}isDeleted(){return a(this,jr)||a(this,Ms)===""}hasBeenEdited(){return this.isDeleted()||a(this,Ms)!==a(this,rd)}serialize(){return this.data}get data(){return{text:a(this,Ms),date:a(this,wc),deleted:a(this,jr)}}set data(t){if(t===null){p(this,Ms,""),p(this,jr,!0);return}p(this,Ms,t),p(this,wc,new Date),p(this,jr,!1)}setInitialText(t){p(this,rd,t),this.data=t}toggle(t=!1){a(this,Qi)&&(a(this,Qi).disabled=!t)}shown(){}destroy(){var t;(t=a(this,Qi))==null||t.remove(),p(this,Qi,null),p(this,Ms,""),p(this,wc,null),p(this,Si,null),p(this,aa,!1),p(this,jr,!1)}}Qi=new WeakMap,aa=new WeakMap,Si=new WeakMap,rd=new WeakMap,Ms=new WeakMap,wc=new WeakMap,jr=new WeakMap;var Sc,la,od,ad,ld,cd,hd,Ds,ca,Ns,ha,Ls,zo,Ix,Fx,Ox;const Vw=class Vw{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){S(this,zo);S(this,Sc);S(this,la,!1);S(this,od,null);S(this,ad);S(this,ld);S(this,cd);S(this,hd);S(this,Ds,null);S(this,ca);S(this,Ns,null);S(this,ha);S(this,Ls,null);p(this,Sc,t),p(this,od,n),p(this,ad,e),p(this,ld,s),p(this,cd,r),p(this,hd,o),p(this,ha,new AbortController),p(this,ca,AbortSignal.any([l,a(this,ha).signal])),t.addEventListener("touchstart",b(this,zo,Ix).bind(this),{passive:!1,signal:a(this,ca)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/fs.pixelRatio}destroy(){var t,e;(t=a(this,ha))==null||t.abort(),p(this,ha,null),(e=a(this,Ds))==null||e.abort(),p(this,Ds,null)}};Sc=new WeakMap,la=new WeakMap,od=new WeakMap,ad=new WeakMap,ld=new WeakMap,cd=new WeakMap,hd=new WeakMap,Ds=new WeakMap,ca=new WeakMap,Ns=new WeakMap,ha=new WeakMap,Ls=new WeakMap,zo=new WeakSet,Ix=function(t){var s,r,o;if((s=a(this,ad))!=null&&s.call(this))return;if(t.touches.length===1){if(a(this,Ds))return;const l=p(this,Ds,new AbortController),c=AbortSignal.any([a(this,ca),l.signal]),h=a(this,Sc),u={capture:!0,signal:c,passive:!1},d=f=>{var g;f.pointerType==="touch"&&((g=a(this,Ds))==null||g.abort(),p(this,Ds,null))};h.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Jt(f),d(f))},u),h.addEventListener("pointerup",d,u),h.addEventListener("pointercancel",d,u);return}if(!a(this,Ls)){p(this,Ls,new AbortController);const l=AbortSignal.any([a(this,ca),a(this,Ls).signal]),c=a(this,Sc),h={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",b(this,zo,Fx).bind(this),h);const u=b(this,zo,Ox).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",Jt,h),c.addEventListener("pointermove",Jt,h),c.addEventListener("pointercancel",Jt,h),c.addEventListener("pointerup",Jt,h),(r=a(this,ld))==null||r.call(this)}if(Jt(t),t.touches.length!==2||(o=a(this,od))!=null&&o.call(this)){p(this,Ns,null);return}let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]),p(this,Ns,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:n.screenX,touch1Y:n.screenY})},Fx=function(t){var x;if(!a(this,Ns)||t.touches.length!==2)return;Jt(t);let[e,n]=t.touches;e.identifier>n.identifier&&([e,n]=[n,e]);const{screenX:s,screenY:r}=e,{screenX:o,screenY:l}=n,c=a(this,Ns),{touch0X:h,touch0Y:u,touch1X:d,touch1Y:f}=c,g=d-h,v=f-u,A=o-s,E=l-r,m=Math.hypot(A,E)||1,y=Math.hypot(g,v)||1;if(!a(this,la)&&Math.abs(y-m)<=Vw.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,la)){p(this,la,!0);return}const w=[(s+o)/2,(r+l)/2];(x=a(this,cd))==null||x.call(this,w,y,m)},Ox=function(t){var e;t.touches.length>=2||(a(this,Ls)&&(a(this,Ls).abort(),p(this,Ls,null),(e=a(this,hd))==null||e.call(this)),a(this,Ns)&&(Jt(t),p(this,Ns,null),p(this,la,!1)))};let Cg=Vw;var ua,Ai,Mt,xe,Ac,Wr,ud,da,Ee,fa,Is,Gr,dd,pa,xn,fd,ga,Fs,Ji,bc,xc,ei,ma,pd,zg,Y,Cv,gd,Tv,kp,zx,Bx,kv,Pp,Pv,Vx,Ux,qx,Rv,Hx,_v,jx,Wx,Gx,Mv,Zh;const it=class it{constructor(t){S(this,Y);S(this,ua,null);S(this,Ai,null);S(this,Mt,null);S(this,xe,null);S(this,Ac,!1);S(this,Wr,null);S(this,ud,"");S(this,da,!1);S(this,Ee,null);S(this,fa,null);S(this,Is,null);S(this,Gr,null);S(this,dd,"");S(this,pa,!1);S(this,xn,null);S(this,fd,!1);S(this,ga,!1);S(this,Fs,!1);S(this,Ji,null);S(this,bc,0);S(this,xc,0);S(this,ei,null);S(this,ma,null);M(this,"isSelected",!1);M(this,"_isCopy",!1);M(this,"_editToolbar",null);M(this,"_initialOptions",Object.create(null));M(this,"_initialData",null);M(this,"_isVisible",!0);M(this,"_uiManager",null);M(this,"_focusEventsAllowed",!0);S(this,pd,!1);S(this,zg,it._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=it.prototype._resizeWithKeyboard,e=gl.TRANSLATE_SMALL,n=gl.TRANSLATE_BIG;return rt(this,"_resizerKeyboardManager",new _f([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,n]}],[["Escape","mac+Escape"],it.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return rt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new g_({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(it._l10n??(it._l10n=t),it._l10nResizer||(it._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),it._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);it._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){xt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,pd)}set _isDraggable(t){var e;p(this,pd,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,zg)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):b(this,Y,Zh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,pa)?p(this,pa,!1):this.parent.setSelected(this))}focusout(t){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,s){const[r,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(t+n)/r,this.y=(e+s)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[n,s]=this.parentDimensions;this.setAt(t*n,e*s,this.width*n,this.height*s),this._onTranslated()}translate(t,e){b(this,Y,Cv).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,xn)||p(this,xn,[this.x,this.y,this.width,this.height]),b(this,Y,Cv).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,xn)||p(this,xn,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,r]}=this;if(this.x+=t/s,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,h]=this.getBaseTranslation();o+=c,l+=h;const{style:u}=n;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),n.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,xn)&&(a(this,xn)[0]!==this.x||a(this,xn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,xn)&&(a(this,xn)[2]!==this.width||a(this,xn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=it,s=n/t,r=n/e;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[n,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=n,c*=s,r*=n,o*=s,this._mustFixPosition)switch(t){case 0:r=$e(r,0,n-l),o=$e(o,0,s-c);break;case 90:r=$e(r,0,n-c),o=$e(o,l,s);break;case 180:r=$e(r,l,n),o=$e(o,c,s);break;case 270:r=$e(r,c,n),o=$e(o,0,s-l);break}this.x=r/=n,this.y=o/=s;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var n;return b(n=it,gd,Tv).call(n,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var n;return b(n=it,gd,Tv).call(n,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this;return[e*t,n*t]}setDims(t,e){const[n,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/n).toFixed(2)}%`,a(this,da)||(r.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,s=n.endsWith("%"),r=!a(this,da)&&e.endsWith("%");if(s&&r)return;const[o,l]=this.parentDimensions;s||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),!a(this,da)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Mt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,ga))return this._editToolbar;this._editToolbar=new gv(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,n]of t)await this._editToolbar.addButton(e,n);return this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Mt))==null||t.destroy())}addContainer(t){var n;const e=(n=this._editToolbar)==null?void 0:n.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Mt)||(Eg.initialize(it._l10n),p(this,Mt,new Eg(this)),a(this,ua)&&(a(this,Mt).data=a(this,ua),p(this,ua,null))),a(this,Mt)}get altTextData(){var t;return(t=a(this,Mt))==null?void 0:t.data}set altTextData(t){a(this,Mt)&&(a(this,Mt).data=t)}get guessedAltText(){var t;return(t=a(this,Mt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Mt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Mt))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Mt)&&!a(this,Mt).isEmpty()}hasAltTextData(){var t;return((t=a(this,Mt))==null?void 0:t.hasData())??!1}addCommentButton(){return a(this,xe)?a(this,xe):p(this,xe,new np(this))}get commentColor(){return null}get comment(){const t=a(this,xe);return{text:t.data.text,date:t.data.date,deleted:t.isDeleted(),color:this.commentColor}}set comment(t){a(this,xe)||p(this,xe,new np(this)),a(this,xe).data=t}setCommentData(t){a(this,xe)||p(this,xe,new np(this)),a(this,xe).setInitialText(t)}get hasEditedComment(){var t;return(t=a(this,xe))==null?void 0:t.hasBeenEdited()}async editComment(){a(this,xe)||p(this,xe,new np(this)),a(this,xe).edit()}addComment(t){if(this.hasEditedComment){const[,,,s]=t.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=s-100,h=l+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,h,s]}}}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,Ac)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),b(this,Y,_v).call(this);const[e,n]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*n/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/n).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),xx(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,ma)||p(this,ma,new Cg({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:b(this,Y,Vx).bind(this),onPinching:b(this,Y,Ux).bind(this),onPinchEnd:b(this,Y,qx).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Ne.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(p(this,pa,!0),this._isDraggable){b(this,Y,Hx).call(this,t);return}b(this,Y,Rv).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,Ji)&&clearTimeout(a(this,Ji)),p(this,Ji,setTimeout(()=>{var t;p(this,Ji,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,n=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,h=t/s,u=e/s,d=this.x*r,f=this.y*o,g=this.width*r,v=this.height*o;switch(n){case 0:return[d+h+l,o-f-u-v+c,d+h+g+l,o-f-u+c];case 90:return[d+u+l,o-f+h+c,d+u+v+l,o-f+h+g+c];case 180:return[d-h-g+l,o-f+u+c,d-h+l,o-f+u+v+c];case 270:return[d-u-v+l,o-f-h-g+c,d-u+l,o-f-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,s,r,o]=t,l=r-n,c=o-s;switch(this.rotation){case 0:return[n,e-o,l,c];case 90:return[n,e-s,c,l];case 180:return[r,e-s,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),p(this,ga,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),p(this,ga,!1),!0):!1}isInEditMode(){return a(this,ga)}shouldGetKeyboardEvents(){return a(this,Fs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&s>0&&t<r&&n>0}rebuild(){b(this,Y,_v).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){xt("An editor must be serializable")}static async deserialize(t,e,n){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n,annotationElementId:t.annotationElementId});s.rotation=t.rotation,p(s,ua,t.accessibilityData),s._isCopy=t.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,h,u]=s.getRectInCurrentCoords(t.rect,o);return s.x=l/r,s.y=c/o,s.width=h/r,s.height=u/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,Gr))==null||t.abort(),p(this,Gr,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,Ji)&&(clearTimeout(a(this,Ji)),p(this,Ji,null)),b(this,Y,Zh).call(this),this.removeEditToolbar(),a(this,ei)){for(const n of a(this,ei).values())clearTimeout(n);p(this,ei,null)}this.parent=null,(e=a(this,ma))==null||e.destroy(),p(this,ma,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,Y,zx).call(this),a(this,Ee).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),p(this,Is,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,Ee).children;if(!a(this,Ai)){p(this,Ai,Array.from(e));const o=b(this,Y,jx).bind(this),l=b(this,Y,Wx).bind(this),c=this._uiManager._signal;for(const h of a(this,Ai)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",l,{signal:c}),h.addEventListener("focus",b(this,Y,Gx).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",it._l10nResizer[u])}}const n=a(this,Ai)[0];let s=0;for(const o of e){if(o===n)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Ai).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,Ee).append(a(this,Ee).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,Ee).firstChild.before(a(this,Ee).lastChild);let o=0;for(const l of e){const h=a(this,Ai)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",it._l10nResizer[h])}}b(this,Y,Mv).call(this,0),p(this,Fs,!0),a(this,Ee).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,Fs)&&b(this,Y,Pv).call(this,a(this,dd),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){b(this,Y,Zh).call(this),this.div.focus()}select(){var t,e,n;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(n=a(this,Mt))==null||n.toggleAltTextBadge(!1)}}unselect(){var t,e,n,s,r;this.isSelected&&(this.isSelected=!1,(t=a(this,Ee))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Mt))==null||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,fd)}set isEditing(t){p(this,fd,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){p(this,da,!0);const n=t/e,{style:s}=this.div;s.aspectRatio=n,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,ei)||p(this,ei,new Map);const{action:n}=t;let s=a(this,ei).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),a(this,ei).delete(n),a(this,ei).size===0&&p(this,ei,null)},it._telemetryTimeout),a(this,ei).set(n,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),p(this,Ac,!1)}disable(){this.div&&(this.div.tabIndex=-1),p(this,Ac,!0)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const n=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),n.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};ua=new WeakMap,Ai=new WeakMap,Mt=new WeakMap,xe=new WeakMap,Ac=new WeakMap,Wr=new WeakMap,ud=new WeakMap,da=new WeakMap,Ee=new WeakMap,fa=new WeakMap,Is=new WeakMap,Gr=new WeakMap,dd=new WeakMap,pa=new WeakMap,xn=new WeakMap,fd=new WeakMap,ga=new WeakMap,Fs=new WeakMap,Ji=new WeakMap,bc=new WeakMap,xc=new WeakMap,ei=new WeakMap,ma=new WeakMap,pd=new WeakMap,zg=new WeakMap,Y=new WeakSet,Cv=function([t,e],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},gd=new WeakSet,Tv=function(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},kp=function(t){switch(t){case 90:{const[e,n]=this.pageDimensions;return[0,-e/n,n/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,n]=this.pageDimensions;return[0,e/n,-n/e,0]}default:return[1,0,0,1]}},zx=function(){if(a(this,Ee))return;p(this,Ee,document.createElement("div")),a(this,Ee).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const n of t){const s=document.createElement("div");a(this,Ee).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",b(this,Y,Bx).bind(this,n),{signal:e}),s.addEventListener("contextmenu",pi,{signal:e}),s.tabIndex=-1}this.div.prepend(a(this,Ee))},Bx=function(t,e){var u;e.preventDefault();const{isMac:n}=Ne.platform;if(e.button!==0||e.ctrlKey&&n)return;(u=a(this,Mt))==null||u.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,p(this,fa,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",b(this,Y,Pv).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Jt,{passive:!1,signal:o}),window.addEventListener("contextmenu",pi,{signal:o}),p(this,Is,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Mt))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,b(this,Y,Pp).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},kv=function(t,e,n,s){this.width=n,this.height=s,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*n,o*s),this.fixAndSetPosition(),this._onResized()},Pp=function(){if(!a(this,Is))return;const{savedX:t,savedY:e,savedWidth:n,savedHeight:s}=a(this,Is);p(this,Is,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===n&&c===s||this.addCommands({cmd:b(this,Y,kv).bind(this,r,o,l,c),undo:b(this,Y,kv).bind(this,t,e,n,s),mustExec:!0})},Pv=function(t,e){const[n,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,h=it.MIN_SIZE/n,u=it.MIN_SIZE/s,d=b(this,Y,kp).call(this,this.rotation),f=(B,z)=>[d[0]*B+d[2]*z,d[1]*B+d[3]*z],g=b(this,Y,kp).call(this,360-this.rotation),v=(B,z)=>[g[0]*B+g[2]*z,g[1]*B+g[3]*z];let A,E,m=!1,y=!1;switch(t){case"topLeft":m=!0,A=(B,z)=>[0,0],E=(B,z)=>[B,z];break;case"topMiddle":A=(B,z)=>[B/2,0],E=(B,z)=>[B/2,z];break;case"topRight":m=!0,A=(B,z)=>[B,0],E=(B,z)=>[0,z];break;case"middleRight":y=!0,A=(B,z)=>[B,z/2],E=(B,z)=>[0,z/2];break;case"bottomRight":m=!0,A=(B,z)=>[B,z],E=(B,z)=>[0,0];break;case"bottomMiddle":A=(B,z)=>[B/2,z],E=(B,z)=>[B/2,0];break;case"bottomLeft":m=!0,A=(B,z)=>[0,z],E=(B,z)=>[B,0];break;case"middleLeft":y=!0,A=(B,z)=>[0,z/2],E=(B,z)=>[B,z/2];break}const w=A(l,c),x=E(l,c);let C=f(...x);const T=it._round(r+C[0]),k=it._round(o+C[1]);let P=1,_=1,R,D;if(e.fromKeyboard)({deltaX:R,deltaY:D}=e);else{const{screenX:B,screenY:z}=e,[L,V]=a(this,fa);[R,D]=this.screenToPageTranslation(B-L,z-V),a(this,fa)[0]=B,a(this,fa)[1]=z}if([R,D]=v(R/n,D/s),m){const B=Math.hypot(l,c);P=_=Math.max(Math.min(Math.hypot(x[0]-w[0]-R,x[1]-w[1]-D)/B,1/l,1/c),h/l,u/c)}else y?P=$e(Math.abs(x[0]-w[0]-R),h,1)/l:_=$e(Math.abs(x[1]-w[1]-D),u,1)/c;const F=it._round(l*P),X=it._round(c*_);C=f(...E(F,X));const Q=T-C[0],tt=k-C[1];a(this,xn)||p(this,xn,[this.x,this.y,this.width,this.height]),this.width=F,this.height=X,this.x=Q,this.y=tt,this.setDims(n*F,s*X),this.fixAndSetPosition(),this._onResizing()},Vx=function(){var t;p(this,Is,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Mt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},Ux=function(t,e,n){let r=.7*(n/e)+1-.7;if(r===1)return;const o=b(this,Y,kp).call(this,this.rotation),l=(T,k)=>[o[0]*T+o[2]*k,o[1]*T+o[3]*k],[c,h]=this.parentDimensions,u=this.x,d=this.y,f=this.width,g=this.height,v=it.MIN_SIZE/c,A=it.MIN_SIZE/h;r=Math.max(Math.min(r,1/f,1/g),v/f,A/g);const E=it._round(f*r),m=it._round(g*r);if(E===f&&m===g)return;a(this,xn)||p(this,xn,[u,d,f,g]);const y=l(f/2,g/2),w=it._round(u+y[0]),x=it._round(d+y[1]),C=l(E/2,m/2);this.x=w-C[0],this.y=x-C[1],this.width=E,this.height=m,this.setDims(c*E,h*m),this.fixAndSetPosition(),this._onResizing()},qx=function(){var t;(t=a(this,Mt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),b(this,Y,Pp).call(this)},Rv=function(t){const{isMac:e}=Ne.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Hx=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=h=>{s.abort(),p(this,Wr,null),p(this,pa,!1),this._uiManager.endDragSession()||b(this,Y,Rv).call(this,h),n&&this._onStopDragging()};e&&(p(this,bc,t.clientX),p(this,xc,t.clientY),p(this,Wr,t.pointerId),p(this,ud,t.pointerType),window.addEventListener("pointermove",h=>{n||(n=!0,this._onStartDragging());const{clientX:u,clientY:d,pointerId:f}=h;if(f!==a(this,Wr)){Jt(h);return}const[g,v]=this.screenToPageTranslation(u-a(this,bc),d-a(this,xc));p(this,bc,u),p(this,xc,d),this._uiManager.dragSelectedEditors(g,v)},o),window.addEventListener("touchmove",Jt,o),window.addEventListener("pointerdown",h=>{h.pointerType===a(this,ud)&&(a(this,ma)||h.isPrimary)&&l(h),Jt(h)},o));const c=h=>{if(!a(this,Wr)||a(this,Wr)===h.pointerId){l(h);return}Jt(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},_v=function(){if(a(this,Gr)||!this.div)return;p(this,Gr,new AbortController);const t=this._uiManager.combinedSignal(a(this,Gr));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},jx=function(t){it._resizerKeyboardManager.exec(this,t)},Wx=function(t){var e;a(this,Fs)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,Ee)&&b(this,Y,Zh).call(this)},Gx=function(t){p(this,dd,a(this,Fs)?t:"")},Mv=function(t){if(a(this,Ai))for(const e of a(this,Ai))e.tabIndex=t},Zh=function(){p(this,Fs,!1),b(this,Y,Mv).call(this,-1),b(this,Y,Pp).call(this)},S(it,gd),M(it,"_l10n",null),M(it,"_l10nResizer",null),M(it,"_borderLineWidth",-1),M(it,"_colorManager",new vv),M(it,"_zIndex",1),M(it,"_telemetryTimeout",1e3);let Tt=it;class g_ extends Tt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const vS=3285377520,Yn=4294901760,zi=65535;class Kx{constructor(t){this.h1=t?t&4294967295:vS,this.h2=t?t&4294967295:vS}update(t){let e,n;if(typeof t=="string"){e=new Uint8Array(t.length*2),n=0;for(let A=0,E=t.length;A<E;A++){const m=t.charCodeAt(A);m<=255?e[n++]=m:(e[n++]=m>>>8,e[n++]=m&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),n=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,r=n-s*4,o=new Uint32Array(e.buffer,0,s);let l=0,c=0,h=this.h1,u=this.h2;const d=3432918353,f=461845907,g=d&zi,v=f&zi;for(let A=0;A<s;A++)A&1?(l=o[A],l=l*d&Yn|l*g&zi,l=l<<15|l>>>17,l=l*f&Yn|l*v&zi,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[A],c=c*d&Yn|c*g&zi,c=c<<15|c>>>17,c=c*f&Yn|c*v&zi,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,r){case 3:l^=e[s*4+2]<<16;case 2:l^=e[s*4+1]<<8;case 1:l^=e[s*4],l=l*d&Yn|l*g&zi,l=l<<15|l>>>17,l=l*f&Yn|l*v&zi,s&1?h^=l:u^=l}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Yn|t*36045&zi,e=e*4283543511&Yn|((e<<16|t>>>16)*2950163797&Yn)>>>16,t^=e>>>1,t=t*444984403&Yn|t*60499&zi,e=e*3301882366&Yn|((e<<16|t>>>16)*3120437893&Yn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const Dv=Object.freeze({map:null,hash:"",transfer:void 0});var ya,va,Ce,Bg,Xx;class Dw{constructor(){S(this,Bg);S(this,ya,!1);S(this,va,null);S(this,Ce,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=a(this,Ce).get(t);return n===void 0?e:Object.assign(e,n)}getRawValue(t){return a(this,Ce).get(t)}remove(t){if(a(this,Ce).delete(t),a(this,Ce).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,Ce).values())if(e instanceof Tt)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=a(this,Ce).get(t);let s=!1;if(n!==void 0)for(const[r,o]of Object.entries(e))n[r]!==o&&(s=!0,n[r]=o);else s=!0,a(this,Ce).set(t,e);s&&b(this,Bg,Xx).call(this),e instanceof Tt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,Ce).has(t)}get size(){return a(this,Ce).size}resetModified(){a(this,ya)&&(p(this,ya,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new Yx(this)}get serializable(){if(a(this,Ce).size===0)return Dv;const t=new Map,e=new Kx,n=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,Ce)){const c=l instanceof Tt?l.serialize(!1,s):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&n.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:n}:Dv}get editorStats(){let t=null;const e=new Map;for(const n of a(this,Ce).values()){if(!(n instanceof Tt))continue;const s=n.telemetryFinalData;if(!s)continue;const{type:r}=s;e.has(r)||e.set(r,Object.getPrototypeOf(n).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(s)){if(l==="type")continue;let h=o.get(l);h||(h=new Map,o.set(l,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[n,s]of e)t[n]=s.computeTelemetryFinalData(t[n]);return t}resetModifiedIds(){p(this,va,null)}get modifiedIds(){if(a(this,va))return a(this,va);const t=[];for(const e of a(this,Ce).values())!(e instanceof Tt)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return p(this,va,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,Ce).entries()}}ya=new WeakMap,va=new WeakMap,Ce=new WeakMap,Bg=new WeakSet,Xx=function(){a(this,ya)||(p(this,ya,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var md;class Yx extends Dw{constructor(e){super();S(this,md);const{map:n,hash:s,transfer:r}=e.serializable,o=structuredClone(n,r?{transfer:r}:null);p(this,md,{map:o,hash:s,transfer:r})}get print(){xt("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,md)}get modifiedIds(){return rt(this,"modifiedIds",{ids:new Set,hash:""})}}md=new WeakMap;var Ec;class m_{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){S(this,Ec,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ec).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:n}){if(!(!t||a(this,Ec).has(t.loadedName))){if($t(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=t,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Ec).add(s),n==null||n(t)}catch{$(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}xt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const n=t.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw $(`Failed to load font '${n.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return rt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return rt(this,"isSyncFontLoadingSupported",Ze||Ne.platform.isFirefox)}_queueLoadingCallback(t){function e(){for($t(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const r=n.shift();setTimeout(r.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:e,callback:t};return n.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return rt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(x,C){return x.charCodeAt(C)<<24|x.charCodeAt(C+1)<<16|x.charCodeAt(C+2)<<8|x.charCodeAt(C+3)&255}function s(x,C,T,k){const P=x.substring(0,C),_=x.substring(C+T);return P+k+_}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function u(x,C){if(++h>30){$("Load test font never loaded."),C();return}if(c.font="30px "+x,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){C();return}setTimeout(u.bind(null,x,C))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const v=16,A=1482184792;let E=n(f,v);for(r=0,o=d.length-3;r<o;r+=4)E=E-A+n(d,r)|0;r<d.length&&(E=E-A+n(d+"XXX",r)|0),f=s(f,v,4,t_(E));const m=`url(data:font/opentype;base64,${btoa(f)});`,y=`@font-face {font-family:"${d}";src:${m}}`;this.insertRule(y);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const x of[t.loadedName,d]){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=x,w.append(C)}this._document.body.append(w),u(d,()=>{w.remove(),e.complete()})}}Ec=new WeakMap;class y_{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const n in t)this[n]=t[n];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${yx(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(n=this._inspectFont)==null||n.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const n=this.loadedName+"_path_"+e;let s;try{s=t.get(n)}catch(o){$(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||t.delete(n),this.compiledGlyphs[e]=r}}function v_(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(Ze)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function w_(i){if(Ze&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return kf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ip(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const Nv=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,S_=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",A_=r_.bind(null,Nv,S_);var Os,Vg;class b_{constructor(){S(this,Os,new Map);S(this,Vg,Promise.resolve())}postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};a(this,Vg).then(()=>{for(const[s]of a(this,Os))s.call(this,n)})}addEventListener(t,e,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:r}=n;if(r.aborted){$("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Os).set(e,s)}removeEventListener(t,e){const n=a(this,Os).get(e);n==null||n(),a(this,Os).delete(e)}terminate(){for(const[,t]of a(this,Os))t==null||t();a(this,Os).clear()}}Os=new WeakMap,Vg=new WeakMap;const sp={DATA:1,ERROR:2},Xt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function wS(){}function ln(i){if(i instanceof Fo||i instanceof dv||i instanceof gS||i instanceof bg||i instanceof cy)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||xt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Fo(i.message);case"InvalidPDFException":return new dv(i.message);case"PasswordException":return new gS(i.message,i.code);case"ResponseException":return new bg(i.message,i.status,i.missing);case"UnknownErrorException":return new cy(i.message,i.details)}return new cy(i.message,i.toString())}var Cc,ui,Qx,Jx,Zx,Rp;class $h{constructor(t,e,n){S(this,ui);S(this,Cc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",b(this,ui,Qx).bind(this),{signal:a(this,Cc).signal})}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},n)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,n,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:h.desiredSize},s),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:l,stream:Xt.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{$t(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:Xt.CANCEL,streamId:r,reason:ln(h)}),u.promise}},n)}destroy(){var t;(t=a(this,Cc))==null||t.abort(),p(this,Cc,null)}}Cc=new WeakMap,ui=new WeakSet,Qx=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){b(this,ui,Zx).call(this,t);return}if(t.callback){const n=t.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],t.callback===sp.DATA)s.resolve(t.data);else if(t.callback===sp.ERROR)s.reject(ln(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const n=this.sourceName,s=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:n,targetName:s,callback:sp.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:n,targetName:s,callback:sp.ERROR,callbackId:t.callbackId,reason:ln(o)})});return}if(t.streamId){b(this,ui,Jx).call(this,t);return}e(t.data)},Jx=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(h,u=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=u,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:n,targetName:s,stream:Xt.ENQUEUE,streamId:e,chunk:h},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Xt.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){$t(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:n,targetName:s,stream:Xt.ERROR,streamId:e,reason:ln(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Xt.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:Xt.START_COMPLETE,streamId:e,reason:ln(h)})})},Zx=function(t){const e=t.streamId,n=this.sourceName,s=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case Xt.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(ln(t.reason));break;case Xt.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(ln(t.reason));break;case Xt.PULL:if(!l){r.postMessage({sourceName:n,targetName:s,stream:Xt.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||wS).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Xt.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:Xt.PULL_COMPLETE,streamId:e,reason:ln(h)})});break;case Xt.ENQUEUE:if($t(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Xt.CLOSE:if($t(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),b(this,ui,Rp).call(this,o,e);break;case Xt.ERROR:$t(o,"error should have stream controller"),o.controller.error(ln(t.reason)),b(this,ui,Rp).call(this,o,e);break;case Xt.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(ln(t.reason)),b(this,ui,Rp).call(this,o,e);break;case Xt.CANCEL:if(!l)break;const c=ln(t.reason);Promise.try(l.onCancel||wS,c).then(function(){r.postMessage({sourceName:n,targetName:s,stream:Xt.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:n,targetName:s,stream:Xt.CANCEL_COMPLETE,streamId:e,reason:ln(h)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Rp=async function(t,e){var n,s,r;await Promise.allSettled([(n=t.startCall)==null?void 0:n.promise,(s=t.pullCall)==null?void 0:s.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var yd;class $x{constructor({enableHWA:t=!1}){S(this,yd,!1);p(this,yd,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!a(this,yd)})}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){xt("Abstract method `_createCanvas` called.")}}yd=new WeakMap;class x_ extends $x{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}class tE{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){xt("Abstract method `_fetch` called.")}}class SS extends tE{async _fetch(t){const e=await Pf(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):kf(e)}}class eE{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,n,s,r){return"none"}destroy(t=!1){}}var wa,Tc,zs,Bs,Ve,Sa,Aa,U,ze,tu,Pl,_p,Rl,nE,Lv,_l,eu,nu,Iv,iu;class E_ extends eE{constructor({docId:e,ownerDocument:n=globalThis.document}){super();S(this,U);S(this,wa);S(this,Tc);S(this,zs);S(this,Bs);S(this,Ve);S(this,Sa);S(this,Aa,0);p(this,Bs,e),p(this,Ve,n)}addFilter(e){if(!e)return"none";let n=a(this,U,ze).get(e);if(n)return n;const[s,r,o]=b(this,U,_p).call(this,e),l=e.length===1?s:`${s}${r}${o}`;if(n=a(this,U,ze).get(l),n)return a(this,U,ze).set(e,n),n;const c=`g_${a(this,Bs)}_transfer_map_${ne(this,Aa)._++}`,h=b(this,U,Rl).call(this,c);a(this,U,ze).set(e,h),a(this,U,ze).set(l,h);const u=b(this,U,_l).call(this,c);return b(this,U,nu).call(this,s,r,o,u),h}addHCMFilter(e,n){var v;const s=`${e}-${n}`,r="base";let o=a(this,U,tu).get(r);if((o==null?void 0:o.key)===s||(o?((v=o.filter)==null||v.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,U,tu).set(r,o)),!e||!n))return o.url;const l=b(this,U,iu).call(this,e);e=W.makeHexColor(...l);const c=b(this,U,iu).call(this,n);if(n=W.makeHexColor(...c),a(this,U,Pl).style.color="",e==="#000000"&&n==="#ffffff"||e===n)return o.url;const h=new Array(256);for(let A=0;A<=255;A++){const E=A/255;h[A]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const u=h.join(","),d=`g_${a(this,Bs)}_hcm_filter`,f=o.filter=b(this,U,_l).call(this,d);b(this,U,nu).call(this,u,u,u,f),b(this,U,Lv).call(this,f);const g=(A,E)=>{const m=l[A]/255,y=c[A]/255,w=new Array(E+1);for(let x=0;x<=E;x++)w[x]=m+x/E*(y-m);return w.join(",")};return b(this,U,nu).call(this,g(0,5),g(1,5),g(2,5),f),o.url=b(this,U,Rl).call(this,d),o.url}addAlphaFilter(e){let n=a(this,U,ze).get(e);if(n)return n;const[s]=b(this,U,_p).call(this,[e]),r=`alpha_${s}`;if(n=a(this,U,ze).get(r),n)return a(this,U,ze).set(e,n),n;const o=`g_${a(this,Bs)}_alpha_map_${ne(this,Aa)._++}`,l=b(this,U,Rl).call(this,o);a(this,U,ze).set(e,l),a(this,U,ze).set(r,l);const c=b(this,U,_l).call(this,o);return b(this,U,Iv).call(this,s,c),l}addLuminosityFilter(e){let n=a(this,U,ze).get(e||"luminosity");if(n)return n;let s,r;if(e?([s]=b(this,U,_p).call(this,[e]),r=`luminosity_${s}`):r="luminosity",n=a(this,U,ze).get(r),n)return a(this,U,ze).set(e,n),n;const o=`g_${a(this,Bs)}_luminosity_map_${ne(this,Aa)._++}`,l=b(this,U,Rl).call(this,o);a(this,U,ze).set(e,l),a(this,U,ze).set(r,l);const c=b(this,U,_l).call(this,o);return b(this,U,nE).call(this,c),e&&b(this,U,Iv).call(this,s,c),l}addHighlightHCMFilter(e,n,s,r,o){var y;const l=`${n}-${s}-${r}-${o}`;let c=a(this,U,tu).get(e);if((c==null?void 0:c.key)===l||(c?((y=c.filter)==null||y.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,U,tu).set(e,c)),!n||!s))return c.url;const[h,u]=[n,s].map(b(this,U,iu).bind(this));let d=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),f=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,v]=[r,o].map(b(this,U,iu).bind(this));f<d&&([d,f,g,v]=[f,d,v,g]),a(this,U,Pl).style.color="";const A=(w,x,C)=>{const T=new Array(256),k=(f-d)/C,P=w/255,_=(x-w)/(255*C);let R=0;for(let D=0;D<=C;D++){const F=Math.round(d+D*k),X=P+D*_;for(let Q=R;Q<=F;Q++)T[Q]=X;R=F+1}for(let D=R;D<256;D++)T[D]=T[R-1];return T.join(",")},E=`g_${a(this,Bs)}_hcm_${e}_filter`,m=c.filter=b(this,U,_l).call(this,E);return b(this,U,Lv).call(this,m),b(this,U,nu).call(this,A(g[0],v[0],5),A(g[1],v[1],5),A(g[2],v[2],5),m),c.url=b(this,U,Rl).call(this,E),c.url}destroy(e=!1){var n,s,r,o;e&&((n=a(this,Sa))!=null&&n.size)||((s=a(this,zs))==null||s.parentNode.parentNode.remove(),p(this,zs,null),(r=a(this,Tc))==null||r.clear(),p(this,Tc,null),(o=a(this,Sa))==null||o.clear(),p(this,Sa,null),p(this,Aa,0))}}wa=new WeakMap,Tc=new WeakMap,zs=new WeakMap,Bs=new WeakMap,Ve=new WeakMap,Sa=new WeakMap,Aa=new WeakMap,U=new WeakSet,ze=function(){return a(this,Tc)||p(this,Tc,new Map)},tu=function(){return a(this,Sa)||p(this,Sa,new Map)},Pl=function(){if(!a(this,zs)){const e=a(this,Ve).createElement("div"),{style:n}=e;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=a(this,Ve).createElementNS(ys,"svg");s.setAttribute("width",0),s.setAttribute("height",0),p(this,zs,a(this,Ve).createElementNS(ys,"defs")),e.append(s),s.append(a(this,zs)),a(this,Ve).body.append(e)}return a(this,zs)},_p=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let f=0;f<256;f++)u[f]=h[f]/255;const d=u.join(",");return[d,d,d]}const[n,s,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=n[h]/255,l[h]=s[h]/255,c[h]=r[h]/255;return[o.join(","),l.join(","),c.join(",")]},Rl=function(e){if(a(this,wa)===void 0){p(this,wa,"");const n=a(this,Ve).URL;n!==a(this,Ve).baseURI&&(Am(n)?$('#createUrl: ignore "data:"-URL for performance reasons.'):p(this,wa,px(n,"")))}return`url(${a(this,wa)}#${e})`},nE=function(e){const n=a(this,Ve).createElementNS(ys,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(n)},Lv=function(e){const n=a(this,Ve).createElementNS(ys,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(n)},_l=function(e){const n=a(this,Ve).createElementNS(ys,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",e),a(this,U,Pl).append(n),n},eu=function(e,n,s){const r=a(this,Ve).createElementNS(ys,n);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),e.append(r)},nu=function(e,n,s,r){const o=a(this,Ve).createElementNS(ys,"feComponentTransfer");r.append(o),b(this,U,eu).call(this,o,"feFuncR",e),b(this,U,eu).call(this,o,"feFuncG",n),b(this,U,eu).call(this,o,"feFuncB",s)},Iv=function(e,n){const s=a(this,Ve).createElementNS(ys,"feComponentTransfer");n.append(s),b(this,U,eu).call(this,s,"feFuncA",e)},iu=function(e){return a(this,U,Pl).style.color=e,bm(getComputedStyle(a(this,U,Pl)).getPropertyValue("color"))};class iE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){xt("Abstract method `_fetch` called.")}}class AS extends iE{async _fetch(t){const e=await Pf(t,"arraybuffer");return new Uint8Array(e)}}class sE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(n=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){xt("Abstract method `_fetch` called.")}}class bS extends sE{async _fetch(t){const e=await Pf(t,"arraybuffer");return new Uint8Array(e)}}Ze&&$("Please use the `legacy` build in Node.js environments.");async function Nw(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class C_ extends eE{}class T_ extends $x{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class k_ extends tE{async _fetch(t){return Nw(t)}}class P_ extends iE{async _fetch(t){return Nw(t)}}class R_ extends sE{async _fetch(t){return Nw(t)}}const Cl="__forcedDependency";var En,Xe,kc,Zi,Pc,Vs,vt,St,Us,Cn,Kr,Rc,Xr,Yr;class __{constructor(t){S(this,En,{__proto__:null});S(this,Xe,{__proto__:null,transform:[],moveText:[],sameLineText:[],[Cl]:[]});S(this,kc,new Map);S(this,Zi,[]);S(this,Pc,[]);S(this,Vs,[[1,0,0,1,0,0]]);S(this,vt,[-1/0,-1/0,1/0,1/0]);S(this,St,new Float64Array([1/0,1/0,-1/0,-1/0]));S(this,Us,-1);S(this,Cn,new Set);S(this,Kr,new Map);S(this,Rc,new Map);S(this,Xr);S(this,Yr);p(this,Xr,t.width),p(this,Yr,t.height)}save(t){return p(this,En,{__proto__:a(this,En)}),p(this,Xe,{__proto__:a(this,Xe),transform:{__proto__:a(this,Xe).transform},moveText:{__proto__:a(this,Xe).moveText},sameLineText:{__proto__:a(this,Xe).sameLineText},[Cl]:{__proto__:a(this,Xe)[Cl]}}),p(this,vt,{__proto__:a(this,vt)}),a(this,Zi).push([t,null]),this}restore(t){const e=Object.getPrototypeOf(a(this,En));if(e===null)return this;p(this,En,e),p(this,Xe,Object.getPrototypeOf(a(this,Xe))),p(this,vt,Object.getPrototypeOf(a(this,vt)));const n=a(this,Zi).pop();return n!==void 0&&(n[1]=t),this}recordOpenMarker(t){return a(this,Zi).push([t,null]),this}getOpenMarker(){return a(this,Zi).length===0?null:a(this,Zi).at(-1)[0]}recordCloseMarker(t){const e=a(this,Zi).pop();return e!==void 0&&(e[1]=t),this}beginMarkedContent(t){return a(this,Pc).push([t,null]),this}endMarkedContent(t){const e=a(this,Pc).pop();return e!==void 0&&(e[1]=t),this}pushBaseTransform(t){return a(this,Vs).push(W.multiplyByDOMMatrix(a(this,Vs).at(-1),t.getTransform())),this}popBaseTransform(){return a(this,Vs).length>1&&a(this,Vs).pop(),this}recordSimpleData(t,e){return a(this,En)[t]=e,this}recordIncrementalData(t,e){return a(this,Xe)[t].push(e),this}resetIncrementalData(t,e){return a(this,Xe)[t].length=0,this}recordNamedData(t,e){return a(this,kc).set(t,e),this}recordFutureForcedDependency(t,e){return this.recordIncrementalData(Cl,e),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const e of t)e in a(this,En)&&this.recordFutureForcedDependency(e,a(this,En)[e]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of a(this,Cn))this.recordFutureForcedDependency(Cl,t);return this}resetBBox(t){return p(this,Us,t),a(this,St)[0]=1/0,a(this,St)[1]=1/0,a(this,St)[2]=-1/0,a(this,St)[3]=-1/0,this}get hasPendingBBox(){return a(this,Us)!==-1}recordClipBox(t,e,n,s,r,o){const l=W.multiplyByDOMMatrix(a(this,Vs).at(-1),e.getTransform()),c=[1/0,1/0,-1/0,-1/0];W.axialAlignedBoundingBox([n,r,s,o],l,c);const h=W.intersect(a(this,vt),c);return h?(a(this,vt)[0]=h[0],a(this,vt)[1]=h[1],a(this,vt)[2]=h[2],a(this,vt)[3]=h[3]):(a(this,vt)[0]=a(this,vt)[1]=1/0,a(this,vt)[2]=a(this,vt)[3]=-1/0),this}recordBBox(t,e,n,s,r,o){const l=a(this,vt);if(l[0]===1/0)return this;const c=W.multiplyByDOMMatrix(a(this,Vs).at(-1),e.getTransform());if(l[0]===-1/0)return W.axialAlignedBoundingBox([n,r,s,o],c,a(this,St)),this;const h=[1/0,1/0,-1/0,-1/0];return W.axialAlignedBoundingBox([n,r,s,o],c,h),a(this,St)[0]=Math.min(a(this,St)[0],Math.max(h[0],l[0])),a(this,St)[1]=Math.min(a(this,St)[1],Math.max(h[1],l[1])),a(this,St)[2]=Math.max(a(this,St)[2],Math.min(h[2],l[2])),a(this,St)[3]=Math.max(a(this,St)[3],Math.min(h[3],l[3])),this}recordCharacterBBox(t,e,n,s=1,r=0,o=0,l){const c=n.bbox;let h,u;if(c&&(h=c[2]!==c[0]&&c[3]!==c[1]&&a(this,Rc).get(n),h!==!1&&(u=[0,0,0,0],W.axialAlignedBoundingBox(c,n.fontMatrix,u),(s!==1||r!==0||o!==0)&&W.scaleMinMax([s,0,0,-s,r,o],u),h)))return this.recordBBox(t,e,u[0],u[2],u[1],u[3]);if(!l)return this.recordFullPageBBox(t);const d=l();return c&&u&&h===void 0&&(h=u[0]<=r-d.actualBoundingBoxLeft&&u[2]>=r+d.actualBoundingBoxRight&&u[1]<=o-d.actualBoundingBoxAscent&&u[3]>=o+d.actualBoundingBoxDescent,a(this,Rc).set(n,h),h)?this.recordBBox(t,e,u[0],u[2],u[1],u[3]):this.recordBBox(t,e,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(t){return a(this,St)[0]=Math.max(0,a(this,vt)[0]),a(this,St)[1]=Math.max(0,a(this,vt)[1]),a(this,St)[2]=Math.min(a(this,Xr),a(this,vt)[2]),a(this,St)[3]=Math.min(a(this,Yr),a(this,vt)[3]),this}getSimpleIndex(t){return a(this,En)[t]}recordDependencies(t,e){const n=a(this,Cn),s=a(this,En),r=a(this,Xe);for(const o of e)o in a(this,En)?n.add(s[o]):o in r&&r[o].forEach(n.add,n);return this}copyDependenciesFromIncrementalOperation(t,e){const n=a(this,Kr),s=a(this,Cn);for(const r of a(this,Xe)[e])n.get(r).dependencies.forEach(s.add,s.add(r));return this}recordNamedDependency(t,e){return a(this,kc).has(e)&&a(this,Cn).add(a(this,kc).get(e)),this}recordOperation(t,e=!1){this.recordDependencies(t,[Cl]);const n=new Set(a(this,Cn)),s=a(this,Zi).concat(a(this,Pc)),r=a(this,Us)===t?{minX:a(this,St)[0],minY:a(this,St)[1],maxX:a(this,St)[2],maxY:a(this,St)[3]}:null;return a(this,Kr).set(t,{bbox:r,pairs:s,dependencies:n}),e||p(this,Us,-1),a(this,Cn).clear(),this}bboxToClipBoxDropOperation(t){return a(this,Us)!==-1&&(p(this,Us,-1),a(this,vt)[0]=Math.max(a(this,vt)[0],a(this,St)[0]),a(this,vt)[1]=Math.max(a(this,vt)[1],a(this,St)[1]),a(this,vt)[2]=Math.min(a(this,vt)[2],a(this,St)[2]),a(this,vt)[3]=Math.min(a(this,vt)[3],a(this,St)[3])),a(this,Cn).clear(),this}_takePendingDependencies(){const t=a(this,Cn);return p(this,Cn,new Set),t}_extractOperation(t){const e=a(this,Kr).get(t);return a(this,Kr).delete(t),e}_pushPendingDependencies(t){for(const e of t)a(this,Cn).add(e)}take(){return a(this,Rc).clear(),Array.from(a(this,Kr),([t,{bbox:e,pairs:n,dependencies:s}])=>(n.forEach(r=>r.forEach(s.add,s)),s.delete(t),{minX:((e==null?void 0:e.minX)??0)/a(this,Xr),maxX:((e==null?void 0:e.maxX)??a(this,Xr))/a(this,Xr),minY:((e==null?void 0:e.minY)??0)/a(this,Yr),maxY:((e==null?void 0:e.maxY)??a(this,Yr))/a(this,Yr),dependencies:Array.from(s).sort((r,o)=>r-o),idx:t}))}}En=new WeakMap,Xe=new WeakMap,kc=new WeakMap,Zi=new WeakMap,Pc=new WeakMap,Vs=new WeakMap,vt=new WeakMap,St=new WeakMap,Us=new WeakMap,Cn=new WeakMap,Kr=new WeakMap,Rc=new WeakMap,Xr=new WeakMap,Yr=new WeakMap;var gt,Ft,_c,Qr,Mc;const Uw=class Uw{constructor(t,e){S(this,gt);S(this,Ft);S(this,_c,0);S(this,Qr);S(this,Mc,0);if(t instanceof Uw)return t;p(this,gt,t),p(this,Qr,t._takePendingDependencies()),p(this,Ft,e)}save(t){return ne(this,Mc)._++,a(this,gt).save(a(this,Ft)),this}restore(t){return a(this,Mc)>0&&(a(this,gt).restore(a(this,Ft)),ne(this,Mc)._--),this}recordOpenMarker(t){return ne(this,_c)._++,this}getOpenMarker(){return a(this,_c)>0?a(this,Ft):a(this,gt).getOpenMarker()}recordCloseMarker(t){return ne(this,_c)._--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return a(this,gt).pushBaseTransform(t),this}popBaseTransform(){return a(this,gt).popBaseTransform(),this}recordSimpleData(t,e){return a(this,gt).recordSimpleData(t,a(this,Ft)),this}recordIncrementalData(t,e){return a(this,gt).recordIncrementalData(t,a(this,Ft)),this}resetIncrementalData(t,e){return a(this,gt).resetIncrementalData(t,a(this,Ft)),this}recordNamedData(t,e){return this}recordFutureForcedDependency(t,e){return a(this,gt).recordFutureForcedDependency(t,a(this,Ft)),this}inheritSimpleDataAsFutureForcedDependencies(t){return a(this,gt).inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,gt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return a(this,gt).hasPendingBBox||a(this,gt).resetBBox(a(this,Ft)),this}get hasPendingBBox(){return a(this,gt).hasPendingBBox}recordClipBox(t,e,n,s,r,o){return a(this,gt).recordClipBox(a(this,Ft),e,n,s,r,o),this}recordBBox(t,e,n,s,r,o){return a(this,gt).recordBBox(a(this,Ft),e,n,s,r,o),this}recordCharacterBBox(t,e,n,s,r,o,l){return a(this,gt).recordCharacterBBox(a(this,Ft),e,n,s,r,o,l),this}recordFullPageBBox(t){return a(this,gt).recordFullPageBBox(a(this,Ft)),this}getSimpleIndex(t){return a(this,gt).getSimpleIndex(t)}recordDependencies(t,e){return a(this,gt).recordDependencies(a(this,Ft),e),this}copyDependenciesFromIncrementalOperation(t,e){return a(this,gt).copyDependenciesFromIncrementalOperation(a(this,Ft),e),this}recordNamedDependency(t,e){return a(this,gt).recordNamedDependency(a(this,Ft),e),this}recordOperation(t){a(this,gt).recordOperation(a(this,Ft),!0);const e=a(this,gt)._extractOperation(a(this,Ft));for(const n of e.dependencies)a(this,Qr).add(n);return a(this,Qr).delete(a(this,Ft)),a(this,Qr).delete(null),this}bboxToClipBoxDropOperation(t){return a(this,gt).bboxToClipBoxDropOperation(a(this,Ft)),this}recordNestedDependencies(){a(this,gt)._pushPendingDependencies(a(this,Qr))}take(){throw new Error("Unreachable")}};gt=new WeakMap,Ft=new WeakMap,_c=new WeakMap,Qr=new WeakMap,Mc=new WeakMap;let Tg=Uw;const Qn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation"],transform:["transform"],transformAndFill:["transform","fillColor"]},Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Fv(i,t){if(!t)return;const e=t[2]-t[0],n=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,n),i.clip(s)}class Lw{isModifyingCurrentTransform(){return!1}getPattern(){xt("Abstract method `getPattern` called.")}}class M_ extends Lw{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)e.addColorStop(n[0],n[1]);return e}getPattern(t,e,n,s){let r;if(s===Re.STROKE||s===Re.FILL){const o=e.current.getClippedPathBoundingBox(s,Ot(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),n=W.transform(n,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),Fv(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const d=new DOMMatrix(n);r.setTransform(d)}else Fv(t,this._bbox),r=this._createGradient(t);return r}}function dy(i,t,e,n,s,r,o,l){const c=t.coords,h=t.colors,u=i.data,d=i.width*4;let f;c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f),c[n+1]>c[s+1]&&(f=n,n=s,s=f,f=o,o=l,l=f),c[e+1]>c[n+1]&&(f=e,e=n,n=f,f=r,r=o,o=f);const g=(c[e]+t.offsetX)*t.scaleX,v=(c[e+1]+t.offsetY)*t.scaleY,A=(c[n]+t.offsetX)*t.scaleX,E=(c[n+1]+t.offsetY)*t.scaleY,m=(c[s]+t.offsetX)*t.scaleX,y=(c[s+1]+t.offsetY)*t.scaleY;if(v>=y)return;const w=h[r],x=h[r+1],C=h[r+2],T=h[o],k=h[o+1],P=h[o+2],_=h[l],R=h[l+1],D=h[l+2],F=Math.round(v),X=Math.round(y);let Q,tt,B,z,L,V,G,ct;for(let J=F;J<=X;J++){if(J<E){const Et=J<v?0:(v-J)/(v-E);Q=g-(g-A)*Et,tt=w-(w-T)*Et,B=x-(x-k)*Et,z=C-(C-P)*Et}else{let Et;J>y?Et=1:E===y?Et=0:Et=(E-J)/(E-y),Q=A-(A-m)*Et,tt=T-(T-_)*Et,B=k-(k-R)*Et,z=P-(P-D)*Et}let ht;J<v?ht=0:J>y?ht=1:ht=(v-J)/(v-y),L=g-(g-m)*ht,V=w-(w-_)*ht,G=x-(x-R)*ht,ct=C-(C-D)*ht;const Se=Math.round(Math.min(Q,L)),je=Math.round(Math.max(Q,L));let ee=d*J+Se*4;for(let Et=Se;Et<=je;Et++)ht=(Q-Et)/(Q-L),ht<0?ht=0:ht>1&&(ht=1),u[ee++]=tt-(tt-V)*ht|0,u[ee++]=B-(B-G)*ht|0,u[ee++]=z-(z-ct)*ht|0,u[ee++]=255}}function D_(i,t,e){const n=t.coords,s=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(n.length/l)-1,h=l-1;for(r=0;r<c;r++){let u=r*l;for(let d=0;d<h;d++,u++)dy(i,e,n[u],n[u+1],n[u+l],s[u],s[u+1],s[u+l]),dy(i,e,n[u+l+1],n[u+1],n[u+l],s[u+l+1],s[u+1],s[u+l])}break;case"triangles":for(r=0,o=n.length;r<o;r+=3)dy(i,e,n[r],n[r+1],n[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class N_ extends Lw{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,n){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/d,v=u/f,A={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/v},E=d+2*2,m=f+2*2,y=n.getCanvas("mesh",E,m),w=y.context,x=w.createImageData(d,f);if(e){const T=x.data;for(let k=0,P=T.length;k<P;k+=4)T[k]=e[0],T[k+1]=e[1],T[k+2]=e[2],T[k+3]=255}for(const T of this._figures)D_(x,T,A);return w.putImageData(x,2,2),{canvas:y.canvas,offsetX:l-2*g,offsetY:c-2*v,scaleX:g,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(t,e,n,s){Fv(t,this._bbox);const r=new Float32Array(2);if(s===Re.SHADING)W.singularValueDecompose2dScale(Ot(t),r);else if(this.matrix){W.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;W.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else W.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,s===Re.SHADING?null:this._background,e.cachedCanvases);return s!==Re.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class L_ extends Lw{getPattern(){return"hotpink"}}function I_(i){switch(i[0]){case"RadialAxial":return new M_(i);case"Mesh":return new N_(i);case"Dummy":return new L_}throw new Error(`Unknown IR type: ${i[0]}`)}const xS={COLORED:1,UNCOLORED:2},Ug=class Ug{constructor(t,e,n,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(t){var L,V,G,ct;const{bbox:e,operatorList:n,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),Sm("TilingType: "+r);const u=e[0],d=e[1],f=e[2],g=e[3],v=f-u,A=g-d,E=new Float32Array(2);W.singularValueDecompose2dScale(this.matrix,E);const[m,y]=E;W.singularValueDecompose2dScale(this.baseTransform,E);const w=m*E[0],x=y*E[1];let C=v,T=A,k=!1,P=!1;const _=Math.ceil(c*w),R=Math.ceil(h*x),D=Math.ceil(v*w),F=Math.ceil(A*x);_>=D?C=c:k=!0,R>=F?T=h:P=!0;const X=this.getSizeAndScale(C,this.ctx.canvas.width,w),Q=this.getSizeAndScale(T,this.ctx.canvas.height,x),tt=t.cachedCanvases.getCanvas("pattern",X.size,Q.size),B=tt.context,z=l.createCanvasGraphics(B);if(z.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(z,s,o),B.translate(-X.scale*u,-Q.scale*d),z.transform(0,X.scale,0,0,Q.scale,0,0),B.save(),(L=z.dependencyTracker)==null||L.save(),this.clipBbox(z,u,d,f,g),z.baseTransform=Ot(z.ctx),z.executeOperatorList(n),z.endDrawing(),(ct=(V=z.dependencyTracker)==null?void 0:(G=V.restore()).recordNestedDependencies)==null||ct.call(G),B.restore(),k||P){const J=tt.canvas;k&&(C=c),P&&(T=h);const ht=this.getSizeAndScale(C,this.ctx.canvas.width,w),Se=this.getSizeAndScale(T,this.ctx.canvas.height,x),je=ht.size,ee=Se.size,Et=t.cachedCanvases.getCanvas("pattern-workaround",je,ee),Cm=Et.context,Tm=k?Math.floor(v/c):0,km=P?Math.floor(A/h):0;for(let Ho=0;Ho<=Tm;Ho++)for(let jo=0;jo<=km;jo++)Cm.drawImage(J,je*Ho,ee*jo,je,ee,0,0,je,ee);return{canvas:Et.canvas,scaleX:ht.scale,scaleY:Se.scale,offsetX:u,offsetY:d}}return{canvas:tt.canvas,scaleX:X.scale,scaleY:Q.scale,offsetX:u,offsetY:d}}getSizeAndScale(t,e,n){const s=Math.max(Ug.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=s?r=s:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,s,r){const o=s-e,l=r-n;t.ctx.rect(e,n,o,l),W.axialAlignedBoundingBox([e,n,s,r],Ot(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const s=t.ctx,r=t.current;switch(e){case xS.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case xS.UNCOLORED:s.fillStyle=s.strokeStyle=n,r.fillColor=r.strokeColor=n;break;default:throw new $R(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,n,s){let r=n;s!==Re.SHADING&&(r=W.transform(r,e.baseTransform),this.matrix&&(r=W.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};M(Ug,"MAX_PATTERN_SIZE",3e3);let Ov=Ug;function F_({src:i,srcPos:t=0,dest:e,width:n,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Ne.isLittleEndian?4278190080:255,[c,h]=o?[r,l]:[l,r],u=n>>3,d=n&7,f=i.length;e=new Uint32Array(e.buffer);let g=0;for(let v=0;v<s;v++){for(const E=t+u;t<E;t++){const m=t<f?i[t]:255;e[g++]=m&128?h:c,e[g++]=m&64?h:c,e[g++]=m&32?h:c,e[g++]=m&16?h:c,e[g++]=m&8?h:c,e[g++]=m&4?h:c,e[g++]=m&2?h:c,e[g++]=m&1?h:c}if(d===0)continue;const A=t<f?i[t++]:255;for(let E=0;E<d;E++)e[g++]=A&1<<7-E?h:c}return{srcPos:t,destPos:g}}const ES=16,CS=100,O_=15,TS=10,fn=16,fy=new DOMMatrix,Vn=new Float32Array(2),Kl=new Float32Array([1/0,1/0,-1/0,-1/0]);function z_(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},i.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},i.transform=function(e,n,s,r,o,l){t.transform(e,n,s,r,o,l),this.__originalTransform(e,n,s,r,o,l)},i.setTransform=function(e,n,s,r,o,l){t.setTransform(e,n,s,r,o,l),this.__originalSetTransform(e,n,s,r,o,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},i.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},i.bezierCurveTo=function(e,n,s,r,o,l){t.bezierCurveTo(e,n,s,r,o,l),this.__originalBezierCurveTo(e,n,s,r,o,l)},i.rect=function(e,n,s,r){t.rect(e,n,s,r),this.__originalRect(e,n,s,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class B_{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,n)):(s=this.canvasFactory.create(e,n),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function rp(i,t,e,n,s,r,o,l,c,h){const[u,d,f,g,v,A]=Ot(i);if(d===0&&f===0){const y=o*u+v,w=Math.round(y),x=l*g+A,C=Math.round(x),T=(o+c)*u+v,k=Math.abs(Math.round(T)-w)||1,P=(l+h)*g+A,_=Math.abs(Math.round(P)-C)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(g),w,C),i.drawImage(t,e,n,s,r,0,0,k,_),i.setTransform(u,d,f,g,v,A),[k,_]}if(u===0&&g===0){const y=l*f+v,w=Math.round(y),x=o*d+A,C=Math.round(x),T=(l+h)*f+v,k=Math.abs(Math.round(T)-w)||1,P=(o+c)*d+A,_=Math.abs(Math.round(P)-C)||1;return i.setTransform(0,Math.sign(d),Math.sign(f),0,w,C),i.drawImage(t,e,n,s,r,0,0,_,k),i.setTransform(u,d,f,g,v,A),[_,k]}i.drawImage(t,e,n,s,r,o,l,c,h);const E=Math.hypot(u,d),m=Math.hypot(f,g);return[E*c,m*h]}class kS{constructor(t,e,n){M(this,"alphaIsShape",!1);M(this,"fontSize",0);M(this,"fontSizeScale",1);M(this,"textMatrix",null);M(this,"textMatrixScale",1);M(this,"fontMatrix",uv);M(this,"leading",0);M(this,"x",0);M(this,"y",0);M(this,"lineX",0);M(this,"lineY",0);M(this,"charSpacing",0);M(this,"wordSpacing",0);M(this,"textHScale",1);M(this,"textRenderingMode",Ae.FILL);M(this,"textRise",0);M(this,"fillColor","#000000");M(this,"strokeColor","#000000");M(this,"patternFill",!1);M(this,"patternStroke",!1);M(this,"fillAlpha",1);M(this,"strokeAlpha",1);M(this,"lineWidth",1);M(this,"activeSMask",null);M(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Kl.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,e=null){const n=this.minMax.slice();if(t===Re.STROKE){e||xt("Stroke bounding box must include transform."),W.singularValueDecompose2dScale(e,Vn);const s=Vn[0]*this.lineWidth/2,r=Vn[1]*this.lineWidth/2;n[0]-=s,n[1]-=r,n[2]+=s,n[3]+=r}return n}updateClipFromPath(){const t=W.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Kl,0)}getClippedPathBoundingBox(t=Re.FILL,e=null){return W.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function PS(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,n=t.width,s=e%fn,r=(e-s)/fn,o=s===0?r:r+1,l=i.createImageData(n,fn);let c=0,h;const u=t.data,d=l.data;let f,g,v,A;if(t.kind===bp.GRAYSCALE_1BPP){const E=u.byteLength,m=new Uint32Array(d.buffer,0,d.byteLength>>2),y=m.length,w=n+7>>3,x=4294967295,C=Ne.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(v=f<r?fn:s,h=0,g=0;g<v;g++){const T=E-c;let k=0;const P=T>w?n:T*8-7,_=P&-8;let R=0,D=0;for(;k<_;k+=8)D=u[c++],m[h++]=D&128?x:C,m[h++]=D&64?x:C,m[h++]=D&32?x:C,m[h++]=D&16?x:C,m[h++]=D&8?x:C,m[h++]=D&4?x:C,m[h++]=D&2?x:C,m[h++]=D&1?x:C;for(;k<P;k++)R===0&&(D=u[c++],R=128),m[h++]=D&R?x:C,R>>=1}for(;h<y;)m[h++]=0;i.putImageData(l,0,f*fn)}}else if(t.kind===bp.RGBA_32BPP){for(g=0,A=n*fn*4,f=0;f<r;f++)d.set(u.subarray(c,c+A)),c+=A,i.putImageData(l,0,g),g+=fn;f<o&&(A=n*s*4,d.set(u.subarray(c,c+A)),i.putImageData(l,0,g))}else if(t.kind===bp.RGB_24BPP)for(v=fn,A=n*v,f=0;f<o;f++){for(f>=r&&(v=s,A=n*v),h=0,g=A;g--;)d[h++]=u[c++],d[h++]=u[c++],d[h++]=u[c++],d[h++]=255;i.putImageData(l,0,f*fn)}else throw new Error(`bad image kind: ${t.kind}`)}function RS(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,n=t.width,s=e%fn,r=(e-s)/fn,o=s===0?r:r+1,l=i.createImageData(n,fn);let c=0;const h=t.data,u=l.data;for(let d=0;d<o;d++){const f=d<r?fn:s;({srcPos:c}=F_({src:h,srcPos:c,dest:u,width:n,height:f,nonBlackColor:0})),i.putImageData(l,0,d*fn)}}function Bh(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of e)i[n]!==void 0&&(t[n]=i[n]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function op(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function _S(i,t){if(t)return!0;W.singularValueDecompose2dScale(i,Vn);const e=Math.fround(fs.pixelRatio*Oo.PDF_TO_CSS_UNITS);return Vn[0]<=e&&Vn[1]<=e}const V_=["butt","round","square"],U_=["miter","round","bevel"],q_={},MS={};var Ii,zv,Bv,Vv;const qw=class qw{constructor(t,e,n,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,h,u){S(this,Ii);this.ctx=t,this.current=new kS(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new B_(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=u??null}getObject(t,e,n=null){var s;return typeof e=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(t,e),e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e)):n}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,n){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ot(this.compositeCtx))}this.ctx.save(),op(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ot(this.ctx)}executeOperatorList(t,e,n,s,r){var m;const o=t.argsArray,l=t.fnArray;let c=e||0;const h=o.length;if(h===c)return c;const u=h-c>TS&&typeof n=="function",d=u?Date.now()+O_:0;let f=0;const g=this.commonObjs,v=this.objs;let A,E;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,n),c;if(!r||r.has(c))if(A=l[c],E=o[c]??null,A!==Vu.dependency)E===null?this[A](c):this[A](c,...E);else for(const y of E){(m=this.dependencyTracker)==null||m.recordNamedData(y,c);const w=y.startsWith("g_")?g:v;if(!w.has(y))return w.get(y,n),c}if(c++,c===h)return c;if(u&&++f>TS){if(Date.now()>d)return n(),c;f=0}}}endDrawing(){b(this,Ii,zv).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),b(this,Ii,Bv).call(this)}_scaleImage(t,e){const n=t.width??t.displayWidth,s=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=s,h="prescale1",u,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,g=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,f,g),d=u.context,d.clearRect(0,0,f,g),d.drawImage(t,0,0,l,c,0,0,f,g),t=u.canvas,l=f,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t,e){var R,D;const n=this.ctx,{width:s,height:r}=e,o=this.current.fillColor,l=this.current.patternFill,c=Ot(n);let h,u,d,f;if((e.bitmap||e.data)&&e.count>1){const F=e.bitmap||e.data.buffer;u=JSON.stringify(l?c:[c.slice(0,4),o]),h=this._cachedBitmapsMap.get(F),h||(h=new Map,this._cachedBitmapsMap.set(F,h));const X=h.get(u);if(X&&!l){const Q=Math.round(Math.min(c[0],c[2])+c[4]),tt=Math.round(Math.min(c[1],c[3])+c[5]);return(R=this.dependencyTracker)==null||R.recordDependencies(t,Qn.transformAndFill),{canvas:X,offsetX:Q,offsetY:tt}}d=X}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),RS(f.context,e));let g=W.transform(c,[1/s,0,0,-1/r,0,0]);g=W.transform(g,[1,0,0,1,0,-r]);const v=Kl.slice();W.axialAlignedBoundingBox([0,0,s,r],g,v);const[A,E,m,y]=v,w=Math.round(m-A)||1,x=Math.round(y-E)||1,C=this.cachedCanvases.getCanvas("fillCanvas",w,x),T=C.context,k=A,P=E;T.translate(-k,-P),T.transform(...g),d||(d=this._scaleImage(f.canvas,Oi(T)),d=d.img,h&&l&&h.set(u,d)),T.imageSmoothingEnabled=_S(Ot(T),e.interpolate),rp(T,d,0,0,d.width,d.height,0,0,s,r),T.globalCompositeOperation="source-in";const _=W.transform(Oi(T),[1,0,0,1,-k,-P]);return T.fillStyle=l?o.getPattern(n,this,_,Re.FILL):o,T.fillRect(0,0,s,r),h&&!l&&(this.cachedCanvases.delete("fillCanvas"),h.set(u,C.canvas)),(D=this.dependencyTracker)==null||D.recordDependencies(t,Qn.transformAndFill),{canvas:C.canvas,offsetX:Math.round(k),offsetY:Math.round(P)}}setLineWidth(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",t),e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",t),this.ctx.lineCap=V_[e]}setLineJoin(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",t),this.ctx.lineJoin=U_[e]}setMiterLimit(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",t),this.ctx.miterLimit=e}setDash(t,e,n){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",t);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(e),s.lineDashOffset=n)}setRenderingIntent(t,e){}setFlatness(t,e){}setGState(t,e){var n,s,r,o,l;for(const[c,h]of e)switch(c){case"LW":this.setLineWidth(t,h);break;case"LC":this.setLineCap(t,h);break;case"LJ":this.setLineJoin(t,h);break;case"ML":this.setMiterLimit(t,h);break;case"D":this.setDash(t,h[0],h[1]);break;case"RI":this.setRenderingIntent(t,h);break;case"FL":this.setFlatness(t,h);break;case"Font":this.setFont(t,h[0],h[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=h;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=h;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=h;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",t),this.current.activeSMask=h?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(h);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,e,n);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),Bh(this.suspendedCtx,o),z_(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Bh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,n,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,n,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}genericComposeSMask(t,e,n,s,r,o,l,c,h,u,d){let f=t.canvas,g=c-u,v=h-d;if(o)if(g<0||v<0||g+n>f.width||v+s>f.height){const E=this.cachedCanvases.getCanvas("maskExtension",n,s),m=E.context;m.drawImage(f,-g,-v),m.globalCompositeOperation="destination-atop",m.fillStyle=o,m.fillRect(0,0,n,s),m.globalCompositeOperation="source-over",f=E.canvas,g=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(g,v,n,s),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(g,v,n,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const A=new Path2D;A.rect(c,h,n,s),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(f,g,v,n,s,c,h,n,s),e.restore()}save(t){var n;this.inSMaskMode&&Bh(this.ctx,this.suspendedCtx),this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone(),(n=this.dependencyTracker)==null||n.save(t)}restore(t){var e;if((e=this.dependencyTracker)==null||e.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Bh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,n,s,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",t),this.ctx.transform(e,n,s,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n,s){let[r]=n;if(!s){r||(r=n[0]=new Path2D),this[e](t,r);return}if(this.dependencyTracker!==null){const o=e===Vu.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(t,["transform"])}if(!(r instanceof Path2D)){const o=n[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case ep.moveTo:o.moveTo(r[l++],r[l++]);break;case ep.lineTo:o.lineTo(r[l++],r[l++]);break;case ep.curveTo:o.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case ep.closePath:o.closePath();break;default:$(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=o}W.axialAlignedBoundingBox(s,Ot(this.ctx),this.current.minMax),this[e](t,r),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,e,n=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,Oi(s),Re.STROKE),l){const c=new Path2D;c.addPath(e,s.getTransform().invertSelf().multiplySelf(l)),e=c}this.rescaleAndStroke(e,!1),s.restore()}else this.rescaleAndStroke(e,!0);(o=this.dependencyTracker)==null||o.recordDependencies(t,Qn.stroke),n&&this.consumePath(t,e,this.current.getClippedPathBoundingBox(Re.STROKE,Ot(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t,e){this.stroke(t,e)}fill(t,e,n=!0){var h,u,d;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((h=this.dependencyTracker)==null||h.save(t),s.save(),s.fillStyle=r.getPattern(s,this,Oi(s),Re.FILL),f){const g=new Path2D;g.addPath(e,s.getTransform().invertSelf().multiplySelf(f)),e=g}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(e,"evenodd"),this.pendingEOFill=!1):s.fill(e)),(u=this.dependencyTracker)==null||u.recordDependencies(t,Qn.fill),l&&(s.restore(),(d=this.dependencyTracker)==null||d.restore(t)),n&&this.consumePath(t,e,c)}eoFill(t,e){this.pendingEOFill=!0,this.fill(t,e)}fillStroke(t,e){this.fill(t,e,!1),this.stroke(t,e,!1),this.consumePath(t,e)}eoFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}closeFillStroke(t,e){this.fillStroke(t,e)}closeEOFillStroke(t,e){this.pendingEOFill=!0,this.fillStroke(t,e)}endPath(t,e){this.consumePath(t,e)}rawFillPath(t,e){var n;this.ctx.fill(e),(n=this.dependencyTracker)==null||n.recordDependencies(t,Qn.rawFillPath).recordOperation(t)}clip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=q_}eoClip(t){var e;(e=this.dependencyTracker)==null||e.recordFutureForcedDependency("clipMode",t),this.pendingClip=MS}beginText(t){var e;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(e=this.dependencyTracker)==null||e.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const e=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;e!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",t),s.recordCloseMarker(t)}if(e!==void 0){const s=new Path2D,r=n.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:h,path:u}of e)u&&s.addPath(u,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(h,-h));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",t),this.current.charSpacing=e}setWordSpacing(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",t),this.current.wordSpacing=e}setHScale(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",t),this.current.textHScale=e/100}setLeading(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",t),this.current.leading=-e}setFont(t,e,n){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",t).recordNamedDependency(t,e);const s=this.commonObjs.get(e),r=this.current;if(!s)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=s.fontMatrix||uv,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&$("Invalid font matrix for font "+e),n<0?(n=-n,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const h=s.italic?"italic":"normal";let u=n;n<ES?u=ES:n>CS&&(u=CS),this.current.fontSizeScale=n/u,this.ctx.font=`${h} ${c} ${u}px ${l}`}setTextRenderingMode(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=e}setTextRise(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",t),this.current.textRise=e}moveText(t,e,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=n}setLeadingMoveText(t,e,n){this.setLeading(t,-n),this.moveText(t,e,n)}setTextMatrix(t,e){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",t);const{current:n}=this;n.textMatrix=e,n.textMatrixScale=Math.hypot(e[0],e[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(t){var e;this.moveText(t,0,this.current.leading),(e=this.dependencyTracker)==null||e.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}paintChar(t,e,n,s,r,o){var m,y,w,x;const l=this.ctx,c=this.current,h=c.font,u=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=u&Ae.FILL_STROKE_MASK,g=!!(u&Ae.ADD_TO_PATH_FLAG),v=c.patternFill&&!h.missingFile,A=c.patternStroke&&!h.missingFile;let E;if((h.disableFontFace||g||v||A)&&!h.missingFile&&(E=h.getPathGenerator(this.commonObjs,e)),E&&(h.disableFontFace||v||A)){l.save(),l.translate(n,s),l.scale(d,-d),(m=this.dependencyTracker)==null||m.recordCharacterBBox(t,l,h);let C;if(f===Ae.FILL||f===Ae.FILL_STROKE)if(r){C=l.getTransform(),l.setTransform(...r);const T=b(this,Ii,Vv).call(this,E,C,r);l.fill(T)}else l.fill(E);if(f===Ae.STROKE||f===Ae.FILL_STROKE)if(o){C||(C=l.getTransform()),l.setTransform(...o);const{a:T,b:k,c:P,d:_}=C,R=W.inverseTransform(o),D=W.transform([T,k,P,_,0,0],R);W.singularValueDecompose2dScale(D,Vn),l.lineWidth*=Math.max(Vn[0],Vn[1])/d,l.stroke(b(this,Ii,Vv).call(this,E,C,o))}else l.lineWidth/=d,l.stroke(E);l.restore()}else(f===Ae.FILL||f===Ae.FILL_STROKE)&&(l.fillText(e,n,s),(y=this.dependencyTracker)==null||y.recordCharacterBBox(t,l,h,d,n,s,()=>l.measureText(e))),(f===Ae.STROKE||f===Ae.FILL_STROKE)&&(this.dependencyTracker&&((w=this.dependencyTracker)==null||w.recordCharacterBBox(t,l,h,d,n,s,()=>l.measureText(e)).recordDependencies(t,Qn.stroke)),l.strokeText(e,n,s));g&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ot(l),x:n,y:s,fontSize:d,path:E}),(x=this.dependencyTracker)==null||x.recordCharacterBBox(t,l,h,d,n,s))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){n=!0;break}return rt(this,"isFontSubpixelAAEnabled",n)}showText(t,e){var P,_,R,D;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,Qn.showText).copyDependenciesFromIncrementalOperation(t,"sameLineText").resetBBox(t),this.current.textRenderingMode&Ae.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(t,e),(P=this.dependencyTracker)==null||P.recordOperation(t).recordIncrementalData("sameLineText",t);return}const r=n.fontSize;if(r===0){(_=this.dependencyTracker)==null||_.recordOperation(t);return}const o=this.ctx,l=n.fontSizeScale,c=n.charSpacing,h=n.wordSpacing,u=n.fontDirection,d=n.textHScale*u,f=e.length,g=s.vertical,v=g?1:-1,A=s.defaultVMetrics,E=r*n.fontMatrix[0],m=n.textRenderingMode===Ae.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),u>0?o.scale(d,-1):o.scale(d,1);let y,w;if(n.patternFill){o.save();const F=n.fillColor.getPattern(o,this,Oi(o),Re.FILL);y=Ot(o),o.restore(),o.fillStyle=F}if(n.patternStroke){o.save();const F=n.strokeColor.getPattern(o,this,Oi(o),Re.STROKE);w=Ot(o),o.restore(),o.strokeStyle=F}let x=n.lineWidth;const C=n.textMatrixScale;if(C===0||x===0){const F=n.textRenderingMode&Ae.FILL_STROKE_MASK;(F===Ae.STROKE||F===Ae.FILL_STROKE)&&(x=this.getSinglePixelWidth())}else x/=C;if(l!==1&&(o.scale(l,l),x/=l),o.lineWidth=x,s.isInvalidPDFjsFont){const F=[];let X=0;for(const tt of e)F.push(tt.unicode),X+=tt.width;const Q=F.join("");if(o.fillText(Q,0,0),this.dependencyTracker!==null){const tt=o.measureText(Q);this.dependencyTracker.recordBBox(t,this.ctx,-tt.actualBoundingBoxLeft,tt.actualBoundingBoxRight,-tt.actualBoundingBoxAscent,tt.actualBoundingBoxDescent).recordOperation(t).recordIncrementalData("sameLineText",t)}n.x+=X*E*d,o.restore(),this.compose();return}let T=0,k;for(k=0;k<f;++k){const F=e[k];if(typeof F=="number"){T+=v*F*r/1e3;continue}let X=!1;const Q=(F.isSpace?h:0)+c,tt=F.fontChar,B=F.accent;let z,L,V=F.width;if(g){const J=F.vmetric||A,ht=-(F.vmetric?J[1]:V*.5)*E,Se=J[2]*E;V=J?-J[0]:V,z=ht/l,L=(T+Se)/l}else z=T/l,L=0;let G;if(s.remeasure&&V>0){G=o.measureText(tt);const J=G.width*1e3/r*l;if(V<J&&this.isFontSubpixelAAEnabled){const ht=V/J;X=!0,o.save(),o.scale(ht,1),z/=ht}else V!==J&&(z+=(V-J)/2e3*r/l)}if(this.contentVisible&&(F.isInFont||s.missingFile)){if(m&&!B)o.fillText(tt,z,L),(R=this.dependencyTracker)==null||R.recordCharacterBBox(t,o,G?{bbox:null}:s,r/l,z,L,()=>G??o.measureText(tt));else if(this.paintChar(t,tt,z,L,y,w),B){const J=z+r*B.offset.x/l,ht=L-r*B.offset.y/l;this.paintChar(t,B.fontChar,J,ht,y,w)}}const ct=g?V*E-Q*u:V*E+Q*u;T+=ct,X&&o.restore()}g?n.y-=T:n.x+=T*d,o.restore(),this.compose(),(D=this.dependencyTracker)==null||D.recordOperation(t).recordIncrementalData("sameLineText",t)}showType3Text(t,e){const n=this.ctx,s=this.current,r=s.font,o=s.fontSize,l=s.fontDirection,c=r.vertical?1:-1,h=s.charSpacing,u=s.wordSpacing,d=s.textHScale*l,f=s.fontMatrix||uv,g=e.length,v=s.textRenderingMode===Ae.INVISIBLE;let A,E,m,y;if(v||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(d,l);const w=this.dependencyTracker;for(this.dependencyTracker=w?new Tg(w,t):null,A=0;A<g;++A){if(E=e[A],typeof E=="number"){y=c*E*o/1e3,this.ctx.translate(y,0),s.x+=y*d;continue}const x=(E.isSpace?u:0)+h,C=r.charProcOperatorList[E.operatorListId];C?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...f),this.executeOperatorList(C),this.restore()):$(`Type3 character "${E.operatorListId}" is not available.`);const T=[E.width,0];W.applyTransform(T,f),m=T[0]*o+x,n.translate(m,0),s.x+=m*d}n.restore(),w&&(this.dependencyTracker.recordNestedDependencies(),this.dependencyTracker=w)}setCharWidth(t,e,n){}setCharWidthAndBounds(t,e,n,s,r,o,l){var h;const c=new Path2D;c.rect(s,r,o-s,l-r),this.ctx.clip(c),(h=this.dependencyTracker)==null||h.recordBBox(t,this.ctx,s,o,r,l).recordClipBox(t,this.ctx,s,o,r,l),this.endPath(t)}getColorN_Pattern(t,e){let n;if(e[0]==="TilingPattern"){const s=this.baseTransform||Ot(this.ctx),r={createCanvasGraphics:o=>new qw(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Tg(this.dependencyTracker,t):null)};n=new Ov(e,this.ctx,r,s)}else n=this._getPattern(t,e[1],e[2]);return n}setStrokeColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,e),this.current.patternStroke=!0}setFillColorN(t,...e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,e),this.current.patternFill=!0}setStrokeRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=e,this.current.patternStroke=!1}setStrokeTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=e,this.current.patternFill=!1}setFillTransparent(t){var e;(e=this.dependencyTracker)==null||e.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e,n=null){let s;return this.cachedPatterns.has(e)?s=this.cachedPatterns.get(e):(s=I_(this.getObject(t,e)),this.cachedPatterns.set(e,s)),n&&(s.matrix=n),s}shadingFill(t,e){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(t);const s=this._getPattern(t,e);n.fillStyle=s.getPattern(n,this,Oi(n),Re.SHADING);const r=Oi(n);if(r){const{width:l,height:c}=n.canvas,h=Kl.slice();W.axialAlignedBoundingBox([0,0,l,c],r,h);const[u,d,f,g]=h;this.ctx.fillRect(u,d,f-u,g-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,Qn.transform).recordDependencies(t,Qn.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){xt("Should not call beginInlineImage")}beginImageData(){xt("Should not call beginImageData")}paintFormXObjectBegin(t,e,n){var s;if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),e&&this.transform(t,...e),this.baseTransform=Ot(this.ctx),n)){W.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[r,o,l,c]=n,h=new Path2D;h.rect(r,o,l-r,c-o),this.ctx.clip(h),(s=this.dependencyTracker)==null||s.recordClipBox(t,this.ctx,r,l,o,c),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,e){var w;if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;e.isolated||Sm("TODO: Support non-isolated groups."),e.knockout&&$("Knockout groups not supported.");const s=Ot(n);if(e.matrix&&n.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=Kl.slice();W.axialAlignedBoundingBox(e.bbox,Ot(n),r);const o=[0,0,n.canvas.width,n.canvas.height];r=W.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),h=Math.max(Math.ceil(r[2])-l,1),u=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,h,u]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,h,u),g=f.context;g.translate(-l,-c),g.transform(...s);let v=new Path2D;const[A,E,m,y]=e.bbox;if(v.rect(A,E,m-A,y-E),e.matrix){const x=new Path2D;x.addPath(v,new DOMMatrix(e.matrix)),v=x}g.clip(v),e.smask&&this.smaskStack.push({canvas:f.canvas,context:g,offsetX:l,offsetY:c,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}),(!e.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(l,c),n.save()),Bh(n,g),this.ctx=g,(w=this.dependencyTracker)==null||w.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(t,e){var r;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),e.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=Ot(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...o);const l=Kl.slice();W.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,l),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(t,e,n,s,r,o){if(b(this,Ii,zv).call(this),op(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const l=n[2]-n[0],c=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=l,n[3]=c,W.singularValueDecompose2dScale(Ot(this.ctx),Vn);const{viewportScale:h}=this,u=Math.ceil(l*this.outputScaleX*h),d=Math.ceil(c*this.outputScaleY*h);this.annotationCanvas=this.canvasFactory.create(u,d);const{canvas:f,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(Vn[0],0,0,-Vn[1],0,c*Vn[1]),op(this.ctx)}else{op(this.ctx),this.endPath(t);const h=new Path2D;h.rect(n[0],n[1],l,c),this.ctx.clip(h)}}this.current=new kS(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...s),this.transform(t,...r)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),b(this,Ii,Bv).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,e){var l;if(!this.contentVisible)return;const n=e.count;e=this.getObject(t,e.data,e),e.count=n;const s=this.ctx,r=this._createMaskCanvas(t,e),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(t).recordBBox(t,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(t),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n,s=0,r=0,o,l){var d,f,g;if(!this.contentVisible)return;e=this.getObject(t,e.data,e);const c=this.ctx;c.save();const h=Ot(c);c.transform(n,s,r,o,0,0);const u=this._createMaskCanvas(t,e);c.setTransform(1,0,0,1,u.offsetX-h[4],u.offsetY-h[5]),(d=this.dependencyTracker)==null||d.resetBBox(t);for(let v=0,A=l.length;v<A;v+=2){const E=W.transform(h,[n,s,r,o,l[v],l[v+1]]);c.drawImage(u.canvas,E[4],E[5]),(f=this.dependencyTracker)==null||f.recordBBox(t,this.ctx,E[4],E[4]+u.canvas.width,E[5],E[5]+u.canvas.height)}c.restore(),this.compose(),(g=this.dependencyTracker)==null||g.recordOperation(t)}paintImageMaskXObjectGroup(t,e){var o,l,c;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(t).recordDependencies(t,Qn.transformAndFill);for(const h of e){const{data:u,width:d,height:f,transform:g}=h,v=this.cachedCanvases.getCanvas("maskCanvas",d,f),A=v.context;A.save();const E=this.getObject(t,u,h);RS(A,E),A.globalCompositeOperation="source-in",A.fillStyle=r?s.getPattern(A,this,Oi(n),Re.FILL):s,A.fillRect(0,0,d,f),A.restore(),n.save(),n.transform(...g),n.scale(1,-1),rp(n,v.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,n,0,d,0,f),n.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(t)}paintImageXObject(t,e){if(!this.contentVisible)return;const n=this.getObject(t,e);if(!n){$("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,n)}paintImageXObjectRepeat(t,e,n,s,r){if(!this.contentVisible)return;const o=this.getObject(t,e);if(!o){$("Dependent image isn't ready yet");return}const l=o.width,c=o.height,h=[];for(let u=0,d=r.length;u<d;u+=2)h.push({transform:[n,0,0,s,r[u],r[u+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(t,o,h)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:n,height:s}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t,e){var h;if(!this.contentVisible)return;const n=e.width,s=e.height,r=this.ctx;this.save(t);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/n,-1/s);let l;if(e.bitmap)l=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)l=e;else{const d=this.cachedCanvases.getCanvas("inlineImage",n,s).context;PS(d,e),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,Oi(r));r.imageSmoothingEnabled=_S(Ot(r),e.interpolate),(h=this.dependencyTracker)==null||h.resetBBox(t).recordBBox(t,r,0,n,-s,0).recordDependencies(t,Qn.imageXObject).recordOperation(t),rp(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,n,s),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,e,n){var o,l,c;if(!this.contentVisible)return;const s=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const h=e.width,u=e.height,f=this.cachedCanvases.getCanvas("inlineImage",h,u).context;PS(f,e),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(t);for(const h of n)s.save(),s.transform(...h.transform),s.scale(1,-1),rp(s,r,h.x,h.y,h.w,h.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(t,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(t),this.compose()}paintSolidColorImageMask(t){var e;this.contentVisible&&((e=this.dependencyTracker)==null||e.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,Qn.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,e){}markPointProps(t,e,n){}beginMarkedContent(t,e){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(t),e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){var e;(e=this.dependencyTracker)==null||e.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,e,n){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===MS?r.clip(e,"evenodd"):r.clip(e)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):(l=this.dependencyTracker)==null||l.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ot(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:n,c:s,d:r}=this.ctx.getTransform();let o,l;if(n===0&&s===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=l=1/c;else{const u=c*t;o=l=u<1?1/u:1}else if(t===0)o=1/c,l=1/h;else{const u=c*t,d=h*t;o=u<1?1/u:1,l=d<1?1/d:1}}else{const c=Math.abs(e*r-n*s),h=Math.hypot(e,n),u=Math.hypot(s,r);if(t===0)o=u/c,l=h/c;else{const d=t*c;o=u>d?u/d:1,l=h>d?h/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:n,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){n.lineWidth=(s||1)*r,n.stroke(t);return}const l=n.getLineDash();e&&n.save(),n.scale(r,o),fy.a=1/r,fy.d=1/o;const c=new Path2D;if(c.addPath(t,fy),l.length>0){const h=Math.max(r,o);n.setLineDash(l.map(u=>u/h)),n.lineDashOffset/=h}n.lineWidth=s||1,n.stroke(c),e&&n.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Ii=new WeakSet,zv=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Bv=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Vv=function(t,e,n){const s=new Path2D;return s.addPath(t,new DOMMatrix(n).invertSelf().multiplySelf(e)),s};let nc=qw;for(const i in Vu)nc.prototype[i]!==void 0&&(nc.prototype[Vu[i]]=nc.prototype[i]);var vd,wd;class hs{static get workerPort(){return a(this,vd)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");p(this,vd,t)}static get workerSrc(){return a(this,wd)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");p(this,wd,t)}}vd=new WeakMap,wd=new WeakMap,S(hs,vd,null),S(hs,wd,"");var Dc,Sd;class H_{constructor({parsedData:t,rawData:e}){S(this,Dc);S(this,Sd);p(this,Dc,t),p(this,Sd,e)}getRaw(){return a(this,Sd)}get(t){return a(this,Dc).get(t)??null}[Symbol.iterator](){return a(this,Dc).entries()}}Dc=new WeakMap,Sd=new WeakMap;const Ml=Symbol("INTERNAL");var Ad,bd,xd,Nc;class j_{constructor(t,{name:e,intent:n,usage:s,rbGroups:r}){S(this,Ad,!1);S(this,bd,!1);S(this,xd,!1);S(this,Nc,!0);p(this,Ad,!!(t&zn.DISPLAY)),p(this,bd,!!(t&zn.PRINT)),this.name=e,this.intent=n,this.usage=s,this.rbGroups=r}get visible(){if(a(this,xd))return a(this,Nc);if(!a(this,Nc))return!1;const{print:t,view:e}=this.usage;return a(this,Ad)?(e==null?void 0:e.viewState)!=="OFF":a(this,bd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,n=!1){t!==Ml&&xt("Internal method `_setVisible` called."),p(this,xd,n),p(this,Nc,e)}}Ad=new WeakMap,bd=new WeakMap,xd=new WeakMap,Nc=new WeakMap;var Jr,At,Lc,Ic,Ed,Uv;class W_{constructor(t,e=zn.DISPLAY){S(this,Ed);S(this,Jr,null);S(this,At,new Map);S(this,Lc,null);S(this,Ic,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,p(this,Ic,t.order);for(const n of t.groups)a(this,At).set(n.id,new j_(e,n));if(t.baseState==="OFF")for(const n of a(this,At).values())n._setVisible(Ml,!1);for(const n of t.on)a(this,At).get(n)._setVisible(Ml,!0);for(const n of t.off)a(this,At).get(n)._setVisible(Ml,!1);p(this,Lc,this.getHash())}}isVisible(t){if(a(this,At).size===0)return!0;if(!t)return Sm("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,At).has(t.id)?a(this,At).get(t.id).visible:($(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return b(this,Ed,Uv).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,At).has(e))return $(`Optional content group not found: ${e}`),!0;if(a(this,At).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,At).has(e))return $(`Optional content group not found: ${e}`),!0;if(!a(this,At).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,At).has(e))return $(`Optional content group not found: ${e}`),!0;if(!a(this,At).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,At).has(e))return $(`Optional content group not found: ${e}`),!0;if(a(this,At).get(e).visible)return!1}return!0}return $(`Unknown optional content policy ${t.policy}.`),!0}return $(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,n=!0){var r;const s=a(this,At).get(t);if(!s){$(`Optional content group not found: ${t}`);return}if(n&&e&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==t&&((r=a(this,At).get(l))==null||r._setVisible(Ml,!1,!0));s._setVisible(Ml,!!e,!0),p(this,Jr,null)}setOCGState({state:t,preserveRB:e}){let n;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const r=a(this,At).get(s);if(r)switch(n){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!r.visible,e);break}}p(this,Jr,null)}get hasInitialVisibility(){return a(this,Lc)===null||this.getHash()===a(this,Lc)}getOrder(){return a(this,At).size?a(this,Ic)?a(this,Ic).slice():[...a(this,At).keys()]:null}getGroup(t){return a(this,At).get(t)||null}getHash(){if(a(this,Jr)!==null)return a(this,Jr);const t=new Kx;for(const[e,n]of a(this,At))t.update(`${e}:${n.visible}`);return p(this,Jr,t.hexdigest())}[Symbol.iterator](){return a(this,At).entries()}}Jr=new WeakMap,At=new WeakMap,Lc=new WeakMap,Ic=new WeakMap,Ed=new WeakSet,Uv=function(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let s=1;s<e;s++){const r=t[s];let o;if(Array.isArray(r))o=b(this,Ed,Uv).call(this,r);else if(a(this,At).has(r))o=a(this,At).get(r).visible;else return $(`Optional content group not found: ${r}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class G_{constructor(t,{disableRange:e=!1,disableStream:n=!1}){$t(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!n,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(n),!0)});$t(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,n,s,r;t.total===void 0?(n=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||n.call(e,{loaded:t.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){$t(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new K_(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new X_(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeReaders.slice(0))n.cancel(t);this._pdfDataRangeTransport.abort()}}class K_{constructor(t,e,n=!1,s=null){this._stream=t,this._done=n||!1,this._filename=Mw(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class X_{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Y_(i){let t=!0,e=n("filename\\*","i").exec(i);if(e){e=e[1];let u=l(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=n("filename","i").exec(i),e){e=e[1];let u=l(e);return u=h(u),r(u)}function n(u,d){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(u,d){if(u){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(u,{fatal:!0}),g=kf(d);d=f.decode(g),t=!1}catch{}}return d}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=s("utf-8",u),t&&(u=s("iso-8859-1",u))),u}function o(u){const d=[];let f;const g=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=g.exec(u))!==null;){let[,A,E,m]=f;if(A=parseInt(A,10),A in d){if(A===0)break;continue}d[A]=[E,m]}const v=[];for(let A=0;A<d.length&&A in d;++A){let[E,m]=d[A];m=l(m),E&&(m=unescape(m),A===0&&(m=c(m))),v.push(m)}return v.join("")}function l(u){if(u.startsWith('"')){const d=u.slice(1).split('\\"');for(let f=0;f<d.length;++f){const g=d[f].indexOf('"');g!==-1&&(d[f]=d[f].slice(0,g),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}u=d.join('"')}return u}function c(u){const d=u.indexOf("'");if(d===-1)return u;const f=u.slice(0,d),v=u.slice(d+1).replace(/^[^']*'/,"");return s(f,v)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,g,v){if(g==="q"||g==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,E){return String.fromCharCode(parseInt(E,16))}),s(f,v);try{v=atob(v)}catch{}return s(f,v)})}return""}function rE(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const n in t){const s=t[n];s!==void 0&&e.append(n,s)}return e}function xm(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function oE({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*e)||n||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function aE(i){const t=i.get("Content-Disposition");if(t){let e=Y_(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Mw(e))return e}return null}function Mf(i,t){return new bg(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function lE(i){return i===200||i===206}function cE(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function hE(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:($(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Q_{constructor(t){M(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=rE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return $t(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new J_(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new Z_(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class J_{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const n=new Headers(t.headers),s=e.url;fetch(s,cE(n,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=xm(r.url),!lE(r.status))throw Mf(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=oE({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=aE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:hE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Z_{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${n-1}`);const o=s.url;fetch(o,cE(r,this._withCredentials,this._abortController)).then(l=>{const c=xm(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!lE(l.status))throw Mf(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:hE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const py=200,gy=206;function $_(i){const t=i.response;return typeof t!="string"?t:kf(t).buffer}class tM{constructor({url:t,httpHeaders:e,withCredentials:n}){M(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=rE(this.isHttp,e),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=gy):s.expectedStatus=py,e.responseType="arraybuffer",$t(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){var s;const n=this.pendingRequests[t];n&&((s=n.onProgress)==null||s.call(n,e))}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){n.onError(s.status);return}const r=s.status||py;if(!(r===py&&n.expectedStatus===gy)&&r!==n.expectedStatus){n.onError(s.status);return}const l=$_(s);if(r===gy){const c=s.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?n.onDone({begin:parseInt(h[1],10),chunk:l}):($('Missing or invalid "Content-Range" header.'),n.onError(0))}else l?n.onDone({begin:0,chunk:l}):n.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class eM{constructor(t){this._source=t,this._manager=new tM(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return $t(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new nM(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new iM(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class nM{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=xm(e.responseURL);const n=e.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...h]=l.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=oE({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=aE(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Mf(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class iM{constructor(t,e,n){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=xm((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Mf(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const sM=/^[a-z][a-z0-9\-+.]+:/i;function rM(i){if(sM.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class oM{constructor(t){this.source=t,this.url=rM(t.url),$t(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return $t(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new aM(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new lM(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const n of this._rangeRequestReaders.slice(0))n.cancel(t)}}class aM{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Mf(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class lM{constructor(t,e,n){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Vh=Symbol("INITIAL_DATA");var Tn,Cd,qv;class uE{constructor(){S(this,Cd);S(this,Tn,Object.create(null))}get(t,e=null){if(e){const s=b(this,Cd,qv).call(this,t);return s.promise.then(()=>e(s.data)),null}const n=a(this,Tn)[t];if(!n||n.data===Vh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=a(this,Tn)[t];return!!e&&e.data!==Vh}delete(t){const e=a(this,Tn)[t];return!e||e.data===Vh?!1:(delete a(this,Tn)[t],!0)}resolve(t,e=null){const n=b(this,Cd,qv).call(this,t);n.data=e,n.resolve()}clear(){var t;for(const e in a(this,Tn)){const{data:n}=a(this,Tn)[e];(t=n==null?void 0:n.bitmap)==null||t.close()}p(this,Tn,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,Tn)){const{data:e}=a(this,Tn)[t];e!==Vh&&(yield[t,e])}}}Tn=new WeakMap,Cd=new WeakSet,qv=function(t){var e;return(e=a(this,Tn))[t]||(e[t]={...Promise.withResolvers(),data:Vh})};const cM=1e5,DS=30;var FS,Zr,un,Td,kd,ba,qs,Pd,Rd,xa,Fc,Oc,$r,zc,_d,Bc,Ea,Md,Dd,Vc,Ca,Nd,to,Uc,wr,dE,fE,Hv,Wn,Mp,jv,pE,gE;const se=class se{constructor({textContentSource:t,container:e,viewport:n}){S(this,wr);S(this,Zr,Promise.withResolvers());S(this,un,null);S(this,Td,!1);S(this,kd,!!((FS=globalThis.FontInspector)!=null&&FS.enabled));S(this,ba,null);S(this,qs,null);S(this,Pd,0);S(this,Rd,0);S(this,xa,null);S(this,Fc,null);S(this,Oc,0);S(this,$r,0);S(this,zc,Object.create(null));S(this,_d,[]);S(this,Bc,null);S(this,Ea,[]);S(this,Md,new WeakMap);S(this,Dd,null);var c;if(t instanceof ReadableStream)p(this,Bc,t);else if(typeof t=="object")p(this,Bc,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');p(this,un,p(this,Fc,e)),p(this,$r,n.scale*fs.pixelRatio),p(this,Oc,n.rotation),p(this,qs,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=n.rawDims;p(this,Dd,[1,0,0,-1,-o,l+r]),p(this,Rd,s),p(this,Pd,r),b(c=se,Wn,pE).call(c),pl(e,n),a(this,Zr).promise.finally(()=>{a(se,Uc).delete(this),p(this,qs,null),p(this,zc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ne.platform;return rt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,xa).read().then(({value:e,done:n})=>{if(n){a(this,Zr).resolve();return}a(this,ba)??p(this,ba,e.lang),Object.assign(a(this,zc),e.styles),b(this,wr,dE).call(this,e.items),t()},a(this,Zr).reject)};return p(this,xa,a(this,Bc).getReader()),a(se,Uc).add(this),t(),a(this,Zr).promise}update({viewport:t,onBefore:e=null}){var r;const n=t.scale*fs.pixelRatio,s=t.rotation;if(s!==a(this,Oc)&&(e==null||e(),p(this,Oc,s),pl(a(this,Fc),{rotation:s})),n!==a(this,$r)){e==null||e(),p(this,$r,n);const o={div:null,properties:null,ctx:b(r=se,Wn,Mp).call(r,a(this,ba))};for(const l of a(this,Ea))o.properties=a(this,Md).get(l),o.div=l,b(this,wr,Hv).call(this,o)}}cancel(){var e;const t=new Fo("TextLayer task cancelled.");(e=a(this,xa))==null||e.cancel(t).catch(()=>{}),p(this,xa,null),a(this,Zr).reject(t)}get textDivs(){return a(this,Ea)}get textContentItemsStr(){return a(this,_d)}static cleanup(){if(!(a(this,Uc).size>0)){a(this,Vc).clear();for(const{canvas:t}of a(this,Ca).values())t.remove();a(this,Ca).clear()}}};Zr=new WeakMap,un=new WeakMap,Td=new WeakMap,kd=new WeakMap,ba=new WeakMap,qs=new WeakMap,Pd=new WeakMap,Rd=new WeakMap,xa=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,$r=new WeakMap,zc=new WeakMap,_d=new WeakMap,Bc=new WeakMap,Ea=new WeakMap,Md=new WeakMap,Dd=new WeakMap,Vc=new WeakMap,Ca=new WeakMap,Nd=new WeakMap,to=new WeakMap,Uc=new WeakMap,wr=new WeakSet,dE=function(t){var s,r;if(a(this,Td))return;(r=a(this,qs)).ctx??(r.ctx=b(s=se,Wn,Mp).call(s,a(this,ba)));const e=a(this,Ea),n=a(this,_d);for(const o of t){if(e.length>cM){$("Ignoring additional textDivs for performance reasons."),p(this,Td,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,un);p(this,un,document.createElement("span")),a(this,un).classList.add("markedContent"),o.id&&a(this,un).setAttribute("id",`${o.id}`),l.append(a(this,un))}else o.type==="endMarkedContent"&&p(this,un,a(this,un).parentNode);continue}n.push(o.str),b(this,wr,fE).call(this,o)}},fE=function(t){var A;const e=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Ea).push(e);const s=W.transform(a(this,Dd),t.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,zc)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,kd)&&o.fontSubstitution||o.fontFamily;l=se.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),h=c*b(A=se,Wn,gE).call(A,l,o,a(this,ba));let u,d;r===0?(u=s[4],d=s[5]-h):(u=s[4]+h*Math.sin(r),d=s[5]-h*Math.cos(r));const f="calc(var(--total-scale-factor) *",g=e.style;a(this,un)===a(this,Fc)?(g.left=`${(100*u/a(this,Rd)).toFixed(2)}%`,g.top=`${(100*d/a(this,Pd)).toFixed(2)}%`):(g.left=`${f}${u.toFixed(2)}px)`,g.top=`${f}${d.toFixed(2)}px)`),g.fontSize=`${f}${(a(se,to)*c).toFixed(2)}px)`,g.fontFamily=l,n.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,kd)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(n.angle=r*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),m=Math.abs(t.transform[3]);E!==m&&Math.max(E,m)/Math.min(E,m)>1.5&&(v=!0)}if(v&&(n.canvasWidth=o.vertical?t.height:t.width),a(this,Md).set(e,n),a(this,qs).div=e,a(this,qs).properties=n,b(this,wr,Hv).call(this,a(this,qs)),n.hasText&&a(this,un).append(e),n.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),a(this,un).append(E)}},Hv=function(t){var l;const{div:e,properties:n,ctx:s}=t,{style:r}=e;let o="";if(a(se,to)>1&&(o=`scale(${1/a(se,to)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=n;b(l=se,Wn,jv).call(l,s,u*a(this,$r),c);const{width:d}=s.measureText(e.textContent);d>0&&(o=`scaleX(${h*a(this,$r)/d}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Wn=new WeakSet,Mp=function(t=null){let e=a(this,Ca).get(t||(t=""));if(!e){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=t,document.body.append(n),e=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Ca).set(t,e),a(this,Nd).set(e,{size:0,family:""})}return e},jv=function(t,e,n){const s=a(this,Nd).get(t);e===s.size&&n===s.family||(t.font=`${e}px ${n}`,s.size=e,s.family=n)},pE=function(){if(a(this,to)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),p(this,to,t.getBoundingClientRect().height),t.remove()},gE=function(t,e,n){const s=a(this,Vc).get(t);if(s)return s;const r=b(this,Wn,Mp).call(this,n);r.canvas.width=r.canvas.height=DS,b(this,Wn,jv).call(this,r,DS,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return l?h=l/(l+c):(Ne.platform.isFirefox&&$("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),a(this,Vc).set(t,h),h},S(se,Wn),S(se,Vc,new Map),S(se,Ca,new Map),S(se,Nd,new WeakMap),S(se,to,null),S(se,Uc,new Set);let Uu=se;class qu{static textContent(t){const e=[],n={items:e,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(qu.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)s(h)}return s(t),n}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const hM=100;function mE(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new Wv,{docId:e}=t,n=i.url?v_(i.url):null,s=i.data?w_(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,l=i.password??null,c=i.range instanceof yE?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let u=i.worker instanceof Hu?i.worker:null;const d=i.verbosity,f=typeof i.docBaseUrl=="string"&&!Am(i.docBaseUrl)?i.docBaseUrl:null,g=ip(i.cMapUrl),v=i.cMapPacked!==!1,A=i.CMapReaderFactory||(Ze?k_:SS),E=ip(i.iccUrl),m=ip(i.standardFontDataUrl),y=i.StandardFontDataFactory||(Ze?P_:AS),w=ip(i.wasmUrl),x=i.WasmFactory||(Ze?R_:bS),C=i.stopAtErrors!==!0,T=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,k=i.isEvalSupported!==!1,P=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ze,_=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Ze&&(Ne.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,D=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ze,F=i.fontExtraProperties===!0,X=i.enableXfa===!0,Q=i.ownerDocument||globalThis.document,tt=i.disableRange===!0,B=i.disableStream===!0,z=i.disableAutoFetch===!0,L=i.pdfBug===!0,V=i.CanvasFactory||(Ze?T_:x_),G=i.FilterFactory||(Ze?C_:E_),ct=i.enableHWA===!0,J=i.useWasm!==!1,ht=c?c.length:i.length??NaN,Se=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ze&&!D,je=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(A===SS&&y===AS&&x===bS&&g&&m&&w&&Kh(g,document.baseURI)&&Kh(m,document.baseURI)&&Kh(w,document.baseURI)),ee=null;QR(d);const Et={canvasFactory:new V({ownerDocument:Q,enableHWA:ct}),filterFactory:new G({docId:e,ownerDocument:Q}),cMapReaderFactory:je?null:new A({baseUrl:g,isCompressed:v}),standardFontDataFactory:je?null:new y({baseUrl:m}),wasmFactory:je?null:new x({baseUrl:w})};u||(u=Hu.create({verbosity:d,port:hs.workerPort}),t._worker=u);const Cm={docId:e,apiVersion:"5.4.149",data:s,password:l,disableAutoFetch:z,rangeChunkSize:h,length:ht,docBaseUrl:f,enableXfa:X,evaluatorOptions:{maxImageSize:T,disableFontFace:D,ignoreErrors:C,isEvalSupported:k,isOffscreenCanvasSupported:P,isImageDecoderSupported:_,canvasMaxAreaInBytes:R,fontExtraProperties:F,useSystemFonts:Se,useWasm:J,useWorkerFetch:je,cMapUrl:g,iccUrl:E,standardFontDataUrl:m,wasmUrl:w}},Tm={ownerDocument:Q,pdfBug:L,styleElement:ee,loadingParams:{disableAutoFetch:z,enableXfa:X}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const km=u.messageHandler.sendWithPromise("GetDocRequest",Cm,s?[s.buffer]:null);let Ho;if(c)Ho=new G_(c,{disableRange:tt,disableStream:B});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const jo=Kh(n)?Q_:Ze?oM:eM;Ho=new jo({url:n,length:ht,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:tt,disableStream:B})}return km.then(jo=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const Ww=new $h(e,jo,u.port),EC=new fM(Ww,t,Ho,Tm,Et,ct);t._transport=EC,Ww.send("Ready",null)})}).catch(t._capability.reject),t}var qg;const Hg=class Hg{constructor(){M(this,"_capability",Promise.withResolvers());M(this,"_transport",null);M(this,"_worker",null);M(this,"docId",`d${ne(Hg,qg)._++}`);M(this,"destroyed",!1);M(this,"onPassword",null);M(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,n,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};qg=new WeakMap,S(Hg,qg,0);let Wv=Hg;var Ta,Ld,Id,Fd,Od;class yE{constructor(t,e,n=!1,s=null){S(this,Ta,Promise.withResolvers());S(this,Ld,[]);S(this,Id,[]);S(this,Fd,[]);S(this,Od,[]);this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(t){a(this,Od).push(t)}addProgressListener(t){a(this,Fd).push(t)}addProgressiveReadListener(t){a(this,Id).push(t)}addProgressiveDoneListener(t){a(this,Ld).push(t)}onDataRange(t,e){for(const n of a(this,Od))n(t,e)}onDataProgress(t,e){a(this,Ta).promise.then(()=>{for(const n of a(this,Fd))n(t,e)})}onDataProgressiveRead(t){a(this,Ta).promise.then(()=>{for(const e of a(this,Id))e(t)})}onDataProgressiveDone(){a(this,Ta).promise.then(()=>{for(const t of a(this,Ld))t()})}transportReady(){a(this,Ta).resolve()}requestDataRange(t,e){xt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Ta=new WeakMap,Ld=new WeakMap,Id=new WeakMap,Fd=new WeakMap,Od=new WeakMap;class uM{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,e){return this._transport.getAnnotationsByType(t,e)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Hs,ka,su;class dM{constructor(t,e,n,s=!1){S(this,ka);S(this,Hs,!1);this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=s?new yS:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new uE,this._intentStates=new Map,this.destroyed=!1,this.recordedGroups=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:r=!1}={}){return new Rf({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:n,offsetY:s,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return rt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,canvas:e=t.canvas,viewport:n,intent:s="display",annotationMode:r=Rr.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:h=null,pageColors:u=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:g=!1,filteredOperationIndexes:v=null}){var P,_,R;(P=this._stats)==null||P.time("Overall");const A=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:E,cacheKey:m}=A;p(this,Hs,!1),c||(c=this._transport.getOptionalContentConfig(E));let y=this._intentStates.get(m);y||(y=Object.create(null),this._intentStates.set(m,y)),y.streamReaderCancelTimeout&&(clearTimeout(y.streamReaderCancelTimeout),y.streamReaderCancelTimeout=null);const w=!!(E&zn.PRINT);y.displayReadyCapability||(y.displayReadyCapability=Promise.withResolvers(),y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(_=this._stats)==null||_.time("Page Request"),this._pumpOperatorList(A));const x=!this.recordedGroups&&(g||this._pdfBug&&((R=globalThis.StepperManager)==null?void 0:R.enabled)),C=D=>{var F,X,Q;if(y.renderTasks.delete(T),x){const tt=(F=T.gfx)==null?void 0:F.dependencyTracker.take();tt?((X=T.stepper)==null||X.setOperatorGroups(tt),g&&(this.recordedGroups=tt)):g&&(this.recordedGroups=[])}w&&p(this,Hs,!0),b(this,ka,su).call(this),D?(T.capability.reject(D),this._abortOperatorList({intentState:y,reason:D instanceof Error?D:new Error(D)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(Q=globalThis.Stats)!=null&&Q.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new Gv({callback:C,params:{canvas:e,canvasContext:t,dependencyTracker:x?new __(e):null,viewport:n,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:y.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!w,pdfBug:this._pdfBug,pageColors:u,enableHWA:this._transport.enableHWA,filteredOperationIndexes:v});(y.renderTasks||(y.renderTasks=new Set)).add(T);const k=T.task;return Promise.all([y.displayReadyCapability.promise,c]).then(([D,F])=>{var X;if(this.destroyed){C();return}if((X=this._stats)==null||X.time("Rendering"),!(F.renderingIntent&E))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:D,optionalContentConfig:F}),T.operatorListChanged()}).catch(C),k}getOperatorList({intent:t="display",annotationMode:e=Rr.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var h;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,n,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>qu.textContent(n));const e=this.streamTextContent(t);return new Promise(function(n,s){function r(){o.read().then(function({value:c,done:h}){if(h){n(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),p(this,Hs,!1),Promise.all(t)}cleanup(t=!1){p(this,Hs,!0);const e=b(this,ka,su).call(this);return t&&e&&this._stats&&(this._stats=new yS),e}_startRenderPage(t,e){var s,r;const n=this._intentStates.get(e);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=n.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let n=0,s=t.length;n<s;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const n of e.renderTasks)n.operatorListChanged();t.lastChunk&&b(this,ka,su).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n,modifiedIds:s}){const{map:r,transfer:o}=n,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:s},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:d,done:f})=>{if(f){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,h),u())},d=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const f of h.renderTasks)f.operatorListChanged();b(this,ka,su).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(d);else if(h.opListReadCapability)h.opListReadCapability.reject(d);else throw d}})};u()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof _w){let s=hM;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Fo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Hs=new WeakMap,ka=new WeakSet,su=function(){if(!a(this,Hs)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),p(this,Hs,!1),!0};var eo,bi,js,Pa,jg,Ra,_a,en,Dp,vE,wE,ru,qc,Np;const _t=class _t{constructor({name:t=null,port:e=null,verbosity:n=JR()}={}){S(this,en);S(this,eo,Promise.withResolvers());S(this,bi,null);S(this,js,null);S(this,Pa,null);if(this.name=t,this.destroyed=!1,this.verbosity=n,e){if(a(_t,_a).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(_t,_a).set(e,this),b(this,en,vE).call(this,e)}else b(this,en,wE).call(this)}get promise(){return a(this,eo).promise}get port(){return a(this,js)}get messageHandler(){return a(this,bi)}destroy(){var t,e;this.destroyed=!0,(t=a(this,Pa))==null||t.terminate(),p(this,Pa,null),a(_t,_a).delete(a(this,js)),p(this,js,null),(e=a(this,bi))==null||e.destroy(),p(this,bi,null)}static create(t){const e=a(this,_a).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new _t(t)}static get workerSrc(){if(hs.workerSrc)return hs.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return rt(this,"_setupFakeWorkerGlobal",(async()=>a(this,qc,Np)?a(this,qc,Np):(await import(this.workerSrc)).WorkerMessageHandler)())}};eo=new WeakMap,bi=new WeakMap,js=new WeakMap,Pa=new WeakMap,jg=new WeakMap,Ra=new WeakMap,_a=new WeakMap,en=new WeakSet,Dp=function(){a(this,eo).resolve(),a(this,bi).send("configure",{verbosity:this.verbosity})},vE=function(t){p(this,js,t),p(this,bi,new $h("main","worker",t)),a(this,bi).on("ready",()=>{}),b(this,en,Dp).call(this)},wE=function(){if(a(_t,Ra)||a(_t,qc,Np)){b(this,en,ru).call(this);return}let{workerSrc:t}=_t;try{_t._isSameOrigin(window.location,t)||(t=_t._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),n=new $h("main","worker",e),s=()=>{r.abort(),n.destroy(),e.terminate(),this.destroyed?a(this,eo).reject(new Error("Worker was destroyed")):b(this,en,ru).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,Pa)||s()},{signal:r.signal}),n.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}p(this,bi,n),p(this,js,e),p(this,Pa,e),b(this,en,Dp).call(this)}),n.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{b(this,en,ru).call(this)}});const o=()=>{const l=new Uint8Array;n.send("test",l,[l.buffer])};o();return}catch{Sm("The worker has been disabled.")}b(this,en,ru).call(this)},ru=function(){a(_t,Ra)||($("Setting up fake worker."),p(_t,Ra,!0)),_t._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,eo).reject(new Error("Worker was destroyed"));return}const e=new b_;p(this,js,e);const n=`fake${ne(_t,jg)._++}`,s=new $h(n+"_worker",n,e);t.setup(s,e),p(this,bi,new $h(n,n+"_worker",e)),b(this,en,Dp).call(this)}).catch(t=>{a(this,eo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},qc=new WeakSet,Np=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},S(_t,qc),S(_t,jg,0),S(_t,Ra,!1),S(_t,_a,new WeakMap),Ze&&(p(_t,Ra,!0),hs.workerSrc||(hs.workerSrc="./pdf.worker.mjs")),_t._isSameOrigin=(t,e)=>{const n=URL.parse(t);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(e,n);return n.origin===s.origin},_t._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},_t.fromPort=t=>{if(c_("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return _t.create(t)};let Hu=_t;var Ws,$i,Hc,jc,Gs,Ma,ou;class fM{constructor(t,e,n,s,r,o){S(this,Ma);S(this,Ws,new Map);S(this,$i,new Map);S(this,Hc,new Map);S(this,jc,new Map);S(this,Gs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new uE,this.fontLoader=new m_({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return rt(this,"annotationStorage",new Dw)}getRenderingIntent(t,e=Rr.ENABLE,n=null,s=!1,r=!1){let o=zn.DISPLAY,l=Dv;switch(t){case"any":o=zn.ANY;break;case"display":break;case"print":o=zn.PRINT;break;default:$(`getRenderingIntent - invalid intent: ${t}`)}const c=o&zn.PRINT&&n instanceof Yx?n:this.annotationStorage;switch(e){case Rr.DISABLE:o+=zn.ANNOTATIONS_DISABLE;break;case Rr.ENABLE:break;case Rr.ENABLE_FORMS:o+=zn.ANNOTATIONS_FORMS;break;case Rr.ENABLE_STORAGE:o+=zn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:$(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(o+=zn.IS_EDITING),r&&(o+=zn.OPLIST);const{ids:h,hash:u}=c.modifiedIds,d=[o,l.hash,u];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=a(this,Gs))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of a(this,$i).values())t.push(s._destroy());a(this,$i).clear(),a(this,Hc).clear(),a(this,jc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Ws).clear(),this.filterFactory.destroy(),Uu.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Fo("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(n,s)=>{$t(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}$t(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async n=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(n,s)=>{$t(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(n.begin,n.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}$t(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,e._capability.resolve(new uM(n,this))}),t.on("DocException",n=>{e._capability.reject(ln(n))}),t.on("PasswordRequest",n=>{p(this,Gs,Promise.withResolvers());try{if(!e.onPassword)throw ln(n);const s=r=>{r instanceof Error?a(this,Gs).reject(r):a(this,Gs).resolve({password:r})};e.onPassword(s,n.code)}catch(s){a(this,Gs).reject(s)}return a(this,Gs).promise}),t.on("DataLoaded",n=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),t.on("StartRenderPage",n=>{if(this.destroyed)return;a(this,$i).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),t.on("commonobj",([n,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in r){const u=r.error;$(`Error during font loading: ${u}`),this.commonObjs.resolve(n,u);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,d)=>globalThis.FontInspector.fontAdded(u,d):null,c=new y_(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:n})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(n,c)});break;case"CopyLocalImage":const{imageRef:h}=r;$t(h,"The imageRef must be defined.");for(const u of a(this,$i).values())for(const[,d]of u.objs)if((d==null?void 0:d.ref)===h)return d.dataLen?(this.commonObjs.resolve(n,structuredClone(d)),d.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([n,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,$i).get(s);if(!l.objs.has(n)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",n=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:n.loaded,total:n.total})}),t.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&$("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((n=this._fullReader)==null?void 0:n.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=a(this,Hc).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,jc).set(r.refStr,t);const o=new dM(e,r,this,this._params.pdfBug);return a(this,$i).set(e,o),o});return a(this,Hc).set(e,s),s}getPageIndex(t){return Nv(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return b(this,Ma,ou).call(this,"GetFieldObjects")}hasJSActions(){return b(this,Ma,ou).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,e){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:e})}getDocJSActions(){return b(this,Ma,ou).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return b(this,Ma,ou).call(this,"GetOptionalContentConfig").then(e=>new W_(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Ws).get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new H_(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,Ws).set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,$i).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Ws).clear(),this.filterFactory.destroy(!0),Uu.cleanup()}}cachedPageNumber(t){if(!Nv(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,jc).get(e)??null}}Ws=new WeakMap,$i=new WeakMap,Hc=new WeakMap,jc=new WeakMap,Gs=new WeakMap,Ma=new WeakSet,ou=function(t,e=null){const n=a(this,Ws).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise(t,e);return a(this,Ws).set(t,s),s};var no;class pM{constructor(t){S(this,no,null);M(this,"onContinue",null);M(this,"onError",null);p(this,no,t)}get promise(){return a(this,no).capability.promise}cancel(t=0){a(this,no).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,no).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,no);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}no=new WeakMap;var io,Da;const Jo=class Jo{constructor({callback:t,params:e,objs:n,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:g=!1,filteredOperationIndexes:v=null}){S(this,io,null);this.callback=t,this.params=e,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new pM(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvas,this._canvasContext=e.canvas?null:e.canvasContext,this._enableHWA=g,this._dependencyTracker=e.dependencyTracker,this._filteredOperationIndexes=v}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var c,h;if(this.cancelled)return;if(this._canvas){if(a(Jo,Da).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(Jo,Da).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new nc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:n,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(h=this.graphicsReadyCallback)==null||h.call(this)}cancel(t=null,e=0){var n,s,r;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),a(this,io)&&(window.cancelAnimationFrame(a(this,io)),p(this,io,null)),a(Jo,Da).delete(this._canvas),t||(t=new _w(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(s=this.task).onError)==null||r.call(s,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?p(this,io,window.requestAnimationFrame(()=>{p(this,io,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._filteredOperationIndexes),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(Jo,Da).delete(this._canvas),this.callback())))}};io=new WeakMap,Da=new WeakMap,S(Jo,Da,new WeakSet);let Gv=Jo;const gM="5.4.149",mM="9e2e9e209";var kn,Na,Wc,le,zd,Gc,Ks,Bd,so,xi,Vd,bt,Kv,Xv,Yv,Ko,SE,Er;const cn=class cn{constructor({editor:t=null,uiManager:e=null}){S(this,bt);S(this,kn,null);S(this,Na,null);S(this,Wc);S(this,le,null);S(this,zd,!1);S(this,Gc,!1);S(this,Ks,null);S(this,Bd);S(this,so,null);S(this,xi,null);var n,s;t?(p(this,Gc,!1),p(this,Ks,t)):p(this,Gc,!0),p(this,xi,(t==null?void 0:t._uiManager)||e),p(this,Bd,a(this,xi)._eventBus),p(this,Wc,((n=t==null?void 0:t.color)==null?void 0:n.toUpperCase())||((s=a(this,xi))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(cn,Vd)||p(cn,Vd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return rt(this,"_keyboardManager",new _f([[["Escape","mac+Escape"],cn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],cn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],cn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],cn.prototype._moveToPrevious],[["Home","mac+Home"],cn.prototype._moveToBeginning],[["End","mac+End"],cn.prototype._moveToEnd]]))}renderButton(){const t=p(this,kn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",a(this,Ks)&&(t.ariaControls=`${a(this,Ks).id}_colorpicker_dropdown`);const e=a(this,xi)._signal;t.addEventListener("click",b(this,bt,Ko).bind(this),{signal:e}),t.addEventListener("keydown",b(this,bt,Yv).bind(this),{signal:e});const n=p(this,Na,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=a(this,Wc),t.append(n),t}renderMainDropdown(){const t=p(this,le,b(this,bt,Kv).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===a(this,kn)){b(this,bt,Ko).call(this,t);return}const e=t.target.getAttribute("data-color");e&&b(this,bt,Xv).call(this,e,t)}_moveToNext(t){var e,n;if(!a(this,bt,Er)){b(this,bt,Ko).call(this,t);return}if(t.target===a(this,kn)){(e=a(this,le).firstChild)==null||e.focus();return}(n=t.target.nextSibling)==null||n.focus()}_moveToPrevious(t){var e,n;if(t.target===((e=a(this,le))==null?void 0:e.firstChild)||t.target===a(this,kn)){a(this,bt,Er)&&this._hideDropdownFromKeyboard();return}a(this,bt,Er)||b(this,bt,Ko).call(this,t),(n=t.target.previousSibling)==null||n.focus()}_moveToBeginning(t){var e;if(!a(this,bt,Er)){b(this,bt,Ko).call(this,t);return}(e=a(this,le).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,bt,Er)){b(this,bt,Ko).call(this,t);return}(e=a(this,le).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,le))==null||t.classList.add("hidden"),a(this,kn).ariaExpanded="false",(e=a(this,so))==null||e.abort(),p(this,so,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,Gc)){if(!a(this,bt,Er)){(t=a(this,Ks))==null||t.unselect();return}this.hideDropdown(),a(this,kn).focus({preventScroll:!0,focusVisible:a(this,zd)})}}updateColor(t){if(a(this,Na)&&(a(this,Na).style.backgroundColor=t),!a(this,le))return;const e=a(this,xi).highlightColors.values();for(const n of a(this,le).children)n.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=a(this,kn))==null||t.remove(),p(this,kn,null),p(this,Na,null),(e=a(this,le))==null||e.remove(),p(this,le,null)}};kn=new WeakMap,Na=new WeakMap,Wc=new WeakMap,le=new WeakMap,zd=new WeakMap,Gc=new WeakMap,Ks=new WeakMap,Bd=new WeakMap,so=new WeakMap,xi=new WeakMap,Vd=new WeakMap,bt=new WeakSet,Kv=function(){const t=document.createElement("div"),e=a(this,xi)._signal;t.addEventListener("contextmenu",pi,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,Ks)&&(t.id=`${a(this,Ks).id}_colorpicker_dropdown`);for(const[n,s]of a(this,xi).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=n,r.setAttribute("data-l10n-id",a(cn,Vd)[n]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===a(this,Wc),r.addEventListener("click",b(this,bt,Xv).bind(this,s),{signal:e}),t.append(r)}return t.addEventListener("keydown",b(this,bt,Yv).bind(this),{signal:e}),t},Xv=function(t,e){e.stopPropagation(),a(this,Bd).dispatch("switchannotationeditorparams",{source:this,type:lt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)},Yv=function(t){cn._keyboardManager.exec(this,t)},Ko=function(t){if(a(this,bt,Er)){this.hideDropdown();return}if(p(this,zd,t.detail===0),a(this,so)||(p(this,so,new AbortController),window.addEventListener("pointerdown",b(this,bt,SE).bind(this),{signal:a(this,xi).combinedSignal(a(this,so))})),a(this,kn).ariaExpanded="true",a(this,le)){a(this,le).classList.remove("hidden");return}const e=p(this,le,b(this,bt,Kv).call(this));a(this,kn).append(e)},SE=function(t){var e;(e=a(this,le))!=null&&e.contains(t.target)||this.hideDropdown()},Er=function(){return a(this,le)&&!a(this,le).classList.contains("hidden")},S(cn,Vd,null);let kg=cn;var ts,Ud,Kc,qd;const Zo=class Zo{constructor(t){S(this,ts,null);S(this,Ud,null);S(this,Kc,null);p(this,Ud,t),p(this,Kc,t._uiManager),a(Zo,qd)||p(Zo,qd,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,ts))return a(this,ts);const{editorType:t,colorType:e,colorValue:n}=a(this,Ud),s=p(this,ts,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",a(Zo,qd)[t]),s.addEventListener("input",()=>{a(this,Kc).updateParams(e,s.value)},{signal:a(this,Kc)._signal}),s}update(t){a(this,ts)&&(a(this,ts).value=t)}destroy(){var t;(t=a(this,ts))==null||t.remove(),p(this,ts,null)}hideDropdown(){}};ts=new WeakMap,Ud=new WeakMap,Kc=new WeakMap,qd=new WeakMap,S(Zo,qd,null);let Pg=Zo;function NS(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Uh(i){return Math.max(0,Math.min(255,255*i))}class LS{static CMYK_G([t,e,n,s]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Uh(t),[t,t,t]}static G_HTML([t]){const e=NS(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(Uh)}static RGB_HTML(t){return`#${t.map(NS).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,n+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,n,s]){return[Uh(1-Math.min(1,t+s)),Uh(1-Math.min(1,n+s)),Uh(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const s=1-t,r=1-e,o=1-n,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class yM{create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){xt("Abstract method `_createSVG` called.")}}class Rg extends yM{_createSVG(t){return document.createElementNS(ys,t)}}class AE{static setupStorage(t,e,n,s,r){const o=s.getValue(e,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{s.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{s.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of n.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:n=null,intent:s,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}l&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){var d,f;const e=t.annotationStorage,n=t.linkService,s=t.xfaHtml,r=t.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:n});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(s.children.length===0){if(s.value){const g=document.createTextNode(s.value);o.append(g),l&&qu.shouldBuildText(s.name)&&h.push(g)}return{textDivs:h}}const u=[[s,-1,o]];for(;u.length>0;){const[g,v,A]=u.at(-1);if(v+1===g.children.length){u.pop();continue}const E=g.children[++u.at(-1)[1]];if(E===null)continue;const{name:m}=E;if(m==="#text"){const w=document.createTextNode(E.value);h.push(w),A.append(w);continue}const y=(d=E==null?void 0:E.attributes)!=null&&d.xmlns?document.createElementNS(E.attributes.xmlns,m):document.createElement(m);if(A.append(y),E.attributes&&this.setAttributes({html:y,element:E,storage:e,intent:r,linkService:n}),((f=E.children)==null?void 0:f.length)>0)u.push([E,-1,y]);else if(E.value){const w=document.createTextNode(E.value);l&&qu.shouldBuildText(m)&&h.push(w),y.append(w)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const vM=9,ml=new WeakSet,wM=new Date().getTimezoneOffset()*60*1e3;class IS{static create(t){switch(t.data.annotationType){case Yt.LINK:return new Iw(t);case Yt.TEXT:return new SM(t);case Yt.WIDGET:switch(t.data.fieldType){case"Tx":return new AM(t);case"Btn":return t.data.radioButton?new CE(t):t.data.checkBox?new xM(t):new EM(t);case"Ch":return new CM(t);case"Sig":return new bM(t)}return new bl(t);case Yt.POPUP:return new Jv(t);case Yt.FREETEXT:return new DE(t);case Yt.LINE:return new kM(t);case Yt.SQUARE:return new PM(t);case Yt.CIRCLE:return new RM(t);case Yt.POLYLINE:return new NE(t);case Yt.CARET:return new MM(t);case Yt.INK:return new Fw(t);case Yt.POLYGON:return new _M(t);case Yt.HIGHLIGHT:return new LE(t);case Yt.UNDERLINE:return new DM(t);case Yt.SQUIGGLY:return new NM(t);case Yt.STRIKEOUT:return new LM(t);case Yt.STAMP:return new IE(t);case Yt.FILEATTACHMENT:return new IM(t);default:return new Kt(t)}}}var La,Xc,Xs,yl,bE,Qv;const Hw=class Hw{constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){S(this,yl);S(this,La,null);S(this,Xc,!1);S(this,Xs,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Hw._hasPopupData(this.data)}get hasCommentButton(){return this.enableComment&&this._isEditable&&this.hasPopupElement}get commentButtonPosition(){const{quadPoints:t,rect:e}=this.data;let n=-1/0,s=-1/0;if((t==null?void 0:t.length)>=8){for(let r=0;r<t.length;r+=8)t[r+1]>s?(s=t[r+1],n=t[r+2]):t[r+1]===s&&(n=Math.max(n,t[r+2]));return[n,s]}return e?[e[2],e[3]]:null}get commentButtonColor(){if(!this.data.color)return null;const[t,e,n]=this.data.color,r=255*(1-(this.data.opacity??1));return b(this,yl,bE).call(this,Math.min(t+r,255),Math.min(e+r,255),Math.min(n+r,255))}_normalizePoint(t){const{page:{view:e},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return t[1]=e[3]-t[1]+e[1],t[0]=100*(t[0]-r)/n,t[1]=100*(t[1]-o)/s,t}updateEdited(t){var r;if(!this.container)return;t.rect&&(a(this,La)||p(this,La,{rect:this.data.rect.slice(0)}));const{rect:e,popup:n}=t;e&&b(this,yl,Qv).call(this,e);let s=((r=a(this,Xs))==null?void 0:r.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=a(this,Xs).popup),s&&(s.updateEdited(t),n!=null&&n.deleted&&(s.remove(),p(this,Xs,null),this.popup=null))}resetEdited(){var t;a(this,La)&&(b(this,yl,Qv).call(this,a(this,La).rect),(t=a(this,Xs))==null||t.popup.resetEdited(),p(this,La,null))}_createContainer(t){const{data:e,parent:{page:n,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),!(this instanceof bl)&&!(this instanceof Iw)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Jv){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(A>0||E>0){const y=`calc(${A}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=y}else if(this instanceof CE){const y=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=y}switch(e.borderStyle.style){case Tl.SOLID:o.borderStyle="solid";break;case Tl.DASHED:o.borderStyle="dashed";break;case Tl.BEVELED:$("Unimplemented border style: beveled");break;case Tl.INSET:$("Unimplemented border style: inset");break;case Tl.UNDERLINE:o.borderBottomStyle="solid";break}const m=e.borderColor||null;m?(p(this,Xc,!0),o.borderColor=W.makeHexColor(m[0]|0,m[1]|0,m[2]|0)):o.borderWidth=0}const h=W.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]),{pageWidth:u,pageHeight:d,pageX:f,pageY:g}=s.rawDims;o.left=`${100*(h[0]-f)/u}%`,o.top=`${100*(h[1]-g)/d}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(o.width=`${100*l/u}%`,o.height=`${100*c/d}%`):this.setRotation(v,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/n}%`,e.style.height=`${100*o/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,n,s)=>{const r=s.detail[e],o=r[0],l=r.slice(1);s.target.style[n]=LS[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[n]:LS[`${o}_rgb`](l)})};return rt(this,"_commonActions",{display:e=>{const{display:n}=e.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:n}=e.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const n=e.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const s of Object.keys(e.detail)){const r=t[s]||n[s];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[s,r]of Object.entries(e)){const o=n[s];if(o){const l={detail:{[s]:r},target:t};o(l),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,s,r]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,E,m,y]=t.subarray(2,6);if(s===A&&r===E&&e===m&&n===y)return}const{style:o}=this.container;let l;if(a(this,Xc)){const{borderColor:A,borderWidth:E}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=s-e,h=r-n,{svgFactory:u}=this,d=u.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=u.createElement("defs");d.append(f);const g=u.createElement("clipPath"),v=`clippath_${this.data.id}`;g.setAttribute("id",v),g.setAttribute("clipPathUnits","objectBoundingBox"),f.append(g);for(let A=2,E=t.length;A<E;A+=8){const m=t[A],y=t[A+1],w=t[A+2],x=t[A+3],C=u.createElement("rect"),T=(w-e)/c,k=(r-y)/h,P=(m-w)/c,_=(y-x)/h;C.setAttribute("x",T),C.setAttribute("y",k),C.setAttribute("width",P),C.setAttribute("height",_),g.append(C),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${T}" y="${k}" width="${P}" height="${_}"/>`)}a(this,Xc)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${v})`}_createPopup(t=null){const{data:e}=this;let n,s;t?(n={str:t.text},s=t.date):(n=e.contentsObj,s=e.modificationDate);const r=p(this,Xs,new Jv({data:{color:e.color,titleObj:e.titleObj,modificationDate:s,contentsObj:n,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent.div.append(r.render())}get hasPopupElement(){return!!(a(this,Xs)||this.popup||this.data.popupRef)}render(){xt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!ml.has(h)){$(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:c,domElement:h})}return n}for(const s of document.getElementsByName(t)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==e&&ml.has(s)&&n.push({id:o,exportValue:r,domElement:s})}return n}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};La=new WeakMap,Xc=new WeakMap,Xs=new WeakMap,yl=new WeakSet,bE=function(t,e,n){t/=255,e/=255,n/=255;const s=Math.max(t,e,n),r=Math.min(t,e,n),o=(s+r)/2,l=((1+Math.sqrt(o))/2*100).toFixed(2);if(s===r)return`hsl(0, 0%, ${l}%)`;const c=s-r;let h;s===t?h=(e-n)/c+(e<n?6:0):s===e?h=(n-t)/c+2:h=(t-e)/c+4,h=(h*60).toFixed(2);const u=(c/(1-Math.abs(2*o-1))*100).toFixed(2);return`hsl(${h}, ${u}%, ${l}%)`},Qv=function(t){const{container:{style:e},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;n==null||n.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,s===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(s)};let Kt=Hw;var Un,Xo,xE,EE;class Iw extends Kt{constructor(e,n=null){super(e,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});S(this,Un);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let r=!1;return e.url?(n.addLinkAttributes(s,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),r=!0):e.attachment?(b(this,Un,xE).call(this,s,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(b(this,Un,EE).call(this,s,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),r=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(e,n,s=""){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&b(this,Un,Xo).call(this),s&&(e.title=s)}_bindNamedAction(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(e.title=s),b(this,Un,Xo).call(this)}_bindJSAction(e,n){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(n.actions)){const o=s.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:r}}),!1})}n.overlaidText&&(e.title=n.overlaidText),e.onclick||(e.onclick=()=>!1),b(this,Un,Xo).call(this)}_bindResetFormAction(e,n){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),b(this,Un,Xo).call(this),!this._fieldObjects){$('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=n,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const g of r){const v=this._fieldObjects[g]||[];for(const{id:A}of v)f.add(A)}for(const g of Object.values(this._fieldObjects))for(const v of g)f.has(v.id)===l&&c.push(v)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const h=this.annotationStorage,u=[];for(const f of c){const{id:g}=f;switch(u.push(g),f.type){case"text":{const A=f.defaultValue||"";h.setValue(g,{value:A});break}case"checkbox":case"radiobutton":{const A=f.defaultValue===f.exportValues;h.setValue(g,{value:A});break}case"combobox":case"listbox":{const A=f.defaultValue||"";h.setValue(g,{value:A});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!ml.has(v)){$(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Un=new WeakSet,Xo=function(){this.container.setAttribute("data-internal-link","")},xE=function(e,n,s="",r=null){e.href=this.linkService.getAnchorUrl(""),n.description?e.title=n.description:s&&(e.title=s),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,r),!1},b(this,Un,Xo).call(this)},EE=function(e,n,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(e.title=s),b(this,Un,Xo).call(this)};class SM extends Kt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class bl extends Kt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ne.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,n,s,r){n.includes("mouse")?t.addEventListener(n,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(n,o=>{var l;if(n==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(n==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(t,e,n,s){var r,o,l;for(const[c,h]of n)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,s),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":W.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||vM,r=t.style;let o;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(h/(ly*s))||1,d=h/u;o=Math.min(s,c(d/ly))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(h/ly))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=W.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class AM extends bl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,n,s){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[s]:n})}render(){var s,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=h??l,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",h??l),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),ml.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:g}=this.data,v=!!f&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),c&&(n.maxLength=c),n.addEventListener("input",E=>{t.setValue(e,{value:E.target.value}),this.setPropertyOnSiblings(n,"value",E.target.value,"value"),u.formattedValue=null}),n.addEventListener("resetform",E=>{const m=this.data.defaultFieldValue??"";n.value=u.userValue=m,u.formattedValue=null});let A=E=>{const{formattedValue:m}=u;m!=null&&(E.target.value=m),E.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",m=>{var w;if(u.focused)return;const{target:y}=m;if(v&&(y.type=f,g&&(y.step=g)),u.userValue){const x=u.userValue;if(v)if(f==="time"){const C=new Date(x),T=[C.getHours(),C.getMinutes(),C.getSeconds()];y.value=T.map(k=>k.toString().padStart(2,"0")).join(":")}else y.value=new Date(x-wM).toISOString().split(f==="date"?"T":".",1)[0];else y.value=x}u.lastCommittedValue=y.value,u.commitKey=1,(w=this.data.actions)!=null&&w.Focus||(u.focused=!0)}),n.addEventListener("updatefromsandbox",m=>{this.showElementAndHideCanvas(m.target);const y={value(w){u.userValue=w.detail.value??"",v||t.setValue(e,{value:u.userValue.toString()}),w.target.value=u.userValue},formattedValue(w){const{formattedValue:x}=w.detail;u.formattedValue=x,x!=null&&w.target!==document.activeElement&&(w.target.value=x);const C={formattedValue:x};v&&(C.value=x),t.setValue(e,C)},selRange(w){w.target.setSelectionRange(...w.detail.selRange)},charLimit:w=>{var k;const{charLimit:x}=w.detail,{target:C}=w;if(x===0){C.removeAttribute("maxLength");return}C.setAttribute("maxLength",x);let T=u.userValue;!T||T.length<=x||(T=T.slice(0,x),C.value=u.userValue=T,t.setValue(e,{value:T}),(k=this.linkService.eventBus)==null||k.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:C.selectionStart,selEnd:C.selectionEnd}}))}};this._dispatchEventFromSandbox(y,m)}),n.addEventListener("keydown",m=>{var x;u.commitKey=1;let y=-1;if(m.key==="Escape"?y=0:m.key==="Enter"&&!this.data.multiLine?y=2:m.key==="Tab"&&(u.commitKey=3),y===-1)return;const{value:w}=m.target;u.lastCommittedValue!==w&&(u.lastCommittedValue=w,u.userValue=w,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:y,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}}))});const E=A;A=null,n.addEventListener("blur",m=>{var x,C;if(!u.focused||!m.relatedTarget)return;(x=this.data.actions)!=null&&x.Blur||(u.focused=!1);const{target:y}=m;let{value:w}=y;if(v){if(w&&f==="time"){const T=w.split(":").map(k=>parseInt(k,10));w=new Date(2e3,0,1,T[0],T[1],T[2]||0).valueOf(),y.step=""}else w=new Date(w).valueOf();y.type="text"}u.userValue=w,u.lastCommittedValue!==w&&((C=this.linkService.eventBus)==null||C.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:w,willCommit:!0,commitKey:u.commitKey,selStart:m.target.selectionStart,selEnd:m.target.selectionEnd}})),E(m)}),(r=this.data.actions)!=null&&r.Keystroke&&n.addEventListener("beforeinput",m=>{var _;u.lastCommittedValue=null;const{data:y,target:w}=m,{value:x,selectionStart:C,selectionEnd:T}=w;let k=C,P=T;switch(m.inputType){case"deleteWordBackward":{const R=x.substring(0,C).match(/\w*[^\w]*$/);R&&(k-=R[0].length);break}case"deleteWordForward":{const R=x.substring(C).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":C===T&&(k-=1);break;case"deleteContentForward":C===T&&(P+=1);break}m.preventDefault(),(_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:y||"",willCommit:!1,selStart:k,selEnd:P}})}),this._setEventListeners(n,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],m=>m.target.value)}if(A&&n.addEventListener("blur",A),this.data.comb){const m=(this.data.rect[2]-this.data.rect[0])/c;n.classList.add("comb"),n.style.letterSpacing=`calc(${m}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class bM extends bl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class xM extends bl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return ml.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,n)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(n,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class CE extends bl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let s=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(n,{value:s})),s)for(const o of this._getElementsByName(e.fieldName,n))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(ml.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,n))t.setValue(h.id,{value:!1});t.setValue(n,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const u=o===h.detail.value;for(const d of this._getElementsByName(h.target.name)){const f=u&&d.id===n;d.domElement&&(d.domElement.checked=f),t.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class EM extends Iw{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),t}}class CM extends bl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");ml.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",u=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const u of this.data.options){const d=document.createElement("option");d.textContent=u.displayValue,d.value=u.exportValue,n.value.includes(u.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),s.prepend(u),o=()=>{u.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=u=>{const d=u?"value":"textContent",{options:f,multiple:g}=s;return g?Array.prototype.filter.call(f,v=>v.selected).map(v=>v[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const h=u=>{const d=u.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",u=>{const d={value(f){o==null||o();const g=f.detail.value,v=new Set(Array.isArray(g)?g:[g]);for(const A of s.options)A.selected=v.has(A.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const g=s.options,v=f.detail.remove;g[v].selected=!1,s.remove(v),g.length>0&&Array.prototype.findIndex.call(g,E=>E.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(f){const{index:g,displayValue:v,exportValue:A}=f.detail.insert,E=s.children[g],m=document.createElement("option");m.textContent=v,m.value=A,E?E.before(m):s.append(m),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},items(f){const{items:g}=f.detail;for(;s.length!==0;)s.remove(0);for(const v of g){const{displayValue:A,exportValue:E}=v,m=document.createElement("option");m.textContent=A,m.value=E,s.append(m)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:l(!0),items:h(f)}),c=l(!1)},indices(f){const g=new Set(f.detail.indices);for(const v of f.target.options)v.selected=g.has(v.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,u)}),s.addEventListener("input",u=>{var g;const d=l(!0),f=l(!1);t.setValue(e,{value:d}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):s.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Jv extends Kt{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:Kt._hasPopupData(e)}),this.elements=n,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new TM({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,eventBus:this.linkService.eventBus}),n=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",n.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(s=>`${Rw}${s}`).join(",")),this.container}}var Ia,Wg,Gg,Fa,Yc,Ut,Ys,ro,Qs,Hd,jd,Qc,es,Pn,Js,Zs,Wd,oo,Jc,Gd,$s,Zc,Oa,ao,at,Lp,TE,kE,Ip,Zv,PE,RE,_E,ME,Fp,Op,$v;class TM{constructor({container:t,color:e,elements:n,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:h,parentRect:u,open:d,eventBus:f=null}){S(this,at);S(this,Ia,b(this,at,_E).bind(this));S(this,Wg,b(this,at,$v).bind(this));S(this,Gg,b(this,at,Op).bind(this));S(this,Fa,b(this,at,Fp).bind(this));S(this,Yc,null);S(this,Ut,null);S(this,Ys,null);S(this,ro,null);S(this,Qs,null);S(this,Hd,null);S(this,jd,null);S(this,Qc,null);S(this,es,!1);S(this,Pn,null);S(this,Js,null);S(this,Zs,null);S(this,Wd,null);S(this,oo,null);S(this,Jc,null);S(this,Gd,null);S(this,$s,null);S(this,Zc,null);S(this,Oa,null);S(this,ao,!1);p(this,Ut,t),p(this,Zc,s),p(this,Ys,o),p(this,$s,l),p(this,jd,c),p(this,Yc,e),p(this,Gd,h),p(this,Qc,u),p(this,Qs,n),p(this,Hd,f),p(this,ro,xg.toDateObject(r)),this.trigger=n.flatMap(g=>g.getElementsToTriggerPopup()),b(this,at,Lp).call(this),a(this,Ut).hidden=!0,d&&b(this,at,Fp).call(this)}render(){var s;if(a(this,Pn))return;const t=p(this,Pn,document.createElement("div"));if(t.className="popup",a(this,Yc)){const r=t.style.outlineColor=W.makeHexColor(...a(this,Yc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");if(e.className="header",(s=a(this,Zc))!=null&&s.str){const r=document.createElement("span");r.className="title",e.append(r),{dir:r.dir,str:r.textContent}=a(this,Zc)}if(t.append(e),a(this,ro)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,ro).valueOf()})),r.dateTime=a(this,ro).toISOString(),e.append(r)}const n=a(this,at,Ip);if(n)AE.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,Ys));t.append(r)}a(this,Ut).append(t)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const l=s[r];n.append(document.createTextNode(l)),r<o-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:t,popup:e,deleted:n}){var s;if(n||e!=null&&e.deleted){this.remove();return}b(this,at,Lp).call(this),a(this,Oa)||p(this,Oa,{contentsObj:a(this,Ys),richText:a(this,$s)}),t&&p(this,Zs,null),e&&(p(this,$s,b(this,at,RE).call(this,e.text)),p(this,ro,xg.toDateObject(e.date)),p(this,Ys,null)),(s=a(this,Pn))==null||s.remove(),p(this,Pn,null)}resetEdited(){var t;a(this,Oa)&&({contentsObj:ne(this,Ys)._,richText:ne(this,$s)._}=a(this,Oa),p(this,Oa,null),(t=a(this,Pn))==null||t.remove(),p(this,Pn,null),p(this,Zs,null))}remove(){var t,e;(t=a(this,Js))==null||t.abort(),p(this,Js,null),(e=a(this,Pn))==null||e.remove(),p(this,Pn,null),p(this,ao,!1),p(this,es,!1);for(const n of this.trigger)n.classList.remove("popupTriggerArea")}forceHide(){p(this,ao,this.isVisible),a(this,ao)&&(a(this,Ut).hidden=!0)}maybeShow(){b(this,at,Lp).call(this),a(this,ao)&&(a(this,Pn)||b(this,at,Op).call(this),p(this,ao,!1),a(this,Ut).hidden=!1)}get isVisible(){return a(this,Ut).hidden===!1}}Ia=new WeakMap,Wg=new WeakMap,Gg=new WeakMap,Fa=new WeakMap,Yc=new WeakMap,Ut=new WeakMap,Ys=new WeakMap,ro=new WeakMap,Qs=new WeakMap,Hd=new WeakMap,jd=new WeakMap,Qc=new WeakMap,es=new WeakMap,Pn=new WeakMap,Js=new WeakMap,Zs=new WeakMap,Wd=new WeakMap,oo=new WeakMap,Jc=new WeakMap,Gd=new WeakMap,$s=new WeakMap,Zc=new WeakMap,Oa=new WeakMap,ao=new WeakMap,at=new WeakSet,Lp=function(){var e;if(a(this,Js))return;p(this,Js,new AbortController);const{signal:t}=a(this,Js);for(const n of this.trigger)n.addEventListener("click",a(this,Fa),{signal:t}),n.addEventListener("mouseenter",a(this,Gg),{signal:t}),n.addEventListener("mouseleave",a(this,Wg),{signal:t}),n.classList.add("popupTriggerArea");for(const n of a(this,Qs))(e=n.container)==null||e.addEventListener("keydown",a(this,Ia),{signal:t});b(this,at,kE).call(this)},TE=function(){const t=a(this,Qs).find(e=>e.hasCommentButton);t&&(p(this,oo,t._normalizePoint(t.commentButtonPosition)),p(this,Jc,t.commentButtonColor))},kE=function(){if(a(this,Wd)||(a(this,oo)||b(this,at,TE).call(this),!a(this,oo)))return;const t=p(this,Wd,document.createElement("button"));t.className="annotationCommentButton";const e=a(this,Qs)[0].container;t.style.zIndex=e.style.zIndex+1,t.tabIndex=0;const{signal:n}=a(this,Js);t.addEventListener("hover",a(this,Fa),{signal:n}),t.addEventListener("keydown",a(this,Ia),{signal:n}),t.addEventListener("click",()=>{var l;const[{data:{id:r},annotationEditorType:o}]=a(this,Qs);(l=a(this,Hd))==null||l.dispatch("switchannotationeditormode",{source:this,editId:r,mode:o,editComment:!0})},{signal:n});const{style:s}=t;s.left=`calc(${a(this,oo)[0]}%)`,s.top=`calc(${a(this,oo)[1]}% - var(--comment-button-dim))`,a(this,Jc)&&(s.backgroundColor=a(this,Jc)),e.after(t)},Ip=function(){const t=a(this,$s),e=a(this,Ys);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,$s).html||null},Zv=function(){var t,e,n;return((n=(e=(t=a(this,at,Ip))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.fontSize)||0},PE=function(){var t,e,n;return((n=(e=(t=a(this,at,Ip))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:n.color)||null},RE=function(t){const e=[],n={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:a(this,at,PE),fontSize:a(this,at,Zv)?`calc(${a(this,at,Zv)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:s});return n},_E=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,es))&&b(this,at,Fp).call(this)},ME=function(){if(a(this,Zs)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:s,pageY:r}}}=a(this,jd);let o=!!a(this,Qc),l=o?a(this,Qc):a(this,Gd);for(const v of a(this,Qs))if(!l||W.intersect(v.data.rect,l)!==null){l=v.data.rect,o=!0;break}const c=W.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=o?l[2]-l[0]+5:0,d=c[0]+u,f=c[1];p(this,Zs,[100*(d-s)/e,100*(f-r)/n]);const{style:g}=a(this,Ut);g.left=`${a(this,Zs)[0]}%`,g.top=`${a(this,Zs)[1]}%`},Fp=function(){p(this,es,!a(this,es)),a(this,es)?(b(this,at,Op).call(this),a(this,Ut).addEventListener("click",a(this,Fa)),a(this,Ut).addEventListener("keydown",a(this,Ia))):(b(this,at,$v).call(this),a(this,Ut).removeEventListener("click",a(this,Fa)),a(this,Ut).removeEventListener("keydown",a(this,Ia)))},Op=function(){a(this,Pn)||this.render(),this.isVisible?a(this,es)&&a(this,Ut).classList.add("focused"):(b(this,at,ME).call(this),a(this,Ut).hidden=!1,a(this,Ut).style.zIndex=parseInt(a(this,Ut).style.zIndex)+1e3)},$v=function(){a(this,Ut).classList.remove("focused"),!(a(this,es)||!this.isVisible)&&(a(this,Ut).hidden=!0,a(this,Ut).style.zIndex=parseInt(a(this,Ut).style.zIndex)-1e3)};class DE extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Z.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Kd;class kM extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Kd,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=p(this,Kd,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Kd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Kd=new WeakMap;var Xd;class PM extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Xd,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,l=p(this,Xd,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",n-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xd=new WeakMap;var Yd;class RM extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Yd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:n,height:s}=this,r=this.svgFactory.create(n,s,!0),o=e.borderStyle.width,l=p(this,Yd,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",n/2),l.setAttribute("cy",s/2),l.setAttribute("rx",n/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Yd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yd=new WeakMap;var Qd;class NE extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Qd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:n,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!n)return this.container;const c=this.svgFactory.create(o,l,!0);let h=[];for(let d=0,f=n.length;d<f;d+=2){const g=n[d]-e[0],v=e[3]-n[d+1];h.push(`${g},${v}`)}h=h.join(" ");const u=p(this,Qd,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",s.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Qd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qd=new WeakMap;class _M extends NE{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class MM extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Jd,za,Zd,t0;class Fw extends Kt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});S(this,Zd);S(this,Jd,null);S(this,za,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Z.HIGHLIGHT:Z.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:n,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:h}=b(this,Zd,t0).call(this,n,e),u=this.svgFactory.create(c,h,!0),d=p(this,Jd,this.svgFactory.createElement("svg:g"));u.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,g=s.length;f<g;f++){const v=this.svgFactory.createElement(this.svgElementName);a(this,za).push(v),v.setAttribute("points",s[f].join(",")),d.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:n,points:s,rect:r}=e,o=a(this,Jd);if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let l=0,c=a(this,za).length;l<c;l++)a(this,za)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:h}=b(this,Zd,t0).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,za)}addHighlightArea(){this.container.classList.add("highlightArea")}get commentButtonPosition(){const{inkLists:e,rect:n}=this.data;if((e==null?void 0:e.length)>=1){let s=-1/0,r=-1/0;for(const o of e)for(let l=0,c=o.length;l<c;l+=2)o[l+1]>r?(r=o[l+1],s=o[l]):o[l+1]===r&&(s=Math.max(s,o[l]));if(s!==1/0)return[s,r]}return n?[n[2],n[3]]:null}}Jd=new WeakMap,za=new WeakMap,Zd=new WeakSet,t0=function(e,n){switch(e){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class LE extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Z.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class DM extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class NM extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class LM extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=t,this.container.append(n)}return this.container}}class IE extends Kt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Z.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $d,tf,e0;class IM extends Kt{constructor(e){var s;super(e,{isRenderable:!0});S(this,tf);S(this,$d,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",b(this,tf,e0).bind(this)),p(this,$d,s);const{isMac:r}=Ne.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&b(this,tf,e0).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return a(this,$d)}addHighlightArea(){this.container.classList.add("highlightArea")}}$d=new WeakMap,tf=new WeakSet,e0=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var ef,Ba,lo,nf,Bo,i0,s0;const jw=class jw{constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l}){S(this,Bo);S(this,ef,null);S(this,Ba,null);S(this,lo,new Map);S(this,nf,null);this.div=t,p(this,ef,e),p(this,Ba,n),p(this,nf,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return a(this,lo).size>0}async render(t){var o;const{annotations:e}=t,n=this.div;pl(n,this.viewport);const s=new Map,r={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Rg,annotationStorage:t.annotationStorage||new Dw,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Yt.POPUP;if(c){const d=s.get(l.id);if(!d)continue;r.elements=d}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const h=IS.create(r);if(!h.isRenderable)continue;if(!c&&l.popupRef){const d=s.get(l.popupRef);d?d.push(h):s.set(l.popupRef,[h])}const u=h.render();l.hidden&&(u.style.visibility="hidden"),await b(this,Bo,i0).call(this,u,l.id,r.elements),h._isEditable&&(a(this,lo).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}b(this,Bo,s0).call(this)}async addLinkAnnotations(t,e){const n={data:null,layer:this.div,linkService:e,svgFactory:new Rg,parent:this};for(const s of t){s.borderStyle||(s.borderStyle=jw._defaultBorderStyle),n.data=s;const r=IS.create(n);if(!r.isRenderable)continue;const o=r.render();await b(this,Bo,i0).call(this,o,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,pl(e,{rotation:t.rotation}),b(this,Bo,s0).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,lo).values())}getEditableAnnotation(t){return a(this,lo).get(t)}static get _defaultBorderStyle(){return rt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Tl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};ef=new WeakMap,Ba=new WeakMap,lo=new WeakMap,nf=new WeakMap,Bo=new WeakSet,i0=async function(t,e,n){var l,c;const s=t.firstChild||t,r=s.id=`${Rw}${e}`,o=await((l=a(this,nf))==null?void 0:l.getAriaAttributes(r));if(o)for(const[h,u]of o)s.setAttribute(h,u);n?n.at(-1).container.after(t):(this.div.append(t),(c=a(this,ef))==null||c.moveElementInDOM(this.div,t,s,!1))},s0=function(){var e;if(!a(this,Ba))return;const t=this.div;for(const[n,s]of a(this,Ba)){const r=t.querySelector(`[data-annotation-id="${n}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,lo).get(n);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(n,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,Ba).clear()};let n0=jw;const ap=/\r\n?|\n/g;var ni,Rn,sf,Va,_n,te,FE,OE,zE,zp,fr,Bp,Vp,BE,o0,VE;const Pt=class Pt extends Tt{constructor(e){super({...e,name:"freeTextEditor"});S(this,te);S(this,ni);S(this,Rn,"");S(this,sf,`${this.id}-editor`);S(this,Va,null);S(this,_n);M(this,"_colorPicker",null);p(this,ni,e.color||Pt._defaultColor||Tt._defaultLineColor),p(this,_n,e.fontSize||Pt._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=Pt.prototype,n=o=>o.isEmpty(),s=gl.TRANSLATE_SMALL,r=gl.TRANSLATE_BIG;return rt(this,"_keyboardManager",new _f([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:n}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:n}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:n}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:n}]]))}static initialize(e,n){Tt.initialize(e,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,n){switch(e){case lt.FREETEXT_SIZE:Pt._defaultFontSize=n;break;case lt.FREETEXT_COLOR:Pt._defaultColor=n;break}}updateParams(e,n){switch(e){case lt.FREETEXT_SIZE:b(this,te,FE).call(this,n);break;case lt.FREETEXT_COLOR:b(this,te,OE).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[lt.FREETEXT_SIZE,Pt._defaultFontSize],[lt.FREETEXT_COLOR,Pt._defaultColor||Tt._defaultLineColor]]}get propertiesToUpdate(){return[[lt.FREETEXT_SIZE,a(this,_n)],[lt.FREETEXT_COLOR,a(this,ni)]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Pg(this)),[["colorPicker",this._colorPicker]]}get colorType(){return lt.FREETEXT_COLOR}get colorValue(){return a(this,ni)}_translateEmpty(e,n){this._uiManager.translateSelectedEditors(e,n,!0)}getInitialTranslation(){const e=this.parentScale;return[-Pt._internalPadding*e,-(Pt._internalPadding+a(this,_n))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),p(this,Va,new AbortController);const e=this._uiManager.combinedSignal(a(this,Va));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,sf)),this._isDraggable=!0,(e=a(this,Va))==null||e.abort(),p(this,Va,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var n;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,Rn),n=p(this,Rn,b(this,te,zE).call(this).trimEnd());if(e===n)return;const s=r=>{if(p(this,Rn,r),!r){this.remove();return}b(this,te,Vp).call(this),this._uiManager.rebuild(this),b(this,te,zp).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(e)},mustExec:!1}),b(this,te,zp).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Pt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,n;(this._isCopy||this.annotationElementId)&&(e=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,sf)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,_n)}px * var(--total-scale-factor))`,s.color=a(this,ni),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,d]=this.pageDimensions,[f,g]=this.pageTranslation;let v,A;switch(this.rotation){case 0:v=e+(l[0]-f)/u,A=n+this.height-(l[1]-g)/d;break;case 90:v=e+(l[0]-f)/u,A=n-(l[1]-g)/d,[c,h]=[h,-c];break;case 180:v=e-this.width+(l[0]-f)/u,A=n-(l[1]-g)/d,[c,h]=[-c,-h];break;case 270:v=e+(l[0]-f-this.height*d)/u,A=n+(l[1]-g-this.width*u)/d,[c,h]=[-h,c];break}this.setAt(v*r,A*o,c,h)}else this._moveAfterPaste(e,n);b(this,te,Vp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,A,E;const n=e.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const r=b(v=Pt,fr,o0).call(v,n.getData("text")||"").replaceAll(ap,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=l,u=[],d=[];if(c.nodeType===Node.TEXT_NODE){const m=c.parentElement;if(d.push(c.nodeValue.slice(h).replaceAll(ap,"")),m!==this.editorDiv){let y=u;for(const w of this.editorDiv.childNodes){if(w===m){y=d;continue}y.push(b(A=Pt,fr,Bp).call(A,w))}}u.push(c.nodeValue.slice(0,h).replaceAll(ap,""))}else if(c===this.editorDiv){let m=u,y=0;for(const w of this.editorDiv.childNodes)y++===h&&(m=d),m.push(b(E=Pt,fr,Bp).call(E,w))}p(this,Rn,`${u.join(`
`)}${r}${d.join(`
`)}`),b(this,te,Vp).call(this);const f=new Range;let g=Math.sumPrecise(u.map(m=>m.length));for(const{firstChild:m}of this.editorDiv.childNodes)if(m.nodeType===Node.TEXT_NODE){const y=m.nodeValue.length;if(g<=y){f.setStart(m,g),f.setEnd(m,g);break}g-=y}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Pt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,n,s){var l;let r=null;if(e instanceof DE){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:d,id:f,popupRef:g,contentsObj:v},textContent:A,textPosition:E,parent:{page:{pageNumber:m}}}=e;if(!A||A.length===0)return null;r=e={annotationType:Z.FREETEXT,color:Array.from(h),fontSize:c,value:A.join(`
`),position:E,pageIndex:m-1,rect:u.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:(v==null?void 0:v.str)||null}}const o=await super.deserialize(e,n,s);return p(o,_n,e.fontSize),p(o,ni,W.makeHexColor(...e.color)),p(o,Rn,b(l=Pt,fr,o0).call(l,e.value)),o._initialData=r,e.comment&&o.setCommentData(e.comment),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),s=Tt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,ni)),r={annotationType:Z.FREETEXT,color:s,fontSize:a(this,_n),value:b(this,te,BE).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(r),e?(r.isCopy=!0,r):this.annotationElementId&&!b(this,te,VE).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const n=super.renderAnnotationElement(e);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${a(this,_n)}px * var(--total-scale-factor))`,s.color=a(this,ni),n.replaceChildren();for(const o of a(this,Rn).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),n.append(l)}const r={rect:this.getPDFRect()};return r.popup=this.hasEditedComment?this.comment:{text:a(this,Rn)},e.updateEdited(r),n}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};ni=new WeakMap,Rn=new WeakMap,sf=new WeakMap,Va=new WeakMap,_n=new WeakMap,te=new WeakSet,FE=function(e){const n=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,_n))*this.parentScale),p(this,_n,r),b(this,te,zp).call(this)},s=a(this,_n);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},OE=function(e){const n=r=>{var o;p(this,ni,this.editorDiv.style.color=r),(o=this._colorPicker)==null||o.update(r)},s=a(this,ni);this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},zE=function(){var s;const e=[];this.editorDiv.normalize();let n=null;for(const r of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(b(s=Pt,fr,Bp).call(s,r)),n=r);return e.join(`
`)},zp=function(){const[e,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/n):(this.width=s.height/e,this.height=s.width/n),this.fixAndSetPosition()},fr=new WeakSet,Bp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ap,"")},Vp=function(){if(this.editorDiv.replaceChildren(),!!a(this,Rn))for(const e of a(this,Rn).split(`
`)){const n=document.createElement("div");n.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(n)}},BE=function(){return a(this,Rn).replaceAll(""," ")},o0=function(e){return e.replaceAll(" ","")},VE=function(e){const{value:n,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==n||e.fontSize!==s||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},S(Pt,fr),M(Pt,"_freeTextDefaultContent",""),M(Pt,"_internalPadding",0),M(Pt,"_defaultColor",null),M(Pt,"_defaultFontSize",10),M(Pt,"_type","freetext"),M(Pt,"_editorType",Z.FREETEXT);let r0=Pt;class q{toSVGPath(){xt("Abstract method `toSVGPath` must be implemented.")}get box(){xt("Abstract getter `box` must be implemented.")}serialize(t,e){xt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,n,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*s,o[l+1]=n+t[l+1]*r;return o}static _rescaleAndSwap(t,e,n,s,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*s,o[l+1]=n+t[l]*r;return o}static _translate(t,e,n,s){s||(s=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)s[r]=e+t[r],s[r+1]=n+t[r+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,n,s,r){switch(r){case 90:return[1-e/n,t/s];case 180:return[1-t/n,1-e/s];case 270:return[e/n,1-t/s];default:return[t/n,e/s]}}static _normalizePagePoint(t,e,n){switch(n){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,n,s,r,o){return[(t+5*n)/6,(e+5*s)/6,(5*n+r)/6,(5*s+o)/6,(n+r)/2,(s+o)/2]}}M(q,"PRECISION",1e-4);var Mn,Ei,$c,th,ns,st,Ua,qa,rf,of,eh,nh,co,af,Kg,Xg,ue,au,UE,qE,HE,jE,WE,GE;const bs=class bs{constructor({x:t,y:e},n,s,r,o,l=0){S(this,ue);S(this,Mn);S(this,Ei,[]);S(this,$c);S(this,th);S(this,ns,[]);S(this,st,new Float32Array(18));S(this,Ua);S(this,qa);S(this,rf);S(this,of);S(this,eh);S(this,nh);S(this,co,[]);p(this,Mn,n),p(this,nh,r*s),p(this,th,o),a(this,st).set([NaN,NaN,NaN,NaN,t,e],6),p(this,$c,l),p(this,of,a(bs,af)*s),p(this,rf,a(bs,Xg)*s),p(this,eh,s),a(this,co).push(t,e)}isEmpty(){return isNaN(a(this,st)[8])}add({x:t,y:e}){var _;p(this,Ua,t),p(this,qa,e);const[n,s,r,o]=a(this,Mn);let[l,c,h,u]=a(this,st).subarray(8,12);const d=t-h,f=e-u,g=Math.hypot(d,f);if(g<a(this,rf))return!1;const v=g-a(this,of),A=v/g,E=A*d,m=A*f;let y=l,w=c;l=h,c=u,h+=E,u+=m,(_=a(this,co))==null||_.push(t,e);const x=-m/v,C=E/v,T=x*a(this,nh),k=C*a(this,nh);return a(this,st).set(a(this,st).subarray(2,8),0),a(this,st).set([h+T,u+k],4),a(this,st).set(a(this,st).subarray(14,18),12),a(this,st).set([h-T,u-k],16),isNaN(a(this,st)[6])?(a(this,ns).length===0&&(a(this,st).set([l+T,c+k],2),a(this,ns).push(NaN,NaN,NaN,NaN,(l+T-n)/r,(c+k-s)/o),a(this,st).set([l-T,c-k],14),a(this,Ei).push(NaN,NaN,NaN,NaN,(l-T-n)/r,(c-k-s)/o)),a(this,st).set([y,w,l,c,h,u],6),!this.isEmpty()):(a(this,st).set([y,w,l,c,h,u],6),Math.abs(Math.atan2(w-c,y-l)-Math.atan2(m,E))<Math.PI/2?([l,c,h,u]=a(this,st).subarray(2,6),a(this,ns).push(NaN,NaN,NaN,NaN,((l+h)/2-n)/r,((c+u)/2-s)/o),[l,c,y,w]=a(this,st).subarray(14,18),a(this,Ei).push(NaN,NaN,NaN,NaN,((y+l)/2-n)/r,((w+c)/2-s)/o),!0):([y,w,l,c,h,u]=a(this,st).subarray(0,6),a(this,ns).push(((y+5*l)/6-n)/r,((w+5*c)/6-s)/o,((5*l+h)/6-n)/r,((5*c+u)/6-s)/o,((l+h)/2-n)/r,((c+u)/2-s)/o),[h,u,l,c,y,w]=a(this,st).subarray(12,18),a(this,Ei).push(((y+5*l)/6-n)/r,((w+5*c)/6-s)/o,((5*l+h)/6-n)/r,((5*c+u)/6-s)/o,((l+h)/2-n)/r,((c+u)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,ns),e=a(this,Ei);if(isNaN(a(this,st)[6])&&!this.isEmpty())return b(this,ue,UE).call(this);const n=[];n.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);b(this,ue,HE).call(this,n);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return b(this,ue,qE).call(this,n),n.join(" ")}newFreeDrawOutline(t,e,n,s,r,o){return new KE(t,e,n,s,r,o)}getOutlines(){var d;const t=a(this,ns),e=a(this,Ei),n=a(this,st),[s,r,o,l]=a(this,Mn),c=new Float32Array((((d=a(this,co))==null?void 0:d.length)??0)+2);for(let f=0,g=c.length-2;f<g;f+=2)c[f]=(a(this,co)[f]-s)/o,c[f+1]=(a(this,co)[f+1]-r)/l;if(c[c.length-2]=(a(this,Ua)-s)/o,c[c.length-1]=(a(this,qa)-r)/l,isNaN(n[6])&&!this.isEmpty())return b(this,ue,jE).call(this,c);const h=new Float32Array(a(this,ns).length+24+a(this,Ei).length);let u=t.length;for(let f=0;f<u;f+=2){if(isNaN(t[f])){h[f]=h[f+1]=NaN;continue}h[f]=t[f],h[f+1]=t[f+1]}u=b(this,ue,GE).call(this,h,u);for(let f=e.length-6;f>=6;f-=6)for(let g=0;g<6;g+=2){if(isNaN(e[f+g])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[f+g],h[u+1]=e[f+g+1],u+=2}return b(this,ue,WE).call(this,h,u),this.newFreeDrawOutline(h,c,a(this,Mn),a(this,eh),a(this,$c),a(this,th))}};Mn=new WeakMap,Ei=new WeakMap,$c=new WeakMap,th=new WeakMap,ns=new WeakMap,st=new WeakMap,Ua=new WeakMap,qa=new WeakMap,rf=new WeakMap,of=new WeakMap,eh=new WeakMap,nh=new WeakMap,co=new WeakMap,af=new WeakMap,Kg=new WeakMap,Xg=new WeakMap,ue=new WeakSet,au=function(){const t=a(this,st).subarray(4,6),e=a(this,st).subarray(16,18),[n,s,r,o]=a(this,Mn);return[(a(this,Ua)+(t[0]-e[0])/2-n)/r,(a(this,qa)+(t[1]-e[1])/2-s)/o,(a(this,Ua)+(e[0]-t[0])/2-n)/r,(a(this,qa)+(e[1]-t[1])/2-s)/o]},UE=function(){const[t,e,n,s]=a(this,Mn),[r,o,l,c]=b(this,ue,au).call(this);return`M${(a(this,st)[2]-t)/n} ${(a(this,st)[3]-e)/s} L${(a(this,st)[4]-t)/n} ${(a(this,st)[5]-e)/s} L${r} ${o} L${l} ${c} L${(a(this,st)[16]-t)/n} ${(a(this,st)[17]-e)/s} L${(a(this,st)[14]-t)/n} ${(a(this,st)[15]-e)/s} Z`},qE=function(t){const e=a(this,Ei);t.push(`L${e[4]} ${e[5]} Z`)},HE=function(t){const[e,n,s,r]=a(this,Mn),o=a(this,st).subarray(4,6),l=a(this,st).subarray(16,18),[c,h,u,d]=b(this,ue,au).call(this);t.push(`L${(o[0]-e)/s} ${(o[1]-n)/r} L${c} ${h} L${u} ${d} L${(l[0]-e)/s} ${(l[1]-n)/r}`)},jE=function(t){const e=a(this,st),[n,s,r,o]=a(this,Mn),[l,c,h,u]=b(this,ue,au).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(e[2]-n)/r,(e[3]-s)/o,NaN,NaN,NaN,NaN,(e[4]-n)/r,(e[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-n)/r,(e[17]-s)/o,NaN,NaN,NaN,NaN,(e[14]-n)/r,(e[15]-s)/o],0),this.newFreeDrawOutline(d,t,a(this,Mn),a(this,eh),a(this,$c),a(this,th))},WE=function(t,e){const n=a(this,Ei);return t.set([NaN,NaN,NaN,NaN,n[4],n[5]],e),e+=6},GE=function(t,e){const n=a(this,st).subarray(4,6),s=a(this,st).subarray(16,18),[r,o,l,c]=a(this,Mn),[h,u,d,f]=b(this,ue,au).call(this);return t.set([NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],e),e+=24},S(bs,af,8),S(bs,Kg,2),S(bs,Xg,a(bs,af)+a(bs,Kg));let _g=bs;var ih,Ha,tr,lf,Dn,cf,Wt,Yg,XE;class KE extends q{constructor(e,n,s,r,o,l){super();S(this,Yg);S(this,ih);S(this,Ha,new Float32Array(4));S(this,tr);S(this,lf);S(this,Dn);S(this,cf);S(this,Wt);p(this,Wt,e),p(this,Dn,n),p(this,ih,s),p(this,cf,r),p(this,tr,o),p(this,lf,l),this.lastPoint=[NaN,NaN],b(this,Yg,XE).call(this,l);const[c,h,u,d]=a(this,Ha);for(let f=0,g=e.length;f<g;f+=2)e[f]=(e[f]-c)/u,e[f+1]=(e[f+1]-h)/d;for(let f=0,g=n.length;f<g;f+=2)n[f]=(n[f]-c)/u,n[f+1]=(n[f+1]-h)/d}toSVGPath(){const e=[`M${a(this,Wt)[4]} ${a(this,Wt)[5]}`];for(let n=6,s=a(this,Wt).length;n<s;n+=6){if(isNaN(a(this,Wt)[n])){e.push(`L${a(this,Wt)[n+4]} ${a(this,Wt)[n+5]}`);continue}e.push(`C${a(this,Wt)[n]} ${a(this,Wt)[n+1]} ${a(this,Wt)[n+2]} ${a(this,Wt)[n+3]} ${a(this,Wt)[n+4]} ${a(this,Wt)[n+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,n,s,r],o){const l=s-e,c=r-n;let h,u;switch(o){case 0:h=q._rescale(a(this,Wt),e,r,l,-c),u=q._rescale(a(this,Dn),e,r,l,-c);break;case 90:h=q._rescaleAndSwap(a(this,Wt),e,n,l,c),u=q._rescaleAndSwap(a(this,Dn),e,n,l,c);break;case 180:h=q._rescale(a(this,Wt),s,n,-l,c),u=q._rescale(a(this,Dn),s,n,-l,c);break;case 270:h=q._rescaleAndSwap(a(this,Wt),s,r,-l,-c),u=q._rescaleAndSwap(a(this,Dn),s,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return a(this,Ha)}newOutliner(e,n,s,r,o,l=0){return new _g(e,n,s,r,o,l)}getNewOutline(e,n){const[s,r,o,l]=a(this,Ha),[c,h,u,d]=a(this,ih),f=o*u,g=l*d,v=s*u+c,A=r*d+h,E=this.newOutliner({x:a(this,Dn)[0]*f+v,y:a(this,Dn)[1]*g+A},a(this,ih),a(this,cf),e,a(this,lf),n??a(this,tr));for(let m=2;m<a(this,Dn).length;m+=2)E.add({x:a(this,Dn)[m]*f+v,y:a(this,Dn)[m+1]*g+A});return E.getOutlines()}}ih=new WeakMap,Ha=new WeakMap,tr=new WeakMap,lf=new WeakMap,Dn=new WeakMap,cf=new WeakMap,Wt=new WeakMap,Yg=new WeakSet,XE=function(e){const n=a(this,Wt);let s=n[4],r=n[5];const o=[s,r,s,r];let l=s,c=r;const h=e?Math.max:Math.min;for(let d=6,f=n.length;d<f;d+=6){const g=n[d+4],v=n[d+5];if(isNaN(n[d]))W.pointBoundingBox(g,v,o),c<v?(l=g,c=v):c===v&&(l=h(l,g));else{const A=[1/0,1/0,-1/0,-1/0];W.bezierBoundingBox(s,r,...n.slice(d,d+6),A),W.rectBoundingBox(...A,o),c<A[3]?(l=A[2],c=A[3]):c===A[3]&&(l=h(l,A[2]))}s=g,r=v}const u=a(this,Ha);u[0]=o[0]-a(this,tr),u[1]=o[1]-a(this,tr),u[2]=o[2]-o[0]+2*a(this,tr),u[3]=o[3]-o[1]+2*a(this,tr),this.lastPoint=[l,c]};var hf,uf,ho,Ci,sn,YE,Up,QE,JE,l0;class a0{constructor(t,e=0,n=0,s=!0){S(this,sn);S(this,hf);S(this,uf);S(this,ho,[]);S(this,Ci,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x:v,y:A,width:E,height:m}of t){const y=Math.floor((v-e)/l)*l,w=Math.ceil((v+E+e)/l)*l,x=Math.floor((A-e)/l)*l,C=Math.ceil((A+m+e)/l)*l,T=[y,x,C,!0],k=[w,x,C,!1];a(this,ho).push(T,k),W.rectBoundingBox(y,x,w,C,r)}const c=r[2]-r[0]+2*n,h=r[3]-r[1]+2*n,u=r[0]-n,d=r[1]-n,f=a(this,ho).at(s?-1:-2),g=[f[0],f[2]];for(const v of a(this,ho)){const[A,E,m]=v;v[0]=(A-u)/c,v[1]=(E-d)/h,v[2]=(m-d)/h}p(this,hf,new Float32Array([u,d,c,h])),p(this,uf,g)}getOutlines(){a(this,ho).sort((e,n)=>e[0]-n[0]||e[1]-n[1]||e[2]-n[2]);const t=[];for(const e of a(this,ho))e[3]?(t.push(...b(this,sn,l0).call(this,e)),b(this,sn,QE).call(this,e)):(b(this,sn,JE).call(this,e),t.push(...b(this,sn,l0).call(this,e)));return b(this,sn,YE).call(this,t)}}hf=new WeakMap,uf=new WeakMap,ho=new WeakMap,Ci=new WeakMap,sn=new WeakSet,YE=function(t){const e=[],n=new Set;for(const o of t){const[l,c,h]=o;e.push([l,c,o],[l,h,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),n.add(c),n.add(h)}const s=[];let r;for(;n.size>0;){const o=n.values().next().value;let[l,c,h,u,d]=o;n.delete(o);let f=l,g=c;for(r=[l,h],s.push(r);;){let v;if(n.has(u))v=u;else if(n.has(d))v=d;else break;n.delete(v),[l,c,h,u,d]=v,f!==l&&(r.push(f,g,l,g===c?c:h),f=l),g=g===c?h:c}r.push(f,g)}return new FM(s,a(this,hf),a(this,uf))},Up=function(t){const e=a(this,Ci);let n=0,s=e.length-1;for(;n<=s;){const r=n+s>>1,o=e[r][0];if(o===t)return r;o<t?n=r+1:s=r-1}return s+1},QE=function([,t,e]){const n=b(this,sn,Up).call(this,t);a(this,Ci).splice(n,0,[t,e])},JE=function([,t,e]){const n=b(this,sn,Up).call(this,t);for(let s=n;s<a(this,Ci).length;s++){const[r,o]=a(this,Ci)[s];if(r!==t)break;if(r===t&&o===e){a(this,Ci).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[r,o]=a(this,Ci)[s];if(r!==t)break;if(r===t&&o===e){a(this,Ci).splice(s,1);return}}},l0=function(t){const[e,n,s]=t,r=[[e,n,s]],o=b(this,sn,Up).call(this,s);for(let l=0;l<o;l++){const[c,h]=a(this,Ci)[l];for(let u=0,d=r.length;u<d;u++){const[,f,g]=r[u];if(!(h<=f||g<=c)){if(f>=c){if(g>h)r[u][1]=h;else{if(d===1)return[];r.splice(u,1),u--,d--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};var df,sh;class FM extends q{constructor(e,n,s){super();S(this,df);S(this,sh);p(this,sh,e),p(this,df,n),this.lastPoint=s}toSVGPath(){const e=[];for(const n of a(this,sh)){let[s,r]=n;e.push(`M${s} ${r}`);for(let o=2;o<n.length;o+=2){const l=n[o],c=n[o+1];l===s?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),s=l)}e.push("Z")}return e.join(" ")}serialize([e,n,s,r],o){const l=[],c=s-e,h=r-n;for(const u of a(this,sh)){const d=new Array(u.length);for(let f=0;f<u.length;f+=2)d[f]=e+u[f]*c,d[f+1]=r-u[f+1]*h;l.push(d)}return l}get box(){return a(this,df)}get classNamesForOutlining(){return["highlightOutline"]}}df=new WeakMap,sh=new WeakMap;class c0 extends _g{newFreeDrawOutline(t,e,n,s,r,o){return new OM(t,e,n,s,r,o)}}class OM extends KE{newOutliner(t,e,n,s,r,o=0){return new c0(t,e,n,s,r,o)}}var rh,ff,er,ja,pf,dn,gf,mf,Wa,ii,Nn,Te,oh,nr,Ue,ah,si,yf,et,h0,qp,ZE,$E,tC,u0,Yo,li,Dl,eC,Hp,lu,nC,iC,sC,rC,oC;const pt=class pt extends Tt{constructor(e){super({...e,name:"highlightEditor"});S(this,et);S(this,rh,null);S(this,ff,0);S(this,er);S(this,ja,null);S(this,pf,null);S(this,dn,null);S(this,gf,null);S(this,mf,0);S(this,Wa,null);S(this,ii,null);S(this,Nn,null);S(this,Te,!1);S(this,oh,null);S(this,nr);S(this,Ue,null);S(this,ah,"");S(this,si);S(this,yf,"");this.color=e.color||pt._defaultColor,p(this,si,e.thickness||pt._defaultThickness),p(this,nr,e.opacity||pt._defaultOpacity),p(this,er,e.boxes||null),p(this,yf,e.methodOfCreation||""),p(this,ah,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(p(this,Te,!0),b(this,et,qp).call(this,e),b(this,et,Yo).call(this)):a(this,er)&&(p(this,rh,e.anchorNode),p(this,ff,e.anchorOffset),p(this,gf,e.focusNode),p(this,mf,e.focusOffset),b(this,et,h0).call(this),b(this,et,Yo).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=pt.prototype;return rt(this,"_keyboardManager",new _f([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Te)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,si),methodOfCreation:a(this,yf)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}get commentColor(){return this.color}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,n){var s;Tt.initialize(e,n),pt._defaultColor||(pt._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,n){switch(e){case lt.HIGHLIGHT_COLOR:pt._defaultColor=n;break;case lt.HIGHLIGHT_THICKNESS:pt._defaultThickness=n;break}}translateInPage(e,n){}get toolbarPosition(){return a(this,oh)}updateParams(e,n){switch(e){case lt.HIGHLIGHT_COLOR:b(this,et,ZE).call(this,n);break;case lt.HIGHLIGHT_THICKNESS:b(this,et,$E).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[lt.HIGHLIGHT_COLOR,pt._defaultColor],[lt.HIGHLIGHT_THICKNESS,pt._defaultThickness]]}get propertiesToUpdate(){return[[lt.HIGHLIGHT_COLOR,this.color||pt._defaultColor],[lt.HIGHLIGHT_THICKNESS,a(this,si)||pt._defaultThickness],[lt.HIGHLIGHT_FREE,a(this,Te)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",p(this,pf,new kg({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,et,lu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,n){return super.getRect(e,n,b(this,et,lu).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){b(this,et,u0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,et,Yo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?b(this,et,u0).call(this):e&&(b(this,et,Yo).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),n&&this.select()}rotate(e){var r,o,l;const{drawLayer:n}=this.parent;let s;a(this,Te)?(e=(e-this.rotation+360)%360,s=b(r=pt,li,Dl).call(r,a(this,ii).box,e)):s=b(o=pt,li,Dl).call(o,[this.x,this.y,this.width,this.height],e),n.updateProperties(a(this,Nn),{bbox:s,root:{"data-main-rotation":e}}),n.updateProperties(a(this,Ue),{bbox:b(l=pt,li,Dl).call(l,a(this,dn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,ah)&&(e.setAttribute("aria-label",a(this,ah)),e.setAttribute("role","mark")),a(this,Te)?e.classList.add("free"):this.div.addEventListener("keydown",b(this,et,eC).bind(this),{signal:this._uiManager._signal});const n=p(this,Wa,document.createElement("div"));e.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=a(this,ja);const[s,r]=this.parentDimensions;return this.setDims(this.width*s,this.height*r),xx(this,a(this,Wa),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ue),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ue),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:b(this,et,Hp).call(this,!0);break;case 1:case 3:b(this,et,Hp).call(this,!1);break}}select(){var e;super.select(),a(this,Ue)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ue),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Ue)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ue),{rootClass:{selected:!1}}),a(this,Te)||b(this,et,Hp).call(this,!1))}get _mustFixPosition(){return!a(this,Te)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Nn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Ue),{rootClass:{hidden:!e}}))}static startHighlighting(e,n,{target:s,x:r,y:o}){const{x:l,y:c,width:h,height:u}=s.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),g=v=>{d.abort(),b(this,li,rC).call(this,e,v)};window.addEventListener("blur",g,{signal:f}),window.addEventListener("pointerup",g,{signal:f}),window.addEventListener("pointerdown",Jt,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",pi,{signal:f}),s.addEventListener("pointermove",b(this,li,sC).bind(this,e),{signal:f}),this._freeHighlight=new c0({x:r,y:o},[l,c,h,u],e.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,n,s){var A,E,m,y;let r=null;if(e instanceof LE){const{data:{quadPoints:w,rect:x,rotation:C,id:T,color:k,opacity:P,popupRef:_,contentsObj:R},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:Z.HIGHLIGHT,color:Array.from(k),opacity:P,quadPoints:w,boxes:null,pageIndex:D-1,rect:x.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:_,comment:(R==null?void 0:R.str)||null}}else if(e instanceof Fw){const{data:{inkLists:w,rect:x,rotation:C,id:T,color:k,borderStyle:{rawWidth:P},popupRef:_,contentsObj:R},parent:{page:{pageNumber:D}}}=e;r=e={annotationType:Z.HIGHLIGHT,color:Array.from(k),thickness:P,inkLists:w,boxes:null,pageIndex:D-1,rect:x.slice(0),rotation:C,annotationElementId:T,id:T,deleted:!1,popupRef:_,comment:(R==null?void 0:R.str)||null}}const{color:o,quadPoints:l,inkLists:c,opacity:h}=e,u=await super.deserialize(e,n,s);u.color=W.makeHexColor(...o),p(u,nr,h||1),c&&p(u,si,e.thickness),u._initialData=r,e.comment&&u.setCommentData(e.comment);const[d,f]=u.pageDimensions,[g,v]=u.pageTranslation;if(l){const w=p(u,er,[]);for(let x=0;x<l.length;x+=8)w.push({x:(l[x]-g)/d,y:1-(l[x+1]-v)/f,width:(l[x+2]-l[x])/d,height:(l[x+1]-l[x+5])/f});b(A=u,et,h0).call(A),b(E=u,et,Yo).call(E),u.rotate(u.rotation)}else if(c){p(u,Te,!0);const w=c[0],x={x:w[0]-g,y:f-(w[1]-v)},C=new c0(x,[0,0,d,f],1,a(u,si)/2,!0,.001);for(let P=0,_=w.length;P<_;P+=2)x.x=w[P]-g,x.y=f-(w[P+1]-v),C.add(x);const{id:T,clipPathId:k}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);b(m=u,et,qp).call(m,{highlightOutlines:C.getOutlines(),highlightId:T,clipPathId:k}),b(y=u,et,Yo).call(y),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const n=this.getPDFRect(),s=Tt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),r={annotationType:Z.HIGHLIGHT,color:s,opacity:a(this,nr),thickness:a(this,si),quadPoints:b(this,et,nC).call(this),outlines:b(this,et,iC).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:b(this,et,lu).call(this),structTreeParentId:this._structTreeParentId};return this.addComment(r),this.annotationElementId&&!b(this,et,oC).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),e.updateEdited(n),null}static canCreateNewEmptyEditor(){return!1}};rh=new WeakMap,ff=new WeakMap,er=new WeakMap,ja=new WeakMap,pf=new WeakMap,dn=new WeakMap,gf=new WeakMap,mf=new WeakMap,Wa=new WeakMap,ii=new WeakMap,Nn=new WeakMap,Te=new WeakMap,oh=new WeakMap,nr=new WeakMap,Ue=new WeakMap,ah=new WeakMap,si=new WeakMap,yf=new WeakMap,et=new WeakSet,h0=function(){const e=new a0(a(this,er),.001);p(this,ii,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,ii).box;const n=new a0(a(this,er),.0025,.001,this._uiManager.direction==="ltr");p(this,dn,n.getOutlines());const{lastPoint:s}=a(this,dn);p(this,oh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},qp=function({highlightOutlines:e,highlightId:n,clipPathId:s}){var d,f;if(p(this,ii,e),p(this,dn,e.getNewOutline(a(this,si)/2+1.5,.0025)),n>=0)p(this,Nn,n),p(this,ja,s),this.parent.drawLayer.finalizeDraw(n,{bbox:e.box,path:{d:e.toSVGPath()}}),p(this,Ue,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,dn).box,path:{d:a(this,dn).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Nn),{bbox:b(d=pt,li,Dl).call(d,a(this,ii).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Ue),{bbox:b(f=pt,li,Dl).call(f,a(this,dn).box,g),path:{d:a(this,dn).toSVGPath()}})}const[o,l,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=h;break;case 90:{const[g,v]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*v/g,this.height=h*g/v;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*v/g,this.height=h*g/v;break}}const{lastPoint:u}=a(this,dn);p(this,oh,[(u[0]-o)/c,(u[1]-l)/h])},ZE=function(e){const n=(o,l)=>{var c,h;this.color=o,p(this,nr,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,Nn),{root:{fill:o,"fill-opacity":l}}),(h=a(this,pf))==null||h.updateColor(o)},s=this.color,r=a(this,nr);this.addCommands({cmd:n.bind(this,e,pt._defaultOpacity),undo:n.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)},$E=function(e){const n=a(this,si),s=r=>{p(this,si,r),b(this,et,tC).call(this,r)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:lt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},tC=function(e){if(!a(this,Te))return;b(this,et,qp).call(this,{highlightOutlines:a(this,ii).getNewOutline(e/2)}),this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)},u0=function(){a(this,Nn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Nn)),p(this,Nn,null),this.parent.drawLayer.remove(a(this,Ue)),p(this,Ue,null))},Yo=function(e=this.parent){a(this,Nn)===null&&({id:ne(this,Nn)._,clipPathId:ne(this,ja)._}=e.drawLayer.draw({bbox:a(this,ii).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,nr)},rootClass:{highlight:!0,free:a(this,Te)},path:{d:a(this,ii).toSVGPath()}},!1,!0),p(this,Ue,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Te)},bbox:a(this,dn).box,path:{d:a(this,dn).toSVGPath()}},a(this,Te))),a(this,Wa)&&(a(this,Wa).style.clipPath=a(this,ja)))},li=new WeakSet,Dl=function([e,n,s,r],o){switch(o){case 90:return[1-n-r,e,r,s];case 180:return[1-e-s,1-n-r,s,r];case 270:return[n,1-e-s,r,s]}return[e,n,s,r]},eC=function(e){pt._keyboardManager.exec(this,e)},Hp=function(e){if(!a(this,rh))return;const n=window.getSelection();e?n.setPosition(a(this,rh),a(this,ff)):n.setPosition(a(this,gf),a(this,mf))},lu=function(){return a(this,Te)?this.rotation:0},nC=function(){if(a(this,Te))return null;const[e,n]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,er),l=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:d,height:f}of o){const g=h*e+s,v=(1-u)*n+r;l[c]=l[c+4]=g,l[c+1]=l[c+3]=v,l[c+2]=l[c+6]=g+d*e,l[c+5]=l[c+7]=v-f*n,c+=8}return l},iC=function(e){return a(this,ii).serialize(e,b(this,et,lu).call(this))},sC=function(e,n){this._freeHighlight.add(n)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},rC=function(e,n){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},oC=function(e){const{color:n}=this._initialData;return this.hasEditedComment||e.color.some((s,r)=>s!==n[r])},S(pt,li),M(pt,"_defaultColor",null),M(pt,"_defaultOpacity",1),M(pt,"_defaultThickness",12),M(pt,"_type","highlight"),M(pt,"_editorType",Z.HIGHLIGHT),M(pt,"_freeHighlightId",-1),M(pt,"_freeHighlight",null),M(pt,"_freeHighlightClipId","");let Mg=pt;var Ga;class aC{constructor(){S(this,Ga,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,n]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,n)}updateSVGProperty(t,e){a(this,Ga)[t]=e}toSVGProperties(){const t=a(this,Ga);return p(this,Ga,Object.create(null)),{root:t}}reset(){p(this,Ga,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){xt("Not implemented")}}Ga=new WeakMap;var Ln,lh,fe,Ka,Xa,uo,fo,po,Ya,dt,d0,f0,p0,cu,lC,jp,hu,Nl;const j=class j extends Tt{constructor(e){super(e);S(this,dt);S(this,Ln,null);S(this,lh);M(this,"_colorPicker",null);M(this,"_drawId",null);p(this,lh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(b(this,dt,d0).call(this,e),b(this,dt,cu).call(this))}static _mergeSVGProperties(e,n){const s=new Set(Object.keys(e));for(const[r,o]of Object.entries(n))s.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){xt("Not implemented")}static get typesMap(){xt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,n){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(a(j,fe).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,n){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,n)}static get defaultPropertiesToUpdate(){const e=[],n=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)e.push([s,n[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:n}=this;for(const[s,r]of this.constructor.typesMap)e.push([s,n[r]]);return e}_updateProperty(e,n,s){const r=this._drawingOptions,o=r[n],l=c=>{var u,d;r.updateProperty(n,c);const h=a(this,Ln).updateProperty(n,c);h&&b(this,dt,hu).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&((d=this._colorPicker)==null||d.update(c))};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,j._mergeSVGProperties(a(this,Ln).getPathResizingSVGProperties(b(this,dt,jp).call(this)),{bbox:b(this,dt,Nl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,j._mergeSVGProperties(a(this,Ln).getPathResizedSVGProperties(b(this,dt,jp).call(this)),{bbox:b(this,dt,Nl).call(this)}))}_onTranslating(e,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:b(this,dt,Nl).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,j._mergeSVGProperties(a(this,Ln).getPathTranslatedSVGProperties(b(this,dt,jp).call(this),this.parentDimensions),{bbox:b(this,dt,Nl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,lh)&&(p(this,lh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){b(this,dt,p0).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,dt,cu).call(this),b(this,dt,hu).call(this,a(this,Ln).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let n=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),b(this,dt,p0).call(this)):e&&(this._uiManager.addShouldRescale(this),b(this,dt,cu).call(this,e),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,j._mergeSVGProperties({bbox:b(this,dt,Nl).call(this)},a(this,Ln).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&b(this,dt,hu).call(this,a(this,Ln).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,n;this._isCopy&&(e=this.x,n=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,n),s}static createDrawerInstance(e,n,s,r,o){xt("Not implemented")}static startDrawing(e,n,s,r){var E;const{target:o,offsetX:l,offsetY:c,pointerId:h,pointerType:u}=r;if(a(j,fo)&&a(j,fo)!==u)return;const{viewport:{rotation:d}}=e,{width:f,height:g}=o.getBoundingClientRect(),v=p(j,Ka,new AbortController),A=e.combinedSignal(v);if(a(j,uo)||p(j,uo,h),a(j,fo)??p(j,fo,u),window.addEventListener("pointerup",m=>{var y;a(j,uo)===m.pointerId?this._endDraw(m):(y=a(j,po))==null||y.delete(m.pointerId)},{signal:A}),window.addEventListener("pointercancel",m=>{var y;a(j,uo)===m.pointerId?this._currentParent.endDrawingSession():(y=a(j,po))==null||y.delete(m.pointerId)},{signal:A}),window.addEventListener("pointerdown",m=>{a(j,fo)===m.pointerType&&((a(j,po)||p(j,po,new Set)).add(m.pointerId),a(j,fe).isCancellable()&&(a(j,fe).removeLastElement(),a(j,fe).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",pi,{signal:A}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),o.addEventListener("touchmove",m=>{m.timeStamp===a(j,Ya)&&Jt(m)},{signal:A}),e.toggleDrawing(),(E=n._editorUndoBar)==null||E.hide(),a(j,fe)){e.drawLayer.updateProperties(this._currentDrawId,a(j,fe).startNew(l,c,f,g,d));return}n.updateUIForDefaultProperties(this),p(j,fe,this.createDrawerInstance(l,c,f,g,d)),p(j,Xa,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(j,Xa).toSVGProperties(),a(j,fe).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(p(j,Ya,-1),!a(j,fe))return;const{offsetX:n,offsetY:s,pointerId:r}=e;if(a(j,uo)===r){if(((o=a(j,po))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(j,fe).add(n,s)),p(j,Ya,e.timeStamp),Jt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,p(j,fe,null),p(j,Xa,null),p(j,fo,null),p(j,Ya,NaN)),a(j,Ka)&&(a(j,Ka).abort(),p(j,Ka,null),p(j,uo,NaN),p(j,po,null))}static _endDraw(e){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,a(j,fe).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=a(j,fe),r=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:lt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(lt.DRAW_STEP),!a(j,fe).isEmpty()){const{pageDimensions:[s,r],scale:o}=n,l=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(j,fe).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(j,Xa),mustBeCommitted:!e});return this._cleanup(!0),l}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,n,s,r,o,l){xt("Not implemented")}static async deserialize(e,n,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=n.viewport,h=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,n,s);return u.createDrawingOptions(e),b(d=u,dt,d0).call(d,{drawOutlines:h}),b(f=u,dt,cu).call(f),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[n,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,Ln).serialize([n,s,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Ln=new WeakMap,lh=new WeakMap,fe=new WeakMap,Ka=new WeakMap,Xa=new WeakMap,uo=new WeakMap,fo=new WeakMap,po=new WeakMap,Ya=new WeakMap,dt=new WeakSet,d0=function({drawOutlines:e,drawId:n,drawingOptions:s}){p(this,Ln,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,e.defaultProperties)):this._drawId=b(this,dt,f0).call(this,e,this.parent),b(this,dt,hu).call(this,e.box)},f0=function(e,n){const{id:s}=n.drawLayer.draw(j._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},p0=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},cu=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=b(this,dt,f0).call(this,a(this,Ln),e)}},lC=function([e,n,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[n,1-e,s*(l/o),r*(o/l)];case 180:return[1-e,1-n,s,r];case 270:return[1-n,e,s*(l/o),r*(o/l)];default:return[e,n,s,r]}},jp=function(){const{x:e,y:n,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-n,e,s*(o/l),r*(l/o)];case 180:return[1-e,1-n,s,r];case 270:return[n,1-e,s*(o/l),r*(l/o)];default:return[e,n,s,r]}},hu=function(e){if([this.x,this.y,this.width,this.height]=b(this,dt,lC).call(this,e),this.div){this.fixAndSetPosition();const[n,s]=this.parentDimensions;this.setDims(this.width*n,this.height*s)}this._onResized()},Nl=function(){const{x:e,y:n,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,h]}=this;switch((o*4+l)/90){case 1:return[1-n-r,e,r,s];case 2:return[1-e-s,1-n-r,s,r];case 3:return[n,1-e-s,r,s];case 4:return[e,n-s*(c/h),r*(h/c),s*(c/h)];case 5:return[1-n,e,s*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-n,r*(h/c),s*(c/h)];case 7:return[n-s*(c/h),1-e-r*(h/c),s*(c/h),r*(h/c)];case 8:return[e-s,n-r,s,r];case 9:return[1-n,e-s,r,s];case 10:return[1-e,1-n,s,r];case 11:return[n-r,1-e,r,s];case 12:return[e-r*(h/c),n,r*(h/c),s*(c/h)];case 13:return[1-n-s*(c/h),e-r*(h/c),s*(c/h),r*(h/c)];case 14:return[1-e,1-n-s*(c/h),r*(h/c),s*(c/h)];case 15:return[n,1-e,s*(c/h),r*(h/c)];default:return[e,n,s,r]}},M(j,"_currentDrawId",-1),M(j,"_currentParent",null),S(j,fe,null),S(j,Ka,null),S(j,Xa,null),S(j,uo,NaN),S(j,fo,null),S(j,po,null),S(j,Ya,NaN),M(j,"_INNER_MARGIN",3);let Dg=j;var is,pe,ge,Qa,ch,Ye,ke,ri,Ja,Za,$a,hh,Wp;class zM{constructor(t,e,n,s,r,o){S(this,hh);S(this,is,new Float64Array(6));S(this,pe);S(this,ge);S(this,Qa);S(this,ch);S(this,Ye);S(this,ke,"");S(this,ri,0);S(this,Ja,new Df);S(this,Za);S(this,$a);p(this,Za,n),p(this,$a,s),p(this,Qa,r),p(this,ch,o),[t,e]=b(this,hh,Wp).call(this,t,e);const l=p(this,pe,[NaN,NaN,NaN,NaN,t,e]);p(this,Ye,[t,e]),p(this,ge,[{line:l,points:a(this,Ye)}]),a(this,is).set(l,0)}updateProperty(t,e){t==="stroke-width"&&p(this,ch,e)}isEmpty(){return!a(this,ge)||a(this,ge).length===0}isCancellable(){return a(this,Ye).length<=10}add(t,e){[t,e]=b(this,hh,Wp).call(this,t,e);const[n,s,r,o]=a(this,is).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,Za)*l,a(this,$a)*c)<=2?null:(a(this,Ye).push(t,e),isNaN(n)?(a(this,is).set([r,o,t,e],2),a(this,pe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,is)[0])&&a(this,pe).splice(6,6),a(this,is).set([n,s,r,o,t,e],0),a(this,pe).push(...q.createBezierPoints(n,s,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const n=this.add(t,e);return n||(a(this,Ye).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,n,s,r){p(this,Za,n),p(this,$a,s),p(this,Qa,r),[t,e]=b(this,hh,Wp).call(this,t,e);const o=p(this,pe,[NaN,NaN,NaN,NaN,t,e]);p(this,Ye,[t,e]);const l=a(this,ge).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,ge).push({line:o,points:a(this,Ye)}),a(this,is).set(o,0),p(this,ri,0),this.toSVGPath(),null}getLastElement(){return a(this,ge).at(-1)}setLastElement(t){return a(this,ge)?(a(this,ge).push(t),p(this,pe,t.line),p(this,Ye,t.points),p(this,ri,0),{path:{d:this.toSVGPath()}}):a(this,Ja).setLastElement(t)}removeLastElement(){if(!a(this,ge))return a(this,Ja).removeLastElement();a(this,ge).pop(),p(this,ke,"");for(let t=0,e=a(this,ge).length;t<e;t++){const{line:n,points:s}=a(this,ge)[t];p(this,pe,n),p(this,Ye,s),p(this,ri,0),this.toSVGPath()}return{path:{d:a(this,ke)}}}toSVGPath(){const t=q.svgRound(a(this,pe)[4]),e=q.svgRound(a(this,pe)[5]);if(a(this,Ye).length===2)return p(this,ke,`${a(this,ke)} M ${t} ${e} Z`),a(this,ke);if(a(this,Ye).length<=6){const s=a(this,ke).lastIndexOf("M");p(this,ke,`${a(this,ke).slice(0,s)} M ${t} ${e}`),p(this,ri,6)}if(a(this,Ye).length===4){const s=q.svgRound(a(this,pe)[10]),r=q.svgRound(a(this,pe)[11]);return p(this,ke,`${a(this,ke)} L ${s} ${r}`),p(this,ri,12),a(this,ke)}const n=[];a(this,ri)===0&&(n.push(`M ${t} ${e}`),p(this,ri,6));for(let s=a(this,ri),r=a(this,pe).length;s<r;s+=6){const[o,l,c,h,u,d]=a(this,pe).slice(s,s+6).map(q.svgRound);n.push(`C${o} ${l} ${c} ${h} ${u} ${d}`)}return p(this,ke,a(this,ke)+n.join(" ")),p(this,ri,a(this,pe).length),a(this,ke)}getOutlines(t,e,n,s){const r=a(this,ge).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,Ja).build(a(this,ge),t,e,n,a(this,Qa),a(this,ch),s),p(this,is,null),p(this,pe,null),p(this,ge,null),p(this,ke,null),a(this,Ja)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}is=new WeakMap,pe=new WeakMap,ge=new WeakMap,Qa=new WeakMap,ch=new WeakMap,Ye=new WeakMap,ke=new WeakMap,ri=new WeakMap,Ja=new WeakMap,Za=new WeakMap,$a=new WeakMap,hh=new WeakSet,Wp=function(t,e){return q._normalizePoint(t,e,a(this,Za),a(this,$a),a(this,Qa))};var Qe,vf,wf,In,ss,rs,uh,dh,tl,_e,ws,cC,hC,uC;class Df extends q{constructor(){super(...arguments);S(this,_e);S(this,Qe);S(this,vf,0);S(this,wf);S(this,In);S(this,ss);S(this,rs);S(this,uh);S(this,dh);S(this,tl)}build(e,n,s,r,o,l,c){p(this,ss,n),p(this,rs,s),p(this,uh,r),p(this,dh,o),p(this,tl,l),p(this,wf,c??0),p(this,In,e),b(this,_e,hC).call(this)}get thickness(){return a(this,tl)}setLastElement(e){return a(this,In).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,In).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:n}of a(this,In)){if(e.push(`M${q.svgRound(n[4])} ${q.svgRound(n[5])}`),n.length===6){e.push("Z");continue}if(n.length===12&&isNaN(n[6])){e.push(`L${q.svgRound(n[10])} ${q.svgRound(n[11])}`);continue}for(let s=6,r=n.length;s<r;s+=6){const[o,l,c,h,u,d]=n.subarray(s,s+6).map(q.svgRound);e.push(`C${o} ${l} ${c} ${h} ${u} ${d}`)}}return e.join("")}serialize([e,n,s,r],o){const l=[],c=[],[h,u,d,f]=b(this,_e,cC).call(this);let g,v,A,E,m,y,w,x,C;switch(a(this,dh)){case 0:C=q._rescale,g=e,v=n+r,A=s,E=-r,m=e+h*s,y=n+(1-u-f)*r,w=e+(h+d)*s,x=n+(1-u)*r;break;case 90:C=q._rescaleAndSwap,g=e,v=n,A=s,E=r,m=e+u*s,y=n+h*r,w=e+(u+f)*s,x=n+(h+d)*r;break;case 180:C=q._rescale,g=e+s,v=n,A=-s,E=r,m=e+(1-h-d)*s,y=n+u*r,w=e+(1-h)*s,x=n+(u+f)*r;break;case 270:C=q._rescaleAndSwap,g=e+s,v=n+r,A=-s,E=-r,m=e+(1-u-f)*s,y=n+(1-h-d)*r,w=e+(1-u)*s,x=n+(1-h)*r;break}for(const{line:T,points:k}of a(this,In))l.push(C(T,g,v,A,E,o?new Array(T.length):null)),c.push(C(k,g,v,A,E,o?new Array(k.length):null));return{lines:l,points:c,rect:[m,y,w,x]}}static deserialize(e,n,s,r,o,{paths:{lines:l,points:c},rotation:h,thickness:u}){const d=[];let f,g,v,A,E;switch(h){case 0:E=q._rescale,f=-e/s,g=n/r+1,v=1/s,A=-1/r;break;case 90:E=q._rescaleAndSwap,f=-n/r,g=-e/s,v=1/r,A=1/s;break;case 180:E=q._rescale,f=e/s+1,g=-n/r,v=-1/s,A=1/r;break;case 270:E=q._rescaleAndSwap,f=n/r+1,g=e/s+1,v=-1/r,A=-1/s;break}if(!l){l=[];for(const y of c){const w=y.length;if(w===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1]]));continue}if(w===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,y[0],y[1],NaN,NaN,NaN,NaN,y[2],y[3]]));continue}const x=new Float32Array(3*(w-2));l.push(x);let[C,T,k,P]=y.subarray(0,4);x.set([NaN,NaN,NaN,NaN,C,T],0);for(let _=4;_<w;_+=2){const R=y[_],D=y[_+1];x.set(q.createBezierPoints(C,T,k,P,R,D),(_-2)*3),[C,T,k,P]=[k,P,R,D]}}}for(let y=0,w=l.length;y<w;y++)d.push({line:E(l[y].map(x=>x??NaN),f,g,v,A),points:E(c[y].map(x=>x??NaN),f,g,v,A)});const m=new this.prototype.constructor;return m.build(d,s,r,1,h,u,o),m}get box(){return a(this,Qe)}updateProperty(e,n){return e==="stroke-width"?b(this,_e,uC).call(this,n):null}updateParentDimensions([e,n],s){const[r,o]=b(this,_e,ws).call(this);p(this,ss,e),p(this,rs,n),p(this,uh,s);const[l,c]=b(this,_e,ws).call(this),h=l-r,u=c-o,d=a(this,Qe);return d[0]-=h,d[1]-=u,d[2]+=2*h,d[3]+=2*u,d}updateRotation(e){return p(this,vf,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,Qe).map(q.svgRound).join(" ")}get defaultProperties(){const[e,n]=a(this,Qe);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(n)}`}}}get rotationTransform(){const[,,e,n]=a(this,Qe);let s=0,r=0,o=0,l=0,c=0,h=0;switch(a(this,vf)){case 90:r=n/e,o=-e/n,c=e;break;case 180:s=-1,l=-1,c=e,h=n;break;case 270:r=-n/e,o=e/n,h=n;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${q.svgRound(c)} ${q.svgRound(h)})`}getPathResizingSVGProperties([e,n,s,r]){const[o,l]=b(this,_e,ws).call(this),[c,h,u,d]=a(this,Qe);if(Math.abs(u-o)<=q.PRECISION||Math.abs(d-l)<=q.PRECISION){const E=e+s/2-(c+u/2),m=n+r/2-(h+d/2);return{path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(n)}`,transform:`${this.rotationTransform} translate(${E} ${m})`}}}const f=(s-2*o)/(u-2*o),g=(r-2*l)/(d-2*l),v=u/s,A=d/r;return{path:{"transform-origin":`${q.svgRound(c)} ${q.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${A}) translate(${q.svgRound(o)} ${q.svgRound(l)}) scale(${f} ${g}) translate(${q.svgRound(-o)} ${q.svgRound(-l)})`}}}getPathResizedSVGProperties([e,n,s,r]){const[o,l]=b(this,_e,ws).call(this),c=a(this,Qe),[h,u,d,f]=c;if(c[0]=e,c[1]=n,c[2]=s,c[3]=r,Math.abs(d-o)<=q.PRECISION||Math.abs(f-l)<=q.PRECISION){const m=e+s/2-(h+d/2),y=n+r/2-(u+f/2);for(const{line:w,points:x}of a(this,In))q._translate(w,m,y,w),q._translate(x,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(s-2*o)/(d-2*o),v=(r-2*l)/(f-2*l),A=-g*(h+o)+e+o,E=-v*(u+l)+n+l;if(g!==1||v!==1||A!==0||E!==0)for(const{line:m,points:y}of a(this,In))q._rescale(m,A,E,g,v,m),q._rescale(y,A,E,g,v,y);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${q.svgRound(e)} ${q.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,n],s){const[r,o]=s,l=a(this,Qe),c=e-l[0],h=n-l[1];if(a(this,ss)===r&&a(this,rs)===o)for(const{line:u,points:d}of a(this,In))q._translate(u,c,h,u),q._translate(d,c,h,d);else{const u=a(this,ss)/r,d=a(this,rs)/o;p(this,ss,r),p(this,rs,o);for(const{line:f,points:g}of a(this,In))q._rescale(f,c,h,u,d,f),q._rescale(g,c,h,u,d,g);l[2]*=u,l[3]*=d}return l[0]=e,l[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(e)} ${q.svgRound(n)}`}}}get defaultSVGProperties(){const e=a(this,Qe);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${q.svgRound(e[0])} ${q.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Qe=new WeakMap,vf=new WeakMap,wf=new WeakMap,In=new WeakMap,ss=new WeakMap,rs=new WeakMap,uh=new WeakMap,dh=new WeakMap,tl=new WeakMap,_e=new WeakSet,ws=function(e=a(this,tl)){const n=a(this,wf)+e/2*a(this,uh);return a(this,dh)%180===0?[n/a(this,ss),n/a(this,rs)]:[n/a(this,rs),n/a(this,ss)]},cC=function(){const[e,n,s,r]=a(this,Qe),[o,l]=b(this,_e,ws).call(this,0);return[e+o,n+l,s-2*o,r-2*l]},hC=function(){const e=p(this,Qe,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,In)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)W.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,d,f,g,v,A]=r.subarray(c,c+6);W.bezierBoundingBox(o,l,u,d,f,g,v,A,e),o=v,l=A}}const[n,s]=b(this,_e,ws).call(this);e[0]=$e(e[0]-n,0,1),e[1]=$e(e[1]-s,0,1),e[2]=$e(e[2]+n,0,1),e[3]=$e(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},uC=function(e){const[n,s]=b(this,_e,ws).call(this);p(this,tl,e);const[r,o]=b(this,_e,ws).call(this),[l,c]=[r-n,o-s],h=a(this,Qe);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h};class Em extends aC{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Tt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new Em(this._viewParameters);return t.updateAll(this),t}}var Qg,dC;const Yl=class Yl extends Dg{constructor(e){super({...e,name:"inkEditor"});S(this,Qg);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,n){Tt.initialize(e,n),this._defaultDrawingOptions=new Em(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return rt(this,"typesMap",new Map([[lt.INK_THICKNESS,"stroke-width"],[lt.INK_COLOR,"stroke"],[lt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,n,s,r,o){return new zM(e,n,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,n,s,r,o,l){return Df.deserialize(e,n,s,r,o,l)}static async deserialize(e,n,s){let r=null;if(e instanceof Fw){const{data:{inkLists:l,rect:c,rotation:h,id:u,color:d,opacity:f,borderStyle:{rawWidth:g},popupRef:v,contentsObj:A},parent:{page:{pageNumber:E}}}=e;r=e={annotationType:Z.INK,color:Array.from(d),thickness:g,opacity:f,paths:{points:l},boxes:null,pageIndex:E-1,rect:c.slice(0),rotation:h,annotationElementId:u,id:u,deleted:!1,popupRef:v,comment:(A==null?void 0:A.str)||null}}const o=await super.deserialize(e,n,s);return o._initialData=r,e.comment&&o.setCommentData(e.comment),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new Pg(this)),[["colorPicker",this._colorPicker]]}get colorType(){return lt.INK_COLOR}get colorValue(){return this._drawingOptions.stroke}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:n,opacity:s}){this._drawingOptions=Yl.getDefaultDrawingOptions({stroke:W.makeHexColor(...e),"stroke-width":n,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:Z.INK,color:Tt._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:n,points:s},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(h),e?(h.isCopy=!0,h):this.annotationElementId&&!b(this,Qg,dC).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1),r={rect:s,thickness:this._drawingOptions["stroke-width"],points:n};return this.hasEditedComment&&(r.popup=this.comment),e.updateEdited(r),null}};Qg=new WeakSet,dC=function(e){const{color:n,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==n[c])||e.thickness!==s||e.opacity!==r||e.pageIndex!==o},M(Yl,"_type","ink"),M(Yl,"_editorType",Z.INK),M(Yl,"_defaultDrawingOptions",null);let g0=Yl;class m0 extends Df{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const lp=8,qh=3;var el,mt,y0,Ti,fC,pC,v0,Gp,gC,mC,yC,w0,S0,vC;class lr{static extractContoursFromText(t,{fontFamily:e,fontStyle:n,fontWeight:s},r,o,l,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const d=200,f=u.font=`${n} ${s} ${d}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:v,actualBoundingBoxAscent:A,actualBoundingBoxDescent:E,fontBoundingBoxAscent:m,fontBoundingBoxDescent:y,width:w}=u.measureText(t),x=1.5,C=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||0,w)*x),T=Math.ceil(Math.max(Math.abs(A)+Math.abs(E)||d,Math.abs(m)+Math.abs(y)||d)*x);h=new OffscreenCanvas(C,T),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=f,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,C,T),u.fillStyle="black",u.fillText(t,C*(x-1)/2,T*(3-x)/2);const k=b(this,mt,w0).call(this,u.getImageData(0,0,C,T).data),P=b(this,mt,yC).call(this,k),_=b(this,mt,S0).call(this,P),R=b(this,mt,v0).call(this,k,C,T,_);return this.processDrawnLines({lines:{curves:R,width:C,height:T},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,n,s,r){const[o,l,c]=b(this,mt,vC).call(this,t),[h,u]=b(this,mt,mC).call(this,o,l,c,Math.hypot(l,c)*a(this,el).sigmaSFactor,a(this,el).sigmaR,a(this,el).kernelSize),d=b(this,mt,S0).call(this,u),f=b(this,mt,v0).call(this,h,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:n,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([e,n]=[n,e]);const{curves:c,width:h,height:u}=t,d=t.thickness??0,f=[],g=Math.min(e/h,n/u),v=g/e,A=g/n,E=[];for(const{points:y}of c){const w=o?b(this,mt,gC).call(this,y):y;if(!w)continue;E.push(w);const x=w.length,C=new Float32Array(x),T=new Float32Array(3*(x===2?2:x-2));if(f.push({line:T,points:C}),x===2){C[0]=w[0]*v,C[1]=w[1]*A,T.set([NaN,NaN,NaN,NaN,C[0],C[1]],0);continue}let[k,P,_,R]=w;k*=v,P*=A,_*=v,R*=A,C.set([k,P,_,R],0),T.set([NaN,NaN,NaN,NaN,k,P],0);for(let D=4;D<x;D+=2){const F=C[D]=w[D]*v,X=C[D+1]=w[D+1]*A;T.set(q.createBezierPoints(k,P,_,R,F,X),(D-2)*3),[k,P,_,R]=[_,R,F,X]}}if(f.length===0)return null;const m=l?new m0:new Df;return m.build(f,e,n,1,s,l?0:d,r),{outline:m,newCurves:E,areContours:l,thickness:d,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:n,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const w of t){c+=w.length;for(let x=2,C=w.length;x<C;x++){const T=w[x]-w[x-2];o=Math.min(o,T),l=Math.max(l,T)}}let h;o>=-128&&l<=127?h=Int8Array:o>=-32768&&l<=32767?h=Int16Array:h=Int32Array;const u=t.length,d=lp+qh*u,f=new Uint32Array(d);let g=0;f[g++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,f[g++]=0,f[g++]=s,f[g++]=r,f[g++]=e?0:1,f[g++]=Math.max(0,Math.floor(n??0)),f[g++]=u,f[g++]=h.BYTES_PER_ELEMENT;for(const w of t)f[g++]=w.length-2,f[g++]=w[0],f[g++]=w[1];const v=new CompressionStream("deflate-raw"),A=v.writable.getWriter();await A.ready,A.write(f);const E=h.prototype.constructor;for(const w of t){const x=new E(w.length-2);for(let C=2,T=w.length;C<T;C++)x[C-2]=w[C]-w[C-2];A.write(x)}A.close();const m=await new Response(v.readable).arrayBuffer(),y=new Uint8Array(m);return yx(y)}static async decompressSignature(t){try{const e=o_(t),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const w of n)o||(o=new Uint8Array(new Uint32Array(w.buffer,0,4)[0])),o.set(w,l),l+=w.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],d=c[3],f=c[4]===0,g=c[5],v=c[6],A=c[7],E=[],m=(lp+qh*v)*Uint32Array.BYTES_PER_ELEMENT;let y;switch(A){case Int8Array.BYTES_PER_ELEMENT:y=new Int8Array(o.buffer,m);break;case Int16Array.BYTES_PER_ELEMENT:y=new Int16Array(o.buffer,m);break;case Int32Array.BYTES_PER_ELEMENT:y=new Int32Array(o.buffer,m);break}l=0;for(let w=0;w<v;w++){const x=c[qh*w+lp],C=new Float32Array(x+2);E.push(C);for(let T=0;T<qh-1;T++)C[T]=c[qh*w+lp+T+1];for(let T=0;T<x;T++)C[T+2]=C[T]+y[l++]}return{areContours:f,thickness:g,outlines:E,width:u,height:d}}catch(e){return $(`decompressSignature: ${e}`),null}}}el=new WeakMap,mt=new WeakSet,y0=function(t,e,n,s){return n-=t,s-=e,n===0?s>0?0:4:n===1?s+6:2-s},Ti=new WeakMap,fC=function(t,e,n,s,r,o,l){const c=b(this,mt,y0).call(this,n,s,r,o);for(let h=0;h<8;h++){const u=(-h+c-l+16)%8,d=a(this,Ti)[2*u],f=a(this,Ti)[2*u+1];if(t[(n+d)*e+(s+f)]!==0)return u}return-1},pC=function(t,e,n,s,r,o,l){const c=b(this,mt,y0).call(this,n,s,r,o);for(let h=0;h<8;h++){const u=(h+c+l+16)%8,d=a(this,Ti)[2*u],f=a(this,Ti)[2*u+1];if(t[(n+d)*e+(s+f)]!==0)return u}return-1},v0=function(t,e,n,s){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=s?1:0;for(let u=1;u<n-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*n-1-u]=0;let l=1,c;const h=[];for(let u=1;u<n-1;u++){c=1;for(let d=1;d<e-1;d++){const f=u*e+d,g=o[f];if(g===0)continue;let v=u,A=d;if(g===1&&o[f-1]===0)l+=1,A-=1;else if(g>=1&&o[f+1]===0)l+=1,A+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const E=[d,u],m=A===d+1,y={isHole:m,points:E,id:l,parent:0};h.push(y);let w;for(const D of h)if(D.id===c){w=D;break}w?w.isHole?y.parent=m?w.parent:c:y.parent=m?c:w.parent:y.parent=m?c:0;const x=b(this,mt,fC).call(this,o,e,u,d,v,A,0);if(x===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let C=a(this,Ti)[2*x],T=a(this,Ti)[2*x+1];const k=u+C,P=d+T;v=k,A=P;let _=u,R=d;for(;;){const D=b(this,mt,pC).call(this,o,e,_,R,v,A,1);C=a(this,Ti)[2*D],T=a(this,Ti)[2*D+1];const F=_+C,X=R+T;E.push(X,F);const Q=_*e+R;if(o[Q+1]===0?o[Q]=-l:o[Q]===1&&(o[Q]=l),F===u&&X===d&&_===k&&R===P){o[f]!==1&&(c=Math.abs(o[f]));break}else v=_,A=R,_=F,R=X}}}return h},Gp=function(t,e,n,s){if(n-e<=4){for(let k=e;k<n-2;k+=2)s.push(t[k],t[k+1]);return}const r=t[e],o=t[e+1],l=t[n-4]-r,c=t[n-3]-o,h=Math.hypot(l,c),u=l/h,d=c/h,f=u*o-d*r,g=c/l,v=1/h,A=Math.atan(g),E=Math.cos(A),m=Math.sin(A),y=v*(Math.abs(E)+Math.abs(m)),w=v*(1-y+y**2),x=Math.max(Math.atan(Math.abs(m+E)*w),Math.atan(Math.abs(m-E)*w));let C=0,T=e;for(let k=e+2;k<n-2;k+=2){const P=Math.abs(f-u*t[k+1]+d*t[k]);P>C&&(T=k,C=P)}C>(h*x)**2?(b(this,mt,Gp).call(this,t,e,T+2,s),b(this,mt,Gp).call(this,t,T,n,s)):s.push(r,o)},gC=function(t){const e=[],n=t.length;return b(this,mt,Gp).call(this,t,0,n,e),e.push(t[n-2],t[n-1]),e.length<=4?null:e},mC=function(t,e,n,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,h=o>>1;for(let A=0;A<o;A++){const E=(A-h)**2;for(let m=0;m<o;m++)l[A*o+m]=Math.exp((E+(m-h)**2)/c)}const u=new Float32Array(256),d=-2*r**2;for(let A=0;A<256;A++)u[A]=Math.exp(A**2/d);const f=t.length,g=new Uint8Array(f),v=new Uint32Array(256);for(let A=0;A<n;A++)for(let E=0;E<e;E++){const m=A*e+E,y=t[m];let w=0,x=0;for(let T=0;T<o;T++){const k=A+T-h;if(!(k<0||k>=n))for(let P=0;P<o;P++){const _=E+P-h;if(_<0||_>=e)continue;const R=t[k*e+_],D=l[T*o+P]*u[Math.abs(R-y)];w+=R*D,x+=D}}const C=g[m]=Math.round(w/x);v[C]++}return[g,v]},yC=function(t){const e=new Uint32Array(256);for(const n of t)e[n]++;return e},w0=function(t){const e=t.length,n=new Uint8ClampedArray(e>>2);let s=-1/0,r=1/0;for(let l=0,c=n.length;l<c;l++){const h=n[l]=t[l<<2];s=Math.max(s,h),r=Math.min(r,h)}const o=255/(s-r);for(let l=0,c=n.length;l<c;l++)n[l]=(n[l]-r)*o;return n},S0=function(t){let e,n=-1/0,s=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>n&&(e-o>s&&(s=e-o,l=e-1),n=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},vC=function(t){const e=t,{width:n,height:s}=t,{maxDim:r}=a(this,el);let o=n,l=s;if(n>r||s>r){let f=n,g=s,v=Math.log2(Math.max(n,s)/r);const A=Math.floor(v);v=v===A?A-1:A;for(let m=0;m<v;m++){o=Math.ceil(f/2),l=Math.ceil(g/2);const y=new OffscreenCanvas(o,l);y.getContext("2d").drawImage(t,0,0,f,g,0,0,o,l),f=o,g=l,t!==e&&t.close(),t=y.transferToImageBitmap()}const E=Math.min(r/o,r/l);o=Math.round(o*E),l=Math.round(l*E)}const h=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});h.fillStyle="white",h.fillRect(0,0,o,l),h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,l);const u=h.getImageData(0,0,o,l).data;return[b(this,mt,w0).call(this,u),o,l]},S(lr,mt),S(lr,el,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),S(lr,Ti,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Ow extends aC{constructor(){super(),super.updateProperties({fill:Tt._defaultLineColor,"stroke-width":0})}clone(){const t=new Ow;return t.updateAll(this),t}}class zw extends Em{constructor(t){super(t),super.updateProperties({stroke:Tt._defaultLineColor,"stroke-width":1})}clone(){const t=new zw(this._viewParameters);return t.updateAll(this),t}}var go,os,mo,nl;const Sn=class Sn extends Dg{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});S(this,go,!1);S(this,os,null);S(this,mo,null);S(this,nl,null);this._willKeepAspectRatio=!0,p(this,mo,e.signatureData||null),p(this,os,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,n){Tt.initialize(e,n),this._defaultDrawingOptions=new Ow,this._defaultDrawnSignatureOptions=new zw(n.viewParameters)}static getDefaultDrawingOptions(e){const n=this._defaultDrawingOptions.clone();return n.updateProperties(e),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return rt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,os)}}static computeTelemetryFinalData(e){const n=e.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,n=this.y),super.render(),this._drawId===null)if(a(this,mo)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:h,heightInPage:u}=a(this,mo),{rawDims:{pageWidth:d,pageHeight:f},rotation:g}=this.parent.viewport,v=lr.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:g,innerMargin:Sn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(v,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,os)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,n)),this.div}setUuid(e){p(this,nl,e),this.addEditToolbar()}getUuid(){return a(this,nl)}get description(){return a(this,os)}set description(e){p(this,os,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:n,thickness:s,width:r,height:o}=a(this,mo),l=Math.max(r,o),c=lr.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,n,s,r){const{x:o,y:l}=this,{outline:c}=p(this,mo,e);p(this,go,c instanceof m0),this.description=s;let h;a(this,go)?h=Sn.getDefaultDrawingOptions():(h=Sn._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,d]=this.parentDimensions,[,f]=this.pageDimensions;let g=n/f;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,d*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return lr.process(e,n,s,r,Sn._INNER_MARGIN)}getFromText(e,n){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return lr.extractContoursFromText(e,n,s,r,o,Sn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:n,pageHeight:s},rotation:r}=this.parent.viewport;return lr.processDrawnLines({lines:e,pageWidth:n,pageHeight:s,rotation:r,innerMargin:Sn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:n}){e?this._drawingOptions=Sn.getDefaultDrawingOptions():(this._drawingOptions=Sn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:n,points:s,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:Z.SIGNATURE,isSignature:!0,areContours:a(this,go),color:[0,0,0],thickness:a(this,go)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return this.addComment(l),e?(l.paths={lines:n,points:s},l.uuid=a(this,nl),l.isCopy=!0):l.lines=n,a(this,os)&&(l.accessibilityData={type:"Figure",alt:a(this,os)}),l}static deserializeDraw(e,n,s,r,o,l){return l.areContours?m0.deserialize(e,n,s,r,o,l):Df.deserialize(e,n,s,r,o,l)}static async deserialize(e,n,s){var o;const r=await super.deserialize(e,n,s);return p(r,go,e.areContours),r.description=((o=e.accessibilityData)==null?void 0:o.alt)||"",p(r,nl,e.uuid),r}};go=new WeakMap,os=new WeakMap,mo=new WeakMap,nl=new WeakMap,M(Sn,"_type","signature"),M(Sn,"_editorType",Z.SIGNATURE),M(Sn,"_defaultDrawingOptions",null);let A0=Sn;var Dt,me,yo,ir,vo,fh,sr,il,as,Fn,ph,ft,uu,du,Kp,Xp,Yp,x0,Qp,wC;class b0 extends Tt{constructor(e){super({...e,name:"stampEditor"});S(this,ft);S(this,Dt,null);S(this,me,null);S(this,yo,null);S(this,ir,null);S(this,vo,null);S(this,fh,"");S(this,sr,null);S(this,il,!1);S(this,as,null);S(this,Fn,!1);S(this,ph,!1);p(this,ir,e.bitmapUrl),p(this,vo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,n){Tt.initialize(e,n)}static isHandlingMimeForPasting(e){return pv.includes(e)}static paste(e,n){n.pasteEditor({mode:Z.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const n=e.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(e=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),n&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;a(this,me)&&(p(this,Dt,null),this._uiManager.imageManager.deleteId(a(this,me)),(e=a(this,sr))==null||e.remove(),p(this,sr,null),a(this,as)&&(clearTimeout(a(this,as)),p(this,as,null))),super.remove()}rebuild(){if(!this.parent){a(this,me)&&b(this,ft,Kp).call(this);return}super.rebuild(),this.div!==null&&(a(this,me)&&a(this,sr)===null&&b(this,ft,Kp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,yo)||a(this,Dt)||a(this,ir)||a(this,vo)||a(this,me)||a(this,il))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,n;return this._isCopy&&(e=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,il)||(a(this,Dt)?b(this,ft,Xp).call(this):b(this,ft,Kp).call(this)),this._isCopy&&this._moveAfterPaste(e,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,n){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(p(this,me,s),r&&p(this,Dt,r),p(this,il,!1),b(this,ft,Xp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,as)!==null&&clearTimeout(a(this,as)),p(this,as,setTimeout(()=>{p(this,as,null),b(this,ft,x0).call(this)},200))}copyCanvas(e,n,s=!1){var g;e||(e=224);const{width:r,height:o}=a(this,Dt),l=new fs;let c=a(this,Dt),h=r,u=o,d=null;if(n){if(r>n||o>n){const P=Math.min(n/r,n/o);h=Math.floor(r*P),u=Math.floor(o*P)}d=document.createElement("canvas");const v=d.width=Math.ceil(h*l.sx),A=d.height=Math.ceil(u*l.sy);a(this,Fn)||(c=b(this,ft,Yp).call(this,v,A));const E=d.getContext("2d");E.filter=this._uiManager.hcmFilter;let m="white",y="#cfcfd8";this._uiManager.hcmFilter!=="none"?y="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(m="#8f8f9d",y="#42414d");const w=15,x=w*l.sx,C=w*l.sy,T=new OffscreenCanvas(x*2,C*2),k=T.getContext("2d");k.fillStyle=m,k.fillRect(0,0,x*2,C*2),k.fillStyle=y,k.fillRect(0,0,x,C),k.fillRect(x,C,x,C),E.fillStyle=E.createPattern(T,"repeat"),E.fillRect(0,0,v,A),E.drawImage(c,0,0,c.width,c.height,0,0,v,A)}let f=null;if(s){let v,A;if(l.symmetric&&c.width<e&&c.height<e)v=c.width,A=c.height;else if(c=a(this,Dt),r>e||o>e){const y=Math.min(e/r,e/o);v=Math.floor(r*y),A=Math.floor(o*y),a(this,Fn)||(c=b(this,ft,Yp).call(this,v,A))}const m=new OffscreenCanvas(v,A).getContext("2d",{willReadFrequently:!0});m.drawImage(c,0,0,c.width,c.height,0,0,v,A),f={width:v,height:A,data:m.getImageData(0,0,v,A).data}}return{canvas:d,width:h,height:u,imageData:f}}static async deserialize(e,n,s){var E;let r=null,o=!1;if(e instanceof IE){const{data:{rect:m,rotation:y,id:w,structParent:x,popupRef:C,contentsObj:T},container:k,parent:{page:{pageNumber:P}},canvas:_}=e;let R,D;_?(delete e.canvas,{id:R,bitmap:D}=s.imageManager.getFromCanvas(k.id,_),_.remove()):(o=!0,e._hasNoCanvas=!0);const F=((E=await n._structTree.getAriaAttributes(`${Rw}${w}`))==null?void 0:E.get("aria-label"))||"";r=e={annotationType:Z.STAMP,bitmapId:R,bitmap:D,pageIndex:P-1,rect:m.slice(0),rotation:y,annotationElementId:w,id:w,deleted:!1,accessibilityData:{decorative:!1,altText:F},isSvg:!1,structParent:x,popupRef:C,comment:(T==null?void 0:T.str)||null}}const l=await super.deserialize(e,n,s),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:d,isSvg:f,accessibilityData:g}=e;o?(s.addMissingCanvas(e.id,l),p(l,il,!0)):d&&s.imageManager.isValidId(d)?(p(l,me,d),h&&p(l,Dt,h)):p(l,ir,u),p(l,Fn,f);const[v,A]=l.pageDimensions;return l.width=(c[2]-c[0])/v,l.height=(c[3]-c[1])/A,g&&(l.altTextData=g),l._initialData=r,e.comment&&l.setCommentData(e.comment),p(l,ph,!!r),l}serialize(e=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:Z.STAMP,bitmapId:a(this,me),pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,isSvg:a(this,Fn),structTreeParentId:this._structTreeParentId};if(this.addComment(s),e)return s.bitmapUrl=b(this,ft,Qp).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=b(this,ft,wC).call(this,s);if(c.isSame)return null;c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,n===null)return s;n.stamps||(n.stamps=new Map);const l=a(this,Fn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(a(this,me)))n.stamps.set(a(this,me),{area:l,serialized:s}),s.bitmap=b(this,ft,Qp).call(this,!1);else if(a(this,Fn)){const c=n.stamps.get(a(this,me));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=b(this,ft,Qp).call(this,!1))}return s}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const n={rect:this.getPDFRect()};return this.hasEditedComment&&(n.popup=this.comment),e.updateEdited(n),null}}Dt=new WeakMap,me=new WeakMap,yo=new WeakMap,ir=new WeakMap,vo=new WeakMap,fh=new WeakMap,sr=new WeakMap,il=new WeakMap,as=new WeakMap,Fn=new WeakMap,ph=new WeakMap,ft=new WeakSet,uu=function(e,n=!1){if(!e){this.remove();return}p(this,Dt,e.bitmap),n||(p(this,me,e.id),p(this,Fn,e.isSvg)),e.file&&p(this,fh,e.file.name),b(this,ft,Xp).call(this)},du=function(){if(p(this,yo,null),this._uiManager.enableWaiting(!1),!!a(this,sr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Dt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Dt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Kp=function(){if(a(this,me)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,me)).then(s=>b(this,ft,uu).call(this,s,!0)).finally(()=>b(this,ft,du).call(this));return}if(a(this,ir)){const s=a(this,ir);p(this,ir,null),this._uiManager.enableWaiting(!0),p(this,yo,this._uiManager.imageManager.getFromUrl(s).then(r=>b(this,ft,uu).call(this,r)).finally(()=>b(this,ft,du).call(this)));return}if(a(this,vo)){const s=a(this,vo);p(this,vo,null),this._uiManager.enableWaiting(!0),p(this,yo,this._uiManager.imageManager.getFromFile(s).then(r=>b(this,ft,uu).call(this,r)).finally(()=>b(this,ft,du).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=pv.join(",");const n=this._uiManager._signal;p(this,yo,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),b(this,ft,uu).call(this,r)}s()},{signal:n}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>b(this,ft,du).call(this))),e.click()},Xp=function(){var d;const{div:e}=this;let{width:n,height:s}=a(this,Dt);const[r,o]=this.pageDimensions,l=.75;if(this.width)n=this.width*r,s=this.height*o;else if(n>l*r||s>l*o){const f=Math.min(l*r/n,l*o/s);n*=f,s*=f}const[c,h]=this.parentDimensions;this.setDims(n*c/r,s*h/o),this._uiManager.enableWaiting(!1);const u=p(this,sr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/r,this.height=s/o,(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),b(this,ft,x0).call(this),a(this,ph)||(this.parent.addUndoableEditor(this),p(this,ph,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,fh)&&this.div.setAttribute("aria-description",a(this,fh)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Yp=function(e,n){const{width:s,height:r}=a(this,Dt);let o=s,l=r,c=a(this,Dt);for(;o>2*e||l>2*n;){const h=o,u=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*n&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,h,u,0,0,o,l),c=d.transferToImageBitmap()}return c},x0=function(){const[e,n]=this.parentDimensions,{width:s,height:r}=this,o=new fs,l=Math.ceil(s*e*o.sx),c=Math.ceil(r*n*o.sy),h=a(this,sr);if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const u=a(this,Fn)?a(this,Dt):b(this,ft,Yp).call(this,l,c),d=h.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(u,0,0,u.width,u.height,0,0,l,c)},Qp=function(e){if(e){if(a(this,Fn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,me));if(r)return r}const n=document.createElement("canvas");return{width:n.width,height:n.height}=a(this,Dt),n.getContext("2d").drawImage(a(this,Dt),0,0),n.toDataURL()}if(a(this,Fn)){const[n,s]=this.pageDimensions,r=Math.round(this.width*n*Oo.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Oo.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Dt),0,0,a(this,Dt).width,a(this,Dt).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Dt))},wC=function(e){var l;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,r=e.pageIndex===n,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},M(b0,"_type","stamp"),M(b0,"_editorType",Z.STAMP);var sl,gh,ls,wo,rr,On,So,mh,rl,ki,or,ye,ar,Ao,yh,K,bo,Nt,SC,Bi,C0,T0,Jp;const yi=class yi{constructor({uiManager:t,pageIndex:e,div:n,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:h,l10n:u}){S(this,Nt);S(this,sl);S(this,gh,!1);S(this,ls,null);S(this,wo,null);S(this,rr,null);S(this,On,new Map);S(this,So,!1);S(this,mh,!1);S(this,rl,!1);S(this,ki,null);S(this,or,null);S(this,ye,null);S(this,ar,null);S(this,Ao,null);S(this,yh,-1);S(this,K);const d=[...a(yi,bo).values()];if(!yi._initialized){yi._initialized=!0;for(const f of d)f.initialize(u,t)}t.registerEditorTypes(d),p(this,K,t),this.pageIndex=e,this.div=n,p(this,sl,r),p(this,ls,o),this.viewport=h,p(this,ye,c),this.drawLayer=l,this._structTree=s,a(this,K).addLayer(this)}get isEmpty(){return a(this,On).size===0}get isInvisible(){return this.isEmpty&&a(this,K).getMode()===Z.NONE}updateToolbar(t){a(this,K).updateToolbar(t)}updateMode(t=a(this,K).getMode()){switch(b(this,Nt,Jp).call(this),t){case Z.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Z.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Z.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const n of a(yi,bo).values())e.toggle(`${n._type}Editing`,t===n._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,ye))==null?void 0:e.div)}setEditingState(t){a(this,K).setEditingState(t)}addCommands(t){a(this,K).addCommands(t)}cleanUndoStack(t){a(this,K).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,ls))==null||e.div.classList.toggle("disabled",!t)}async enable(){var n;p(this,rl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(n=a(this,Ao))==null||n.abort(),p(this,Ao,null);const t=new Set;for(const s of a(this,On).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,K).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!a(this,ls)){p(this,rl,!1);return}const e=a(this,ls).getEditableAnnotations();for(const s of e){if(s.hide(),a(this,K).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}p(this,rl,!1)}disable(){var s;if(p(this,mh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),a(this,ye)&&!a(this,Ao)){p(this,Ao,new AbortController);const r=a(this,K).combinedSignal(a(this,Ao));a(this,ye).div.addEventListener("pointerdown",o=>{const{clientX:c,clientY:h,timeStamp:u}=o,d=a(this,yh);if(u-d>500){p(this,yh,u);return}p(this,yh,-1);const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(c,h);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let v;const A=new RegExp(`^${dx}[0-9]+$`);for(const m of g)if(A.test(m.id)){v=m.id;break}if(!v)return;const E=a(this,On).get(v);(E==null?void 0:E.annotationElementId)===null&&(o.stopPropagation(),o.preventDefault(),E.dblclick())},{signal:r,capture:!0})}const t=new Map,e=new Map;for(const r of a(this,On).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(s=this.getEditableAnnotation(r.annotationElementId))==null||s.show(),r.remove()}if(a(this,ls)){const r=a(this,ls).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,K).isDeletedAnnotationElement(l)){o.updateEdited({deleted:!0});continue}let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,K).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}b(this,Nt,Jp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of a(yi,bo).values())n.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),p(this,mh,!1)}getEditableAnnotation(t){var e;return((e=a(this,ls))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,K).getActive()!==t&&a(this,K).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,ye))!=null&&t.div&&!a(this,ar)){p(this,ar,new AbortController);const e=a(this,K).combinedSignal(a(this,ar));a(this,ye).div.addEventListener("pointerdown",b(this,Nt,SC).bind(this),{signal:e}),a(this,ye).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,ye))!=null&&t.div&&a(this,ar)&&(a(this,ar).abort(),p(this,ar,null),a(this,ye).div.classList.remove("highlighting"))}enableClick(){if(a(this,wo))return;p(this,wo,new AbortController);const t=a(this,K).combinedSignal(a(this,wo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,wo))==null||t.abort(),p(this,wo,null)}attach(t){a(this,On).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,K).isDeletedAnnotationElement(e)&&a(this,K).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,On).delete(t.id),(e=a(this,sl))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,mh)&&t.annotationElementId&&a(this,K).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,K).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,K).addDeletedAnnotationElement(t.annotationElementId),Tt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,K).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,rl)),a(this,K).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var n;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,rr)&&(t._focusEventsAllowed=!1,p(this,rr,setTimeout(()=>{p(this,rr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,K)._signal}),e.focus())},0))),t._structTreeParentId=(n=a(this,sl))==null?void 0:n.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),n=()=>{t.remove()};this.addCommands({cmd:e,undo:n,mustExec:!1})}getNextId(){return a(this,K).getId()}combinedSignal(t){return a(this,K).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,Nt,Bi))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,K).updateMode(t.mode);const{offsetX:n,offsetY:s}=b(this,Nt,T0).call(this),r=this.getNextId(),o=b(this,Nt,C0).call(this,{parent:this,id:r,x:n,y:s,uiManager:a(this,K),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(yi,bo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,K)))||null}createAndAddNewEditor(t,e,n={}){const s=this.getNextId(),r=b(this,Nt,C0).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:a(this,K),isCentered:e,...n});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(b(this,Nt,T0).call(this),!0,t)}setSelected(t){a(this,K).setSelected(t)}toggleSelected(t){a(this,K).toggleSelected(t)}unselect(t){a(this,K).unselect(t)}pointerup(t){var s;const{isMac:e}=Ne.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,So)||(p(this,So,!1),(s=a(this,Nt,Bi))!=null&&s.isDrawer&&a(this,Nt,Bi).supportMultipleDrawings))return;if(!a(this,gh)){p(this,gh,!0);return}const n=a(this,K).getMode();if(n===Z.STAMP||n===Z.SIGNATURE){a(this,K).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(a(this,K).getMode()===Z.HIGHLIGHT&&this.enableTextSelection(),a(this,So)){p(this,So,!1);return}const{isMac:e}=Ne.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(p(this,So,!0),(s=a(this,Nt,Bi))!=null&&s.isDrawer){this.startDrawingSession(t);return}const n=a(this,K).getActive();p(this,gh,!n||n.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,ki)){a(this,Nt,Bi).startDrawing(this,a(this,K),!1,t);return}a(this,K).setCurrentDrawingSession(this),p(this,ki,new AbortController);const e=a(this,K).combinedSignal(a(this,ki));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(p(this,or,null),this.commitOrRemove())},{signal:e}),a(this,Nt,Bi).startDrawing(this,a(this,K),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&p(this,or,e);return}a(this,or)&&setTimeout(()=>{var e;(e=a(this,or))==null||e.focus(),p(this,or,null)},0)}endDrawingSession(t=!1){return a(this,ki)?(a(this,K).setCurrentDrawingSession(null),a(this,ki).abort(),p(this,ki,null),p(this,or,null),a(this,Nt,Bi).endDrawing(t)):null}findNewParent(t,e,n){const s=a(this,K).findParent(e,n);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return a(this,ki)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,ki)&&a(this,Nt,Bi).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,K).getActive())==null?void 0:t.parent)===this&&(a(this,K).commitOrRemove(),a(this,K).setActiveEditor(null)),a(this,rr)&&(clearTimeout(a(this,rr)),p(this,rr,null));for(const n of a(this,On).values())(e=a(this,sl))==null||e.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,a(this,On).clear(),a(this,K).removeLayer(this)}render({viewport:t}){this.viewport=t,pl(this.div,t);for(const e of a(this,K).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,K).commitOrRemove(),b(this,Nt,Jp).call(this);const e=this.viewport.rotation,n=t.rotation;if(this.viewport=t,pl(this.div,{rotation:n}),e!==n)for(const s of a(this,On).values())s.rotate(n)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,K).viewParameters.realScale}};sl=new WeakMap,gh=new WeakMap,ls=new WeakMap,wo=new WeakMap,rr=new WeakMap,On=new WeakMap,So=new WeakMap,mh=new WeakMap,rl=new WeakMap,ki=new WeakMap,or=new WeakMap,ye=new WeakMap,ar=new WeakMap,Ao=new WeakMap,yh=new WeakMap,K=new WeakMap,bo=new WeakMap,Nt=new WeakSet,SC=function(t){a(this,K).unselectAll();const{target:e}=t;if(e===a(this,ye).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,ye).div.contains(e)){const{isMac:n}=Ne.platform;if(t.button!==0||t.ctrlKey&&n)return;a(this,K).showAllEditors("highlight",!0,!0),a(this,ye).div.classList.add("free"),this.toggleDrawing(),Mg.startHighlighting(this,a(this,K).direction==="ltr",{target:a(this,ye).div,x:t.x,y:t.y}),a(this,ye).div.addEventListener("pointerup",()=>{a(this,ye).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,K)._signal}),t.preventDefault()}},Bi=function(){return a(yi,bo).get(a(this,K).getMode())},C0=function(t){const e=a(this,Nt,Bi);return e?new e.prototype.constructor(t):null},T0=function(){const{x:t,y:e,width:n,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+n),c=Math.min(window.innerHeight,e+s),h=(r+l)/2-t,u=(o+c)/2-e,[d,f]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:d,offsetY:f}},Jp=function(){for(const t of a(this,On).values())t.isEmpty()&&t.remove()},M(yi,"_initialized",!1),S(yi,bo,new Map([r0,g0,b0,Mg,A0].map(t=>[t._editorType,t])));let E0=yi;var Pi,Je,ol,Sf,Jg,AC,ps,P0,bC,R0;const re=class re{constructor({pageIndex:t}){S(this,ps);S(this,Pi,null);S(this,Je,new Map);S(this,ol,new Map);this.pageIndex=t}setParent(t){if(!a(this,Pi)){p(this,Pi,t);return}if(a(this,Pi)!==t){if(a(this,Je).size>0)for(const e of a(this,Je).values())e.remove(),t.append(e);p(this,Pi,t)}}static get _svgFactory(){return rt(this,"_svgFactory",new Rg)}draw(t,e=!1,n=!1){const s=ne(re,Sf)._++,r=b(this,ps,P0).call(this),o=re._svgFactory.createElement("defs");r.append(o);const l=re._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,ol).set(s,l);const h=n?b(this,ps,bC).call(this,o,c):null,u=re._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,Je).set(s,r),{id:s,clipPathId:`url(#${h})`}}drawOutline(t,e){const n=ne(re,Sf)._++,s=b(this,ps,P0).call(this),r=re._svgFactory.createElement("defs");s.append(r);const o=re._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const d=re._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${n}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=re._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const g=re._svgFactory.createElement("use");d.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=re._svgFactory.createElement("use");s.append(h),h.setAttribute("href",`#${l}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return s.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,t),a(this,Je).set(n,s),n}finalizeDraw(t,e){a(this,ol).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:n,bbox:s,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,Je).get(t):t;if(l){if(n&&b(this,ps,R0).call(this,l,n),s&&b(c=re,Jg,AC).call(c,l,s),r){const{classList:h}=l;for(const[u,d]of Object.entries(r))h.toggle(u,d)}if(o){const u=l.firstChild.firstChild;b(this,ps,R0).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const n=a(this,Je).get(t);n&&(a(e,Pi).append(n),a(this,Je).delete(t),a(e,Je).set(t,n))}remove(t){a(this,ol).delete(t),a(this,Pi)!==null&&(a(this,Je).get(t).remove(),a(this,Je).delete(t))}destroy(){p(this,Pi,null);for(const t of a(this,Je).values())t.remove();a(this,Je).clear(),a(this,ol).clear()}};Pi=new WeakMap,Je=new WeakMap,ol=new WeakMap,Sf=new WeakMap,Jg=new WeakSet,AC=function(t,[e,n,s,r]){const{style:o}=t;o.top=`${100*n}%`,o.left=`${100*e}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},ps=new WeakSet,P0=function(){const t=re._svgFactory.create(1,1,!0);return a(this,Pi).append(t),t.setAttribute("aria-hidden",!0),t},bC=function(t,e){const n=re._svgFactory.createElement("clipPath");t.append(n);const s=`clip_${e}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const r=re._svgFactory.createElement("use");return n.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),s},R0=function(t,e){for(const[n,s]of Object.entries(e))s===null?t.removeAttribute(n):t.setAttribute(n,s)},S(re,Jg),S(re,Sf,0);let k0=re;globalThis._pdfjsTestingUtils={HighlightOutliner:a0};globalThis.pdfjsLib={AbortException:Fo,AnnotationEditorLayer:E0,AnnotationEditorParamsType:lt,AnnotationEditorType:Z,AnnotationEditorUIManager:gl,AnnotationLayer:n0,AnnotationMode:Rr,AnnotationType:Yt,build:mM,ColorPicker:kg,createValidAbsoluteUrl:fx,DOMSVGFactory:Rg,DrawLayer:k0,FeatureTest:Ne,fetchData:Pf,getDocument:mE,getFilenameFromUrl:a_,getPdfFilenameFromUrl:l_,getRGB:bm,getUuid:mx,getXfaPageViewport:h_,GlobalWorkerOptions:hs,ImageKind:bp,InvalidPDFException:dv,isDataScheme:Am,isPdfFile:Mw,isValidExplicitDest:A_,MathClamp:$e,noContextMenu:pi,normalizeUnicode:s_,OPS:Vu,OutputScale:fs,PasswordResponses:YR,PDFDataRangeTransport:yE,PDFDateString:xg,PDFWorker:Hu,PermissionFlag:XR,PixelsPerInch:Oo,RenderingCancelledException:_w,ResponseException:bg,setLayerDimensions:pl,shadow:rt,SignatureExtractor:lr,stopEvent:Jt,SupportedImageMimeTypes:pv,TextLayer:Uu,TouchManager:Cg,updateUrlHash:px,Util:W,VerbosityLevel:vm,version:gM,XfaLayer:AE};class xC extends nt.Component{constructor(){super(...arguments);M(this,"state",{pdfDocument:null,error:null});M(this,"documentRef",vh.createRef())}componentDidMount(){this.load()}componentWillUnmount(){const{pdfDocument:e}=this.state;e&&e.destroy()}componentDidUpdate({url:e}){this.props.url!==e&&this.load()}componentDidCatch(e){const{onError:n}=this.props;n&&n(e),this.setState({pdfDocument:null,error:e})}load(){const{ownerDocument:e=document}=this.documentRef.current||{},{url:n,cMapUrl:s,cMapPacked:r,workerSrc:o}=this.props,{pdfDocument:l}=this.state;this.setState({pdfDocument:null,error:null}),typeof o=="string"&&(hs.workerSrc=o),Promise.resolve().then(()=>l==null?void 0:l.destroy()).then(()=>{if(!n)return;const c={...this.props,ownerDocument:e,cMapUrl:s,cMapPacked:r};return mE(c).promise.then(h=>{this.setState({pdfDocument:h})})}).catch(c=>this.componentDidCatch(c))}render(){const{children:e,beforeLoad:n}=this.props,{pdfDocument:s,error:r}=this.state;return I.jsxs(I.Fragment,{children:[I.jsx("span",{ref:this.documentRef}),r?this.renderError():!s||!e?n:e(s)]})}renderError(){const{errorMessage:e}=this.props;return e?vh.cloneElement(e,{error:this.state.error}):null}}M(xC,"defaultProps",{workerSrc:"https://unpkg.com/pdfjs-dist@5.4.149/build/pdf.worker.min.mjs"});const BM=i=>{document.location.hash=`highlight-${i.id}`};function VM({highlights:i,toggleDocument:t,resetHighlights:e}){return I.jsxs("div",{className:"sidebar",style:{width:"25vw"},children:[I.jsxs("div",{className:"description",style:{padding:"1rem"},children:[I.jsxs("h2",{style:{marginBottom:"1rem"},children:["react-pdf-highlighter ","8.0.0-rc.1"]}),I.jsx("p",{style:{fontSize:"0.7rem"},children:I.jsx("a",{href:"https://github.com/agentcooper/react-pdf-highlighter",children:"Open in GitHub"})}),I.jsx("p",{children:I.jsx("small",{children:"To create area highlight hold  Option key (Alt), then click and drag."})})]}),I.jsx("ul",{className:"sidebar__highlights",children:i.map((n,s)=>I.jsxs("li",{className:"sidebar__highlight",onClick:()=>{BM(n)},children:[I.jsxs("div",{children:[I.jsx("strong",{children:n.comment.text}),n.content.text?I.jsx("blockquote",{style:{marginTop:"0.5rem"},children:`${n.content.text.slice(0,90).trim()}`}):null,n.content.image?I.jsx("div",{className:"highlight__image",style:{marginTop:"0.5rem"},children:I.jsx("img",{src:n.content.image,alt:"Screenshot"})}):null]}),I.jsxs("div",{className:"highlight__location",children:["Page ",n.position.pageNumber]})]},s))}),I.jsx("div",{style:{padding:"1rem"},children:I.jsx("button",{type:"button",onClick:t,children:"Toggle PDF document"})}),i.length>0?I.jsx("div",{style:{padding:"1rem"},children:I.jsx("button",{type:"button",onClick:e,children:"Reset highlights"})}):null]})}function UM(){return I.jsx("div",{style:{display:"flex",alignItems:"center",height:"100vh"},children:I.jsxs("div",{className:"sk-fading-circle",children:[I.jsx("div",{className:"sk-circle1 sk-circle"}),I.jsx("div",{className:"sk-circle2 sk-circle"}),I.jsx("div",{className:"sk-circle3 sk-circle"}),I.jsx("div",{className:"sk-circle4 sk-circle"}),I.jsx("div",{className:"sk-circle5 sk-circle"}),I.jsx("div",{className:"sk-circle6 sk-circle"}),I.jsx("div",{className:"sk-circle7 sk-circle"}),I.jsx("div",{className:"sk-circle8 sk-circle"}),I.jsx("div",{className:"sk-circle9 sk-circle"}),I.jsx("div",{className:"sk-circle10 sk-circle"}),I.jsx("div",{className:"sk-circle11 sk-circle"}),I.jsx("div",{className:"sk-circle12 sk-circle"})]})})}const qM={"https://arxiv.org/pdf/1708.08021":[{content:{text:" Type Checking for JavaScript"},position:{boundingRect:{x1:255.73419189453125,y1:139.140625,x2:574.372314453125,y2:165.140625,width:809.9999999999999,height:1200},rects:[{x1:255.73419189453125,y1:139.140625,x2:574.372314453125,y2:165.140625,width:809.9999999999999,height:1200}],pageNumber:1},comment:{text:"Flow or TypeScript?",emoji:""},id:"8245652131754351"},{content:{text:" millions of lines of code atFacebookevery day"},position:{boundingRect:{x1:353.080810546875,y1:346.390625,x2:658.6533203125,y2:363.390625,width:809.9999999999999,height:1200},rects:[{x1:353.080810546875,y1:346.390625,x2:658.6533203125,y2:363.390625,width:809.9999999999999,height:1200}],pageNumber:1},comment:{text:"impressive",emoji:""},id:"812807243318874"},{content:{text:"This fuels a fast edit-refresh cycle, whichpromises an immersive coding experience that is quite appealing to creative developers."},position:{boundingRect:{x1:76.375,y1:666.21875,x2:733.61328125,y2:706.140625,width:809.9999999999999,height:1200,pageNumber:1},rects:[{x1:459.168701171875,y1:666.21875,x2:733.61328125,y2:686.21875,width:809.9999999999999,height:1200,pageNumber:1},{x1:76.375,y1:686.140625,x2:671.4954833984375,y2:706.140625,width:809.9999999999999,height:1200,pageNumber:1}],pageNumber:1},comment:{text:"immersive coding experience!",emoji:""},id:"2599712881412761"},{content:{image:"data:image/png;base64,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"},position:{boundingRect:{x1:410.8125,y1:133,x2:744.8125,y2:261,width:809.9999999999999,height:1200,pageNumber:3},rects:[],pageNumber:3},comment:{text:"lisp!",emoji:""},id:"9120567402727258"},{content:{text:"We consider a minimal subset of JavaScript that includes functions, mutable variables, primitivevalues and records"},position:{boundingRect:{x1:75.578125,y1:1039.3125,x2:733.607421875,y2:1079.234375,width:809.9999999999999,height:1200,pageNumber:4},rects:[{x1:75.578125,y1:1039.3125,x2:733.607421875,y2:1059.3125,width:809.9999999999999,height:1200,pageNumber:4},{x1:75.953125,y1:1059.234375,x2:206.6217041015625,y2:1079.234375,width:809.9999999999999,height:1200,pageNumber:4}],pageNumber:4},comment:{text:"",emoji:""},id:"32839601376722394"},{content:{image:"data:image/png;base64,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"},position:{boundingRect:{x1:65.8125,y1:133,x2:406.8125,y2:417,width:809.9999999999999,height:1200,pageNumber:24},rects:[],pageNumber:24},comment:{text:"",emoji:""},id:"46570518065661615"},{id:"46570518065661616",comment:{text:"Fast type checking?!?!",emoji:""},content:{text:"Fast type checking.The key toFlows speed is modularity: the ability to break the analysis intofile-sized chunks that can be assembled later. Fortunately, JavaScript is already written using files4Avik Chaudhuri, Panagiotis Vekris, Sam Goldman, Marshall Roch, and Gabriel Levias modules, so we modularize our analysis simply by asking that modules have explicitly typedsignatures. (We still infer types for the vast majority of code local to modules.) Coincidentally,developers consider this good software engineering practice anyway."},position:{boundingRect:{x1:76.375,y1:1058.4271240234375,x2:733.626220703125,y2:1097.0208740234375,width:809.9999999999999,height:1200,pageNumber:3},rects:[{x1:75.989501953125,y1:96.9896240234375,x2:85.2291259765625,y2:115.65625,width:809.9999999999999,height:1200,pageNumber:4},{x1:167.583251953125,y1:96.9896240234375,x2:733.6123046875,y2:115.65625,width:809.9999999999999,height:1200,pageNumber:4},{x1:76.375,y1:142.82293701171875,x2:733.613525390625,y2:161.4896240234375,width:809.9999999999999,height:1200,pageNumber:4},{x1:76.375,y1:162.7396240234375,x2:735.43798828125,y2:181.40625,width:809.9999999999999,height:1200,pageNumber:4},{x1:76.375,y1:182.66668701171875,x2:544.7579345703125,y2:201.3333740234375,width:809.9999999999999,height:1200,pageNumber:4},{x1:92.9791259765625,y1:1058.4271240234375,x2:733.619140625,y2:1077.09375,width:809.9999999999999,height:1200,pageNumber:3},{x1:76.375,y1:1078.3541870117188,x2:733.626220703125,y2:1097.0208740234375,width:809.9999999999999,height:1200,pageNumber:3}],pageNumber:3}}],"https://arxiv.org/pdf/1604.02480":[{content:{text:"SSA"},position:{boundingRect:{x1:816.4599609375,y1:360.1875,x2:848.4677734375,y2:380.1875,width:1019.9999999999999,height:1319.9999999999998,pageNumber:1},rects:[{x1:816.4599609375,y1:360.1875,x2:848.4677734375,y2:380.1875,width:1019.9999999999999,height:1319.9999999999998,pageNumber:1}],pageNumber:1},comment:{text:"Static Single Assignment",emoji:""},id:"29668244118038056"}]},cp=qM,HM=()=>String(Math.random()).slice(2),jM=()=>document.location.hash.slice(11),WM=()=>{document.location.hash=""},GM=({comment:i})=>i.text?I.jsxs("div",{className:"Highlight__popup",children:[i.emoji," ",i.text]}):null,my="https://arxiv.org/pdf/1708.08021",KM="https://arxiv.org/pdf/1604.02480";function XM(){const t=new URLSearchParams(document.location.search).get("url")||my,[e,n]=nt.useState(t),[s,r]=nt.useState(cp[t]?[...cp[t]]:[]),o=()=>{r([])},l=()=>{const g=e===my?KM:my;n(g),r(cp[g]?[...cp[g]]:[])},c=nt.useRef(g=>{}),h=nt.useCallback(()=>{const g=u(jM());g&&c.current(g)},[]);nt.useEffect(()=>(window.addEventListener("hashchange",h,!1),()=>{window.removeEventListener("hashchange",h,!1)}),[h]);const u=g=>s.find(v=>v.id===g),d=g=>{console.log("Saving highlight",g),r(v=>[{...g,id:HM()},...v])},f=(g,v,A)=>{console.log("Updating highlight",g,v,A),r(E=>E.map(m=>{const{id:y,position:w,content:x,...C}=m;return y===g?{id:y,position:{...w,...v},content:{...x,...A},...C}:m}))};return I.jsxs("div",{className:"App",style:{display:"flex",height:"100vh"},children:[I.jsx(VM,{highlights:s,resetHighlights:o,toggleDocument:l}),I.jsx("div",{style:{height:"100vh",width:"75vw",position:"relative"},children:I.jsx(xC,{url:e,beforeLoad:I.jsx(UM,{}),children:g=>I.jsx(Jb,{pdfDocument:g,enableAreaSelection:v=>v.altKey,onScrollChange:WM,scrollRef:v=>{c.current=v,h()},onSelectionFinished:(v,A,E,m)=>I.jsx(MP,{onOpen:m,onConfirm:y=>{d({content:A,position:v,comment:y}),E()}}),highlightTransform:(v,A,E,m,y,w,x)=>{var k;const T=!((k=v.content)!=null&&k.image)?I.jsx(OP,{isScrolledTo:x,position:v.position,comment:v.comment}):I.jsx(KR,{isScrolledTo:x,highlight:v,onChange:P=>{f(v.id,{boundingRect:y(P)},{image:w(P)})}});return I.jsx(BP,{popupContent:I.jsx(GM,{...v}),onMouseOver:P=>E(v,_=>P),onMouseOut:m,children:T},A)},highlights:s})})})]})}const YM=document.getElementById("root"),QM=Ew(YM);QM.render(I.jsx(XM,{}));
